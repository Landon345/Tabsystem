{"ast":null,"code":"var _jsxFileName = \"/Users/landonschlangen/Documents/WebDevelopmentFolder/ReactApps/tabsystem/src/ProtectedAdminComponents/CommonItems/CreateCommonItem.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery, queryCache, useMutation } from \"react-query\";\nimport { GetCommonItems, PostCommonItem } from \"../../Api/CommonItems\"; //styled component imports\n\nimport { Box, Icon, Grid, Skeleton, Spinner } from \"@chakra-ui/core\";\nimport { MyButton } from \"../../GlobalStyles/Styles\";\nexport default function CreateCommonItem() {\n  const [name, setName] = useState([]);\n  const [category, setCategory] = useState(null);\n  const [price, setPrice] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const {\n    status,\n    data,\n    error,\n    refetch\n  } = useQuery(\"GetCommonItems\", GetCommonItems, {});\n  const [mutate] = useMutation(PostCommonItem, {\n    onMutate: newCommonItem => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      queryCache.cancelQueries(\"GetCommonItems\"); // Snapshot the previous value\n\n      const previousCommonItems = queryCache.getQueryData(\"GetCommonItems\"); // Optimistically update to the new value\n\n      queryCache.setQueryData(\"GetCommmonItems\", old => [...old, newCommonItem]); // Return the snapshotted value\n\n      return () => queryCache.setQueryData(\"GetCommmonItems\", previousCommonItems);\n    },\n    // If the mutation fails, use the value returned from onMutate to roll back\n    onError: (err, newCommonItem, rollback) => rollback(),\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryCache.refetchQueries(\"GetCommonItems\");\n    }\n  });\n\n  const handleChange = event => {\n    if ([event.target.name] == \"name\") {\n      setName(event.target.value);\n    } else if ([event.target.name] == \"price\") {\n      setPrice(event.target.value);\n    } else if ([event.target.name] == \"category\") {\n      console.log(event.target.value);\n      setCategory(event.target.value);\n    }\n  };\n\n  const newCommonItem = async e => {\n    e.preventDefault();\n    const commonitem = {\n      name: name,\n      category_id: category,\n      price: price\n    };\n    const data = await mutate(commonitem);\n\n    if (data.success) {\n      setMessage(\"Successfully created item\");\n    } else {\n      setMessage(\"Something went wrong\");\n    }\n  }; //return this when loading\n\n\n  if (status === \"loading\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      textAlign: \"center\",\n      fontSize: \"50px\",\n      mt: \"60px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, \"Loading... \", /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 24\n      }\n    })), /*#__PURE__*/React.createElement(Skeleton, {\n      height: \"50px\",\n      my: \"10px\",\n      mx: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Skeleton, {\n      height: \"50px\",\n      my: \"10px\",\n      mx: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Skeleton, {\n      height: \"50px\",\n      my: \"10px\",\n      mx: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    })));\n  } //return when error\n\n\n  if (status === \"error\") return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 34\n    }\n  }, \"error \", error);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/tabs`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, \"Back\"), data.commonitems.map(commonitem => /*#__PURE__*/React.createElement(\"div\", {\n    key: commonitem.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, commonitem.name)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: newCommonItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: handleChange,\n    value: name,\n    name: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: handleChange,\n    value: price,\n    name: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"category\",\n    id: \"category\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"none\"), data.categories.map(category => /*#__PURE__*/React.createElement(\"option\", {\n    key: category.id,\n    value: category.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, category.name))), /*#__PURE__*/React.createElement(MyButton, {\n    bg: \"White\",\n    bgh: \"second100\",\n    bcf: \"fifth200\",\n    color: \"first200\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, \"Submit\")), message));\n}","map":{"version":3,"sources":["/Users/landonschlangen/Documents/WebDevelopmentFolder/ReactApps/tabsystem/src/ProtectedAdminComponents/CommonItems/CreateCommonItem.jsx"],"names":["React","useState","useEffect","Link","useQuery","queryCache","useMutation","GetCommonItems","PostCommonItem","Box","Icon","Grid","Skeleton","Spinner","MyButton","CreateCommonItem","name","setName","category","setCategory","price","setPrice","message","setMessage","status","data","error","refetch","mutate","onMutate","newCommonItem","cancelQueries","previousCommonItems","getQueryData","setQueryData","old","onError","err","rollback","onSettled","refetchQueries","handleChange","event","target","value","console","log","e","preventDefault","commonitem","category_id","success","commonitems","map","id","categories"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery, queryCache, useMutation } from \"react-query\";\nimport { GetCommonItems, PostCommonItem } from \"../../Api/CommonItems\";\n\n//styled component imports\nimport { Box, Icon, Grid, Skeleton, Spinner } from \"@chakra-ui/core\";\nimport { MyButton } from \"../../GlobalStyles/Styles\";\n\nexport default function CreateCommonItem() {\n  const [name, setName] = useState([]);\n  const [category, setCategory] = useState(null);\n  const [price, setPrice] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const { status, data, error, refetch } = useQuery(\n    \"GetCommonItems\",\n    GetCommonItems,\n    {}\n  );\n\n  const [mutate] = useMutation(PostCommonItem, {\n    onMutate: (newCommonItem) => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      queryCache.cancelQueries(\"GetCommonItems\");\n\n      // Snapshot the previous value\n      const previousCommonItems = queryCache.getQueryData(\"GetCommonItems\");\n\n      // Optimistically update to the new value\n      queryCache.setQueryData(\"GetCommmonItems\", (old) => [\n        ...old,\n        newCommonItem,\n      ]);\n\n      // Return the snapshotted value\n      return () =>\n        queryCache.setQueryData(\"GetCommmonItems\", previousCommonItems);\n    },\n    // If the mutation fails, use the value returned from onMutate to roll back\n    onError: (err, newCommonItem, rollback) => rollback(),\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryCache.refetchQueries(\"GetCommonItems\");\n    },\n  });\n\n  const handleChange = (event) => {\n    if ([event.target.name] == \"name\") {\n      setName(event.target.value);\n    } else if ([event.target.name] == \"price\") {\n      setPrice(event.target.value);\n    } else if ([event.target.name] == \"category\") {\n      console.log(event.target.value);\n      setCategory(event.target.value);\n    }\n  };\n  const newCommonItem = async (e) => {\n    e.preventDefault();\n    const commonitem = {\n      name: name,\n      category_id: category,\n      price: price,\n    };\n    const data = await mutate(commonitem);\n    if (data.success) {\n      setMessage(\"Successfully created item\");\n    } else {\n      setMessage(\"Something went wrong\");\n    }\n  };\n  //return this when loading\n  if (status === \"loading\") {\n    return (\n      <div className=\"\">\n        <div>\n          <Box textAlign=\"center\" fontSize=\"50px\" mt=\"60px\">\n            Loading... <Spinner />\n          </Box>\n          <Skeleton height=\"50px\" my=\"10px\" mx=\"10%\" />\n          <Skeleton height=\"50px\" my=\"10px\" mx=\"10%\" />\n          <Skeleton height=\"50px\" my=\"10px\" mx=\"10%\" />\n        </div>\n      </div>\n    );\n  }\n  //return when error\n  if (status === \"error\") return <div className=\"\">error {error}</div>;\n\n  return (\n    <div>\n      <Link to={`/tabs`}>Back</Link>\n      {data.commonitems.map((commonitem) => (\n        <div key={commonitem.id}>{commonitem.name}</div>\n      ))}\n      <div>\n        <form onSubmit={newCommonItem}>\n          <label>Name</label>\n          <input type=\"text\" onChange={handleChange} value={name} name=\"name\" />\n          <label>Price</label>\n          <input\n            type=\"text\"\n            onChange={handleChange}\n            value={price}\n            name=\"price\"\n          />\n          <label htmlFor=\"category\">Category</label>\n          <select name=\"category\" id=\"category\" onChange={handleChange}>\n            <option value={null}>none</option>\n            {data.categories.map((category) => (\n              <option key={category.id} value={category.id}>\n                {category.name}\n              </option>\n            ))}\n          </select>\n          <MyButton\n            bg=\"White\"\n            bgh=\"second100\"\n            bcf=\"fifth200\"\n            color=\"first200\"\n            type=\"submit\"\n          >\n            Submit\n          </MyButton>\n        </form>\n        {message}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}