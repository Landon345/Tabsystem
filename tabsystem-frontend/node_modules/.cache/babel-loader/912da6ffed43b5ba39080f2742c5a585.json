{"ast":null,"code":"var _jsxFileName = \"/Users/landonschlangen/Documents/WebDevelopmentFolder/ReactApps/tabsystem/src/ProtectedAdminComponents/CreateCategory/CreateCategory.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery, queryCache, useMutation } from \"react-query\";\nimport { GetCategories, PostCategory, DeleteCategory } from \"../../Api/Categories\"; //styled component imports\n\nimport { Box, Icon, Grid, Skeleton, Spinner } from \"@chakra-ui/core\";\nimport { MyButton } from \"../../GlobalStyles/Styles\";\nexport default function CreateCategory() {\n  const [name, setName] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const {\n    status,\n    data,\n    error,\n    refetch\n  } = useQuery(\"GetCategories\", GetCategories, {});\n  const [mutatePostCategory] = useMutation(PostCategory, {\n    onMutate: newCategory => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      queryCache.cancelQueries(\"GetCategories\"); // Snapshot the previous value\n\n      const previousCateogories = queryCache.getQueryData(\"GetCategories\"); // Optimistically update to the new value\n\n      queryCache.setQueryData(\"GetCategories\", old => [...old, newCategory]); // Return the snapshotted value\n\n      return () => queryCache.setQueryData(\"GetCategories\", previousCateogories);\n    },\n    // If the mutation fails, use the value returned from onMutate to roll back\n    onError: (err, newCategory, rollback) => rollback(),\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryCache.invalidateQueries(\"GetCategories\");\n    }\n  });\n  const [mutateDeleteCategory] = useMutation(DeleteCategory, {\n    // When mutate is called:\n    onMutate: categoryIdPassed => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      queryCache.cancelQueries(\"GetCategories\"); // Snapshot the previous value\n\n      const previousCateogories = queryCache.getQueryData(\"GetCategories\"); // Return the snapshotted value\n\n      return () => queryCache.setQueryData(\"GetCategories\", previousCateogories);\n    },\n    // If the mutation fails, use the value returned from onMutate to roll back\n    onError: (err, categoryIdPassed, rollback) => rollback(),\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryCache.refetchQueries(\"GetCategories\");\n    }\n  });\n\n  const handleChange = event => {\n    setName(event.target.value);\n  };\n\n  const newCategory = async e => {\n    e.preventDefault();\n    const category = {\n      name: name\n    };\n    const data = await mutatePostCategory(category);\n    console.log(data);\n\n    if (data.success) {\n      setMessage(\"Successfully created item\");\n    } else {\n      setMessage(\"Something went wrong\");\n    }\n  };\n\n  const deleteCategory = async id => {\n    const data = await mutateDeleteCategory(id);\n    console.log(data);\n\n    if (data.success) {\n      setMessage(\"Successfully deleted item\");\n    } else {\n      setMessage(\"Something went wrong\");\n    }\n  }; //return this when loading\n\n\n  if (status === \"loading\") {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      textAlign: \"center\",\n      fontSize: \"50px\",\n      mt: \"60px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, \"Loading... \", /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 24\n      }\n    })), /*#__PURE__*/React.createElement(Skeleton, {\n      height: \"50px\",\n      my: \"10px\",\n      mx: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Skeleton, {\n      height: \"50px\",\n      my: \"10px\",\n      mx: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Skeleton, {\n      height: \"50px\",\n      my: \"10px\",\n      mx: \"10%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    })));\n  } //return when error\n\n\n  if (status === \"error\") return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 34\n    }\n  }, \"error \", error);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/tabs`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, \"Back\"), data.map(category => /*#__PURE__*/React.createElement(\"div\", {\n    key: category.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, category.name), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => deleteCategory(category.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: newCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, \"category name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: handleChange,\n    value: name,\n    name: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MyButton, {\n    bg: \"White\",\n    bgh: \"second100\",\n    bcf: \"fifth200\",\n    color: \"first200\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Submit\")), message));\n}","map":{"version":3,"sources":["/Users/landonschlangen/Documents/WebDevelopmentFolder/ReactApps/tabsystem/src/ProtectedAdminComponents/CreateCategory/CreateCategory.jsx"],"names":["React","useState","useEffect","Link","useQuery","queryCache","useMutation","GetCategories","PostCategory","DeleteCategory","Box","Icon","Grid","Skeleton","Spinner","MyButton","CreateCategory","name","setName","message","setMessage","status","data","error","refetch","mutatePostCategory","onMutate","newCategory","cancelQueries","previousCateogories","getQueryData","setQueryData","old","onError","err","rollback","onSettled","invalidateQueries","mutateDeleteCategory","categoryIdPassed","refetchQueries","handleChange","event","target","value","e","preventDefault","category","console","log","success","deleteCategory","id","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery, queryCache, useMutation } from \"react-query\";\nimport {\n  GetCategories,\n  PostCategory,\n  DeleteCategory,\n} from \"../../Api/Categories\";\n//styled component imports\nimport { Box, Icon, Grid, Skeleton, Spinner } from \"@chakra-ui/core\";\nimport { MyButton } from \"../../GlobalStyles/Styles\";\n\nexport default function CreateCategory() {\n  const [name, setName] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const { status, data, error, refetch } = useQuery(\n    \"GetCategories\",\n    GetCategories,\n    {}\n  );\n  const [mutatePostCategory] = useMutation(PostCategory, {\n    onMutate: (newCategory) => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      queryCache.cancelQueries(\"GetCategories\");\n\n      // Snapshot the previous value\n      const previousCateogories = queryCache.getQueryData(\"GetCategories\");\n\n      // Optimistically update to the new value\n      queryCache.setQueryData(\"GetCategories\", (old) => [...old, newCategory]);\n\n      // Return the snapshotted value\n      return () =>\n        queryCache.setQueryData(\"GetCategories\", previousCateogories);\n    },\n    // If the mutation fails, use the value returned from onMutate to roll back\n    onError: (err, newCategory, rollback) => rollback(),\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryCache.invalidateQueries(\"GetCategories\");\n    },\n  });\n  const [mutateDeleteCategory] = useMutation(DeleteCategory, {\n    // When mutate is called:\n    onMutate: (categoryIdPassed) => {\n      // Cancel any outgoing refetches (so they don't overwrite our optimistic update)\n      queryCache.cancelQueries(\"GetCategories\");\n      // Snapshot the previous value\n      const previousCateogories = queryCache.getQueryData(\"GetCategories\");\n      // Return the snapshotted value\n      return () =>\n        queryCache.setQueryData(\"GetCategories\", previousCateogories);\n    },\n    // If the mutation fails, use the value returned from onMutate to roll back\n    onError: (err, categoryIdPassed, rollback) => rollback(),\n    // Always refetch after error or success:\n    onSettled: () => {\n      queryCache.refetchQueries(\"GetCategories\");\n    },\n  });\n\n  const handleChange = (event) => {\n    setName(event.target.value);\n  };\n  const newCategory = async (e) => {\n    e.preventDefault();\n    const category = {\n      name: name,\n    };\n    const data = await mutatePostCategory(category);\n    console.log(data);\n    if (data.success) {\n      setMessage(\"Successfully created item\");\n    } else {\n      setMessage(\"Something went wrong\");\n    }\n  };\n\n  const deleteCategory = async (id) => {\n    const data = await mutateDeleteCategory(id);\n    console.log(data);\n    if (data.success) {\n      setMessage(\"Successfully deleted item\");\n    } else {\n      setMessage(\"Something went wrong\");\n    }\n  };\n  //return this when loading\n  if (status === \"loading\") {\n    return (\n      <div className=\"\">\n        <div>\n          <Box textAlign=\"center\" fontSize=\"50px\" mt=\"60px\">\n            Loading... <Spinner />\n          </Box>\n          <Skeleton height=\"50px\" my=\"10px\" mx=\"10%\" />\n          <Skeleton height=\"50px\" my=\"10px\" mx=\"10%\" />\n          <Skeleton height=\"50px\" my=\"10px\" mx=\"10%\" />\n        </div>\n      </div>\n    );\n  }\n  //return when error\n  if (status === \"error\") return <div className=\"\">error {error}</div>;\n\n  return (\n    <div>\n      <Link to={`/tabs`}>Back</Link>\n      {data.map((category) => (\n        <div key={category.id}>\n          <div>{category.name}</div>\n          <button onClick={() => deleteCategory(category.id)}>Delete</button>\n        </div>\n      ))}\n      <div>\n        <form onSubmit={newCategory}>\n          <label>category name</label>\n          <input type=\"text\" onChange={handleChange} value={name} name=\"name\" />\n\n          <MyButton\n            bg=\"White\"\n            bgh=\"second100\"\n            bcf=\"fifth200\"\n            color=\"first200\"\n            type=\"submit\"\n          >\n            Submit\n          </MyButton>\n        </form>\n        {message}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}