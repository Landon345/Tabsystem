{"ast":null,"code":"import React from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar statusIdle = 'idle';\nvar statusLoading = 'loading';\nvar statusError = 'error';\nvar statusSuccess = 'success';\nvar _uid = 0;\n\nvar uid = function uid() {\n  return _uid++;\n};\n\nvar cancelledError = {};\nvar isServer = typeof window === 'undefined';\n\nvar noop = function noop() {};\n\nvar identity = function identity(d) {\n  return d;\n};\n\nvar Console = console || {\n  error: noop,\n  warn: noop,\n  log: noop\n};\n\nfunction useUid() {\n  var ref = React.useRef(null);\n\n  if (ref.current === null) {\n    ref.current = uid();\n  }\n\n  return ref.current;\n}\n\nfunction setConsole(c) {\n  Console = c;\n}\n\nfunction useGetLatest(obj) {\n  var ref = React.useRef();\n  ref.current = obj;\n  return React.useCallback(function () {\n    return ref.current;\n  }, []);\n}\n\nfunction functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater;\n}\n\nfunction stableStringifyReplacer(_, value) {\n  return isObject(value) ? Object.assign.apply(Object, [{}].concat(Object.keys(value).sort().map(function (key) {\n    var _ref;\n\n    return _ref = {}, _ref[key] = value[key], _ref;\n  }))) : value;\n}\n\nfunction stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer);\n}\n\nfunction isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a);\n}\n\nfunction deepIncludes(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (typeof a !== typeof b) {\n    return false;\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(function (key) {\n      return !deepIncludes(a[key], b[key]);\n    });\n  }\n\n  return false;\n}\n\nfunction isDocumentVisible() {\n  return typeof document === 'undefined' || document.visibilityState === undefined || document.visibilityState === 'visible' || document.visibilityState === 'prerender';\n}\n\nfunction isOnline() {\n  return navigator.onLine === undefined || navigator.onLine;\n}\n\nfunction getQueryArgs(args) {\n  if (isObject(args[0])) {\n    if (args[0].hasOwnProperty('queryKey') && args[0].hasOwnProperty('queryFn')) {\n      var _args$ = args[0],\n          _queryKey = _args$.queryKey,\n          _args$$variables = _args$.variables,\n          variables = _args$$variables === void 0 ? [] : _args$$variables,\n          _queryFn = _args$.queryFn,\n          _args$$config = _args$.config,\n          _config = _args$$config === void 0 ? {} : _args$$config;\n\n      return [_queryKey, variables, _queryFn, _config];\n    } else {\n      throw new Error('queryKey and queryFn keys are required.');\n    }\n  }\n\n  if (typeof args[2] === 'function') {\n    var _queryKey2 = args[0],\n        _args$2 = args[1],\n        _variables = _args$2 === void 0 ? [] : _args$2,\n        _queryFn2 = args[2],\n        _args$3 = args[3],\n        _config2 = _args$3 === void 0 ? {} : _args$3;\n\n    return [_queryKey2, _variables, _queryFn2, _config2];\n  }\n\n  var queryKey = args[0],\n      queryFn = args[1],\n      _args$4 = args[2],\n      config = _args$4 === void 0 ? {} : _args$4;\n  return [queryKey, [], queryFn, config];\n}\n\nfunction useMountedCallback(callback) {\n  var mounted = React.useRef(false);\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](function () {\n    mounted.current = true;\n    return function () {\n      return mounted.current = false;\n    };\n  }, []);\n  return React.useCallback(function () {\n    return mounted.current ? callback.apply(void 0, arguments) : void 0;\n  }, [callback]);\n}\n\nfunction handleSuspense(queryInfo) {\n  if (queryInfo.config.suspense || queryInfo.config.useErrorBoundary) {\n    if (queryInfo.status === statusError) {\n      setTimeout(function () {\n        queryInfo.query.state.status = 'loading';\n      });\n      throw queryInfo.error;\n    }\n  }\n\n  if (queryInfo.config.suspense) {\n    if (queryInfo.status === statusLoading) {\n      queryInfo.query.wasSuspended = true;\n      throw queryInfo.refetch();\n    }\n  }\n} // This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\n\n\nfunction deepEqual(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length; // eslint-disable-next-line eqeqeq\n\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!deepEqual(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!deepEqual(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n\n\n  return a !== a && b !== b;\n}\n\nvar configContext = React.createContext();\nvar DEFAULTS = {\n  retry: 3,\n  retryDelay: function retryDelay(attemptIndex) {\n    return Math.min(1000 * Math.pow(2, attemptIndex), 30000);\n  },\n  staleTime: 0,\n  cacheTime: 5 * 60 * 1000,\n  refetchAllOnWindowFocus: true,\n  refetchInterval: false,\n  suspense: false,\n  queryKeySerializerFn: defaultQueryKeySerializerFn,\n  queryFnParamsFilter: identity,\n  throwOnError: false,\n  useErrorBoundary: undefined,\n  // this will default to the suspense value\n  onMutate: noop,\n  onSuccess: noop,\n  onError: noop,\n  onSettled: noop,\n  refetchOnMount: true,\n  isDataEqual: deepEqual\n};\nvar defaultConfigRef = {\n  current: DEFAULTS\n};\n\nfunction useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current;\n}\n\nfunction ReactQueryConfigProvider(_ref) {\n  var config = _ref.config,\n      children = _ref.children;\n  var configContextValue = React.useContext(configContext);\n  var newConfig = React.useMemo(function () {\n    var newConfig = _extends({}, configContextValue || defaultConfigRef.current, config); // Default useErrorBoundary to the suspense value\n\n\n    if (typeof newConfig.useErrorBoundary === 'undefined') {\n      newConfig.useErrorBoundary = newConfig.suspense;\n    }\n\n    return newConfig;\n  }, [config, configContextValue]);\n  React.useEffect(function () {\n    // restore previous config on unmount\n    return function () {\n      defaultConfigRef.current = _extends({}, configContextValue || DEFAULTS); // Default useErrorBoundary to the suspense value\n\n      if (typeof defaultConfigRef.current.useErrorBoundary === 'undefined') {\n        defaultConfigRef.current.useErrorBoundary = defaultConfigRef.current.suspense;\n      }\n    };\n  }, [configContextValue]);\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig;\n  }\n\n  return /*#__PURE__*/React.createElement(configContext.Provider, {\n    value: newConfig\n  }, children);\n}\n\nfunction defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    return [];\n  }\n\n  if (typeof queryKey === 'function') {\n    try {\n      return defaultQueryKeySerializerFn(queryKey());\n    } catch (_unused) {\n      return [];\n    }\n  }\n\n  if (typeof queryKey === 'string') {\n    queryKey = [queryKey];\n  }\n\n  var queryHash = stableStringify(queryKey);\n  queryKey = JSON.parse(queryHash);\n  return [queryHash, queryKey];\n}\n\nfunction _await(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\n\nfunction _catch(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n}\n\nfunction _async(f) {\n  return function () {\n    for (var args = [], i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    try {\n      return Promise.resolve(f.apply(this, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n}\n\nfunction _invoke(body, then) {\n  var result = body();\n\n  if (result && result.then) {\n    return result.then(then);\n  }\n\n  return then(result);\n}\n\nvar queryCache = makeQueryCache();\nvar queryCacheContext = React.createContext(queryCache);\nvar queryCaches = [queryCache];\n\nfunction useQueryCache() {\n  return React.useContext(queryCacheContext);\n}\n\nfunction ReactQueryCacheProvider(_ref) {\n  var queryCache = _ref.queryCache,\n      children = _ref.children;\n  var cache = React.useMemo(function () {\n    return queryCache || makeQueryCache();\n  }, [queryCache]);\n  React.useEffect(function () {\n    queryCaches.push(cache);\n    return function () {\n      // remove the cache from the active list\n      var i = queryCaches.indexOf(cache);\n\n      if (i >= 0) {\n        queryCaches.splice(i, 1);\n      } // if the cache was created by us, we need to tear it down\n\n\n      if (queryCache == null) {\n        cache.clear();\n      }\n    };\n  }, [cache, queryCache]);\n  return /*#__PURE__*/React.createElement(queryCacheContext.Provider, {\n    value: cache\n  }, children);\n}\n\nvar actionInit = {};\nvar actionFailed = {};\nvar actionMarkStale = {};\nvar actionMarkGC = {};\nvar actionFetch = {};\nvar actionSuccess = {};\nvar actionError = {};\nvar actionSetState = {};\n\nfunction makeQueryCache() {\n  var listeners = [];\n  var cache = {\n    queries: {},\n    isFetching: 0\n  };\n\n  var notifyGlobalListeners = function notifyGlobalListeners() {\n    cache.isFetching = Object.values(cache.queries).reduce(function (acc, query) {\n      return query.state.isFetching ? acc + 1 : acc;\n    }, 0);\n    listeners.forEach(function (d) {\n      return d(cache);\n    });\n  };\n\n  cache.subscribe = function (cb) {\n    listeners.push(cb);\n    return function () {\n      listeners.splice(listeners.indexOf(cb), 1);\n    };\n  };\n\n  cache.clear = function () {\n    Object.values(cache.queries).forEach(function (query) {\n      return query.clear();\n    });\n    cache.queries = {};\n    notifyGlobalListeners();\n  };\n\n  var findQueries = function findQueries(predicate, _temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        exact = _ref2.exact;\n\n    if (typeof predicate !== 'function') {\n      var _defaultConfigRef$cur = defaultConfigRef.current.queryKeySerializerFn(predicate),\n          queryHash = _defaultConfigRef$cur[0],\n          queryKey = _defaultConfigRef$cur[1];\n\n      predicate = function predicate(d) {\n        return exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey);\n      };\n    }\n\n    return Object.values(cache.queries).filter(predicate);\n  };\n\n  cache.getQueries = findQueries;\n\n  cache.getQuery = function (queryKey) {\n    return findQueries(queryKey, {\n      exact: true\n    })[0];\n  };\n\n  cache.getQueryData = function (queryKey) {\n    var _cache$getQuery;\n\n    return (_cache$getQuery = cache.getQuery(queryKey)) == null ? void 0 : _cache$getQuery.state.data;\n  };\n\n  cache.removeQueries = function (predicate, _temp2) {\n    var _ref3 = _temp2 === void 0 ? {} : _temp2,\n        exact = _ref3.exact;\n\n    var foundQueries = findQueries(predicate, {\n      exact: exact\n    });\n    foundQueries.forEach(function (query) {\n      clearTimeout(query.staleTimeout);\n      delete cache.queries[query.queryHash];\n    });\n\n    if (foundQueries.length) {\n      notifyGlobalListeners();\n    }\n  };\n\n  cache.cancelQueries = function (predicate, _temp3) {\n    var _ref4 = _temp3 === void 0 ? {} : _temp3,\n        exact = _ref4.exact;\n\n    var foundQueries = findQueries(predicate, {\n      exact: exact\n    });\n    foundQueries.forEach(function (query) {\n      query.cancel();\n    });\n\n    if (foundQueries.length) {\n      notifyGlobalListeners();\n    }\n  };\n\n  cache.refetchQueries = _async(function (predicate, _temp4) {\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        exact = _ref5.exact,\n        throwOnError = _ref5.throwOnError,\n        force = _ref5.force;\n\n    var foundQueries = predicate === true ? Object.values(cache.queries) : findQueries(predicate, {\n      exact: exact\n    });\n    return _catch(function () {\n      return _await(Promise.all(foundQueries.map(function (query) {\n        return query.fetch({\n          force: force\n        });\n      })));\n    }, function (err) {\n      if (throwOnError) {\n        throw err;\n      }\n    });\n  });\n\n  cache._buildQuery = function (userQueryKey, queryVariables, queryFn, config) {\n    var _config$queryKeySeria = config.queryKeySerializerFn(userQueryKey),\n        queryHash = _config$queryKeySeria[0],\n        queryKey = _config$queryKeySeria[1];\n\n    var query = cache.queries[queryHash];\n\n    if (query) {\n      Object.assign(query, {\n        queryVariables: queryVariables,\n        queryFn: queryFn\n      });\n      query.config = _extends({}, query.config, config);\n    } else {\n      query = makeQuery({\n        cache: cache,\n        queryKey: queryKey,\n        queryHash: queryHash,\n        queryVariables: queryVariables,\n        queryFn: queryFn,\n        config: config\n      }); // If the query started with data, schedule\n      // a stale timeout\n\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout(); // Simulate a query healing process\n\n        query.heal(); // Schedule for garbage collection in case\n        // nothing subscribes to this query\n\n        query.scheduleGarbageCollection();\n      }\n\n      if (query.queryHash) {\n        if (!isServer) {\n          cache.queries[queryHash] = query; // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n\n          setTimeout(function () {\n            notifyGlobalListeners();\n          });\n        }\n      }\n    }\n\n    return query;\n  };\n\n  cache.prefetchQuery = _async(function () {\n    var _exit = false;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _getQueryArgs = getQueryArgs(args),\n        queryKey = _getQueryArgs[0],\n        queryVariables = _getQueryArgs[1],\n        queryFn = _getQueryArgs[2],\n        _getQueryArgs$ = _getQueryArgs[3],\n        force = _getQueryArgs$.force,\n        config = _objectWithoutPropertiesLoose(_getQueryArgs$, [\"force\"]);\n\n    config = _extends({}, defaultConfigRef.current, config);\n\n    var query = cache._buildQuery(queryKey, queryVariables, queryFn, config); // Don't prefetch queries that are fresh, unless force is passed\n\n\n    return _invoke(function () {\n      if (query.state.isStale || force) {\n        // Trigger a fetch and return the promise\n        return _catch(function () {\n          return _await(query.fetch({\n            force: force\n          }), function (res) {\n            query.wasPrefetched = true;\n            _exit = true;\n            return res;\n          });\n        }, function (err) {\n          if (config.throwOnError) {\n            throw err;\n          }\n        });\n      }\n    }, function (_result3) {\n      return _exit ? _result3 : query.state.data;\n    });\n  });\n\n  cache.setQueryData = function (queryKey, updater, _temp5) {\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        exact = _ref6.exact,\n        config = _objectWithoutPropertiesLoose(_ref6, [\"exact\"]);\n\n    var queries = findQueries(queryKey, {\n      exact: exact\n    });\n\n    if (!queries.length && typeof queryKey !== 'function') {\n      queries = [cache._buildQuery(queryKey, undefined, function () {\n        return new Promise(noop);\n      }, _extends({}, defaultConfigRef.current, config))];\n    }\n\n    queries.forEach(function (d) {\n      return d.setData(updater);\n    });\n  };\n\n  function makeQuery(options) {\n    var queryCache = options.cache;\n    var reducer = options.config.queryReducer || defaultQueryReducer;\n    var noQueryHash = typeof options.queryHash === 'undefined';\n    var initialData = typeof options.config.initialData === 'function' ? options.config.initialData() : options.config.initialData;\n    var hasInitialData = typeof initialData !== 'undefined';\n    var isStale = noQueryHash ? true : !hasInitialData;\n    var manual = options.config.manual;\n    var initialStatus = noQueryHash || manual || hasInitialData ? statusSuccess : statusLoading;\n\n    var query = _extends({}, options, {\n      instances: [],\n      state: reducer(undefined, {\n        type: actionInit,\n        initialStatus: initialStatus,\n        initialData: initialData,\n        hasInitialData: hasInitialData,\n        isStale: isStale,\n        manual: manual\n      })\n    });\n\n    var dispatch = function dispatch(action) {\n      query.state = reducer(query.state, action);\n      query.instances.forEach(function (d) {\n        return d.onStateUpdate(query.state);\n      });\n      notifyGlobalListeners();\n    };\n\n    query.scheduleStaleTimeout = function () {\n      if (query.config.staleTime === Infinity) {\n        return;\n      }\n\n      query.staleTimeout = setTimeout(function () {\n        if (queryCache.getQuery(query.queryKey)) {\n          dispatch({\n            type: actionMarkStale\n          });\n        }\n      }, query.config.staleTime);\n    };\n\n    query.scheduleGarbageCollection = function () {\n      if (query.config.cacheTime === Infinity) {\n        return;\n      }\n\n      dispatch({\n        type: actionMarkGC\n      });\n      query.cacheTimeout = setTimeout(function () {\n        cache.removeQueries(function (d) {\n          return d.state.markedForGarbageCollection && d.queryHash === query.queryHash;\n        });\n      }, typeof query.state.data === 'undefined' && query.state.status !== 'error' ? 0 : query.config.cacheTime);\n    };\n\n    query.heal = function () {\n      // Stop the query from being garbage collected\n      clearTimeout(query.cacheTimeout); // Mark the query as not cancelled\n\n      query.cancelled = null;\n    };\n\n    query.cancel = function () {\n      query.cancelled = cancelledError;\n\n      if (query.cancelPromises) {\n        query.cancelPromises();\n      }\n\n      delete query.promise;\n      notifyGlobalListeners();\n    };\n\n    query.updateInstance = function (instance) {\n      var found = query.instances.find(function (d) {\n        return d.id === instance.id;\n      });\n\n      if (found) {\n        Object.assign(found, instance);\n      } else {\n        found = _extends({\n          onStateUpdate: noop\n        }, instance);\n        query.instances.push(instance);\n      }\n    };\n\n    query.subscribe = function (instanceId) {\n      query.heal(); // Return the unsubscribe function\n\n      return function () {\n        query.instances = query.instances.filter(function (d) {\n          return d.id !== instanceId;\n        });\n\n        if (!query.instances.length) {\n          query.cancel(); // Schedule garbage collection\n\n          query.scheduleGarbageCollection();\n        }\n      };\n    }; // Set up the fetch function\n\n\n    var tryFetchData = _async(function (queryFn) {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      return _catch(function () {\n        // Perform the query\n        var promise = queryFn.apply(void 0, query.config.queryFnParamsFilter(args));\n\n        query.cancelPromises = function () {\n          return promise.cancel == null ? void 0 : promise.cancel();\n        };\n\n        return _await(promise, function (data) {\n          delete query.shouldContinueRetryOnFocus;\n          delete query.cancelPromises;\n          if (query.cancelled) throw query.cancelled;\n          return data;\n        });\n      }, function (error) {\n        var _exit2 = false;\n        delete query.cancelPromises;\n        if (query.cancelled) throw query.cancelled; // If we fail, increase the failureCount\n\n        dispatch({\n          type: actionFailed\n        }); // Do we need to retry the request?\n\n        return _invoke(function () {\n          if (query.config.retry === true || query.state.failureCount <= query.config.retry || typeof query.config.retry === 'function' && query.config.retry(query.state.failureCount, error)) {\n            // Only retry if the document is visible\n            if (!isDocumentVisible()) {\n              // set this flag to continue fetch retries on focus\n              query.shouldContinueRetryOnFocus = true;\n              _exit2 = true;\n              return new Promise(noop);\n            }\n\n            delete query.shouldContinueRetryOnFocus; // Determine the retryDelay\n\n            var delay = functionalUpdate(query.config.retryDelay, query.state.failureCount); // Return a new promise with the retry\n\n            _exit2 = true;\n            return _await(new Promise(function (resolve, reject) {\n              // Keep track of the retry timeout\n              setTimeout(_async(function () {\n                return query.cancelled ? reject(query.cancelled) : _catch(function () {\n                  return _await(tryFetchData.apply(void 0, [queryFn].concat(args)), function (data) {\n                    if (query.cancelled) return reject(query.cancelled);\n                    resolve(data);\n                  });\n                }, function (error) {\n                  if (query.cancelled) return reject(query.cancelled);\n                  reject(error);\n                });\n              }), delay);\n            }));\n          }\n        }, function (_result4) {\n          if (_exit2) return _result4;\n          throw error;\n        });\n      });\n    });\n\n    query.fetch = _async(function (_temp6) {\n      var _ref7 = _temp6 === void 0 ? {} : _temp6,\n          force = _ref7.force,\n          _ref7$__queryFn = _ref7.__queryFn,\n          __queryFn = _ref7$__queryFn === void 0 ? query.queryFn : _ref7$__queryFn; // Don't refetch fresh queries that don't have a queryHash\n\n\n      if (!query.queryHash || !query.state.isStale && !force) {\n        return;\n      } // Create a new promise for the query cache if necessary\n\n\n      if (!query.promise) {\n        query.promise = _async(function () {\n          // If there are any retries pending for this query, kill them\n          query.cancelled = null;\n          var callbackInstances = [].concat(query.instances);\n\n          if (query.wasSuspended) {\n            callbackInstances.unshift(query.suspenseInstance);\n          }\n\n          return _catch(function () {\n            // Set up the query refreshing state\n            dispatch({\n              type: actionFetch\n            }); // Try to fetch\n\n            return _await(tryFetchData.apply(void 0, [__queryFn].concat(query.queryKey, query.queryVariables)), function (data) {\n              query.setData(function (old) {\n                return query.config.isDataEqual(old, data) ? old : data;\n              });\n              callbackInstances.forEach(function (instance) {\n                return instance.onSuccess && instance.onSuccess(query.state.data);\n              });\n              callbackInstances.forEach(function (instance) {\n                return instance.onSettled && instance.onSettled(query.state.data, null);\n              });\n              delete query.promise;\n              return data;\n            });\n          }, function (error) {\n            dispatch({\n              type: actionError,\n              cancelled: error === query.cancelled,\n              error: error\n            });\n            delete query.promise;\n\n            if (error !== query.cancelled) {\n              callbackInstances.forEach(function (instance) {\n                return instance.onError && instance.onError(error);\n              });\n              callbackInstances.forEach(function (instance) {\n                return instance.onSettled && instance.onSettled(undefined, error);\n              });\n              throw error;\n            }\n          });\n        })();\n      }\n\n      return query.promise;\n    });\n\n    query.setState = function (updater) {\n      return dispatch({\n        type: actionSetState,\n        updater: updater\n      });\n    };\n\n    query.setData = function (updater) {\n      // Set data and mark it as cached\n      dispatch({\n        type: actionSuccess,\n        updater: updater\n      }); // Schedule a fresh invalidation!\n\n      clearTimeout(query.staleTimeout);\n      query.scheduleStaleTimeout();\n    };\n\n    query.clear = function () {\n      clearTimeout(query.staleTimeout);\n      clearTimeout(query.cacheTimeout);\n      query.cancel();\n    };\n\n    return query;\n  }\n\n  return cache;\n}\n\nfunction defaultQueryReducer(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching: action.hasInitialData || action.manual ? false : action.initialStatus === 'loading',\n        canFetchMore: false,\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0\n      };\n\n    case actionFailed:\n      return _extends({}, state, {\n        failureCount: state.failureCount + 1\n      });\n\n    case actionMarkStale:\n      return _extends({}, state, {\n        isStale: true\n      });\n\n    case actionMarkGC:\n      {\n        return _extends({}, state, {\n          markedForGarbageCollection: true\n        });\n      }\n\n    case actionFetch:\n      return _extends({}, state, {\n        status: state.status === statusError ? statusLoading : state.status,\n        isFetching: true,\n        failureCount: 0\n      });\n\n    case actionSuccess:\n      return _extends({}, state, {\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        canFetchMore: action.canFetchMore,\n        updatedAt: Date.now(),\n        failureCount: 0\n      });\n\n    case actionError:\n      return _extends({}, state, {\n        isFetching: false,\n        isStale: true\n      }, !action.cancelled && {\n        status: statusError,\n        error: action.error\n      });\n\n    case actionSetState:\n      return functionalUpdate(action.updater, state);\n\n    default:\n      throw new Error();\n  }\n}\n\nvar visibilityChangeEvent = 'visibilitychange';\nvar focusEvent = 'focus';\n\nvar onWindowFocus = function onWindowFocus() {\n  var refetchAllOnWindowFocus = defaultConfigRef.current.refetchAllOnWindowFocus;\n\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(function (queryCache) {\n      return queryCache.refetchQueries(function (query) {\n        if (!query.instances.length) {\n          return false;\n        }\n\n        if (query.config.manual === true) {\n          return false;\n        }\n\n        if (query.shouldContinueRetryOnFocus) {\n          // delete promise, so `fetch` will create new one\n          delete query.promise;\n          return true;\n        }\n\n        if (typeof query.config.refetchOnWindowFocus === 'undefined') {\n          return refetchAllOnWindowFocus;\n        } else {\n          return query.config.refetchOnWindowFocus;\n        }\n      }).catch(Console.error);\n    });\n  }\n};\n\nvar removePreviousHandler;\n\nfunction setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler();\n  } // Sub the new watcher\n\n\n  removePreviousHandler = callback(onWindowFocus);\n}\n\nsetFocusHandler(function (handleFocus) {\n  var _window; // Listen to visibillitychange and focus\n\n\n  if (!isServer && ((_window = window) == null ? void 0 : _window.addEventListener)) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false);\n    window.addEventListener(focusEvent, handleFocus, false);\n    return function () {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus);\n      window.removeEventListener(focusEvent, handleFocus);\n    };\n  }\n});\n\nfunction useIsFetching() {\n  var queryCache = useQueryCache();\n\n  var _React$useState = React.useState({}),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  React.useEffect(function () {\n    return queryCache.subscribe(function () {\n      return setState({});\n    });\n  }, []);\n  return React.useMemo(function () {\n    return state && queryCache.isFetching;\n  }, [state]);\n}\n\nfunction _await$1(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\n\nvar getDefaultState = function getDefaultState() {\n  return {\n    status: statusIdle,\n    data: undefined,\n    error: null\n  };\n};\n\nfunction _empty() {}\n\nvar actionReset = {};\n\nfunction _awaitIgnored(value, direct) {\n  if (!direct) {\n    return value && value.then ? value.then(_empty) : Promise.resolve();\n  }\n}\n\nvar actionLoading = {};\n\nfunction _invoke$1(body, then) {\n  var result = body();\n\n  if (result && result.then) {\n    return result.then(then);\n  }\n\n  return then(result);\n}\n\nvar actionResolve = {};\n\nfunction _catch$1(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n}\n\nvar actionReject = {};\n\nfunction _async$1(f) {\n  return function () {\n    for (var args = [], i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    try {\n      return Promise.resolve(f.apply(this, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState();\n  }\n\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading\n    };\n  }\n\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data\n    };\n  }\n\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error\n    };\n  }\n\n  throw new Error();\n}\n\nfunction useMutation(mutationFn, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _React$useReducer = React.useReducer(mutationReducer, null, getDefaultState),\n      state = _React$useReducer[0],\n      unsafeDispatch = _React$useReducer[1];\n\n  var dispatch = useMountedCallback(unsafeDispatch);\n  var getMutationFn = useGetLatest(mutationFn);\n  var getConfig = useGetLatest(_extends({}, useConfigContext(), config));\n  var latestMutationRef = React.useRef();\n  var mutate = React.useCallback(_async$1(function (variables, _temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        _ref$onSuccess = _ref.onSuccess,\n        onSuccess = _ref$onSuccess === void 0 ? noop : _ref$onSuccess,\n        _ref$onError = _ref.onError,\n        onError = _ref$onError === void 0 ? noop : _ref$onError,\n        _ref$onSettled = _ref.onSettled,\n        onSettled = _ref$onSettled === void 0 ? noop : _ref$onSettled,\n        throwOnError = _ref.throwOnError;\n\n    var config = getConfig();\n    var mutationId = uid();\n    latestMutationRef.current = mutationId;\n\n    var isLatest = function isLatest() {\n      return latestMutationRef.current === mutationId;\n    };\n\n    dispatch({\n      type: actionLoading\n    });\n    var snapshotValue;\n    return _catch$1(function () {\n      return _await$1(config.onMutate(variables), function (_config$onMutate) {\n        snapshotValue = _config$onMutate;\n        var data;\n        return _invoke$1(function () {\n          if (isLatest()) {\n            return _await$1(getMutationFn()(variables), function (_getMutationFn) {\n              data = _getMutationFn;\n            });\n          }\n        }, function () {\n          return _invoke$1(function () {\n            if (isLatest()) {\n              return _awaitIgnored(onSuccess(data, variables));\n            }\n          }, function () {\n            return _invoke$1(function () {\n              if (isLatest()) {\n                return _awaitIgnored(config.onSuccess(data, variables));\n              }\n            }, function () {\n              return _invoke$1(function () {\n                if (isLatest()) {\n                  return _awaitIgnored(onSettled(data, null, variables));\n                }\n              }, function () {\n                return _invoke$1(function () {\n                  if (isLatest()) {\n                    return _awaitIgnored(config.onSettled(data, null, variables));\n                  }\n                }, function () {\n                  if (isLatest()) {\n                    dispatch({\n                      type: actionResolve,\n                      data: data\n                    });\n                  }\n\n                  return data;\n                });\n              });\n            });\n          });\n        });\n      });\n    }, function (error) {\n      return _invoke$1(function () {\n        if (isLatest()) {\n          Console.error(error);\n          return _awaitIgnored(onError(error, variables, snapshotValue));\n        }\n      }, function () {\n        return _invoke$1(function () {\n          if (isLatest()) {\n            return _awaitIgnored(config.onError(error, variables, snapshotValue));\n          }\n        }, function () {\n          return _invoke$1(function () {\n            if (isLatest()) {\n              return _awaitIgnored(onSettled(undefined, error, variables, snapshotValue));\n            }\n          }, function () {\n            return _invoke$1(function () {\n              if (isLatest()) {\n                return _awaitIgnored(config.onSettled(undefined, error, variables, snapshotValue));\n              }\n            }, function () {\n              if (isLatest()) {\n                dispatch({\n                  type: actionReject,\n                  error: error\n                });\n\n                if (throwOnError != null ? throwOnError : config.throwOnError) {\n                  throw error;\n                }\n              }\n            });\n          });\n        });\n      });\n    });\n  }), [dispatch, getConfig, getMutationFn]);\n  var reset = React.useCallback(function () {\n    return dispatch({\n      type: actionReset\n    });\n  }, [dispatch]);\n  React.useEffect(function () {\n    if (getConfig().useErrorBoundary && state.error) {\n      throw state.error;\n    }\n  }, [getConfig, state.error]);\n  return [mutate, _extends({}, state, {\n    reset: reset\n  })];\n}\n\nfunction _await$2(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\n\nfunction _catch$2(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n}\n\nfunction _async$2(f) {\n  return function () {\n    for (var args = [], i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    try {\n      return Promise.resolve(f.apply(this, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n}\n\nfunction useBaseQuery(queryKey, queryVariables, queryFn, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var instanceId = useUid();\n  config = _extends({}, useConfigContext(), config);\n  var queryCache = useQueryCache();\n  var queryRef = React.useRef();\n\n  var newQuery = queryCache._buildQuery(queryKey, queryVariables, queryFn, config);\n\n  var useCachedQuery = queryRef.current && typeof queryRef.current.queryHash === 'undefined' && typeof newQuery.queryHash === 'undefined'; // Do not use new query with undefined queryHash, if previous query also had undefined queryHash.\n  // Otherwise this will cause infinite loop.\n\n  if (!useCachedQuery) {\n    queryRef.current = newQuery;\n  }\n\n  var query = queryRef.current;\n\n  var _React$useState = React.useState(),\n      unsafeRerender = _React$useState[1];\n\n  var rerender = useMountedCallback(unsafeRerender);\n  var getLatestConfig = useGetLatest(config);\n  var refetch = React.useCallback(_async$2(function (_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n        throwOnError = _ref.throwOnError,\n        rest = _objectWithoutPropertiesLoose(_ref, [\"throwOnError\"]);\n\n    return _catch$2(function () {\n      return _await$2(query.fetch(rest));\n    }, function (err) {\n      if (throwOnError) {\n        throw err;\n      }\n    });\n  }), [query]);\n  query.suspenseInstance = {\n    onSuccess: function onSuccess(data) {\n      return getLatestConfig().onSuccess(data);\n    },\n    onError: function onError(err) {\n      return getLatestConfig().onError(err);\n    },\n    onSettled: function onSettled(data, err) {\n      return getLatestConfig().onSettled(data, err);\n    }\n  }; // After mount, subscribe to the query\n\n  React.useEffect(function () {\n    // Update the instance to the query again, but not as a placeholder\n    query.updateInstance({\n      id: instanceId,\n      onStateUpdate: function onStateUpdate() {\n        return rerender({});\n      },\n      onSuccess: function onSuccess(data) {\n        return getLatestConfig().onSuccess(data);\n      },\n      onError: function onError(err) {\n        return getLatestConfig().onError(err);\n      },\n      onSettled: function onSettled(data, err) {\n        return getLatestConfig().onSettled(data, err);\n      }\n    });\n    return query.subscribe(instanceId);\n  }, [getLatestConfig, instanceId, query, rerender]);\n  React.useEffect(function () {\n    // Perform the initial fetch for this query if necessary\n    if (!getLatestConfig().manual && // Don't auto fetch if config is set to manual query\n    !query.wasPrefetched && // Don't double fetch for prefetched queries\n    !query.wasSuspended && // Don't double fetch for suspense\n    query.state.isStale && ( // Only refetch if stale\n    getLatestConfig().refetchOnMount || query.instances.length === 1)) {\n      refetch().catch(Console.error);\n    }\n\n    query.wasPrefetched = false;\n    query.wasSuspended = false;\n  }, [getLatestConfig, query, refetch]); // Handle refetch interval\n\n  React.useEffect(function () {\n    var query = queryRef.current;\n\n    if (config.refetchInterval && (!query.currentRefetchInterval || // shorter interval should override previous one\n    config.refetchInterval < query.currentRefetchInterval)) {\n      query.currentRefetchInterval = config.refetchInterval;\n      clearInterval(query.refetchIntervalId);\n      query.refetchIntervalId = setInterval(function () {\n        if (isDocumentVisible() || config.refetchIntervalInBackground) {\n          refetch().catch(Console.error);\n        }\n      }, config.refetchInterval);\n      return function () {\n        clearInterval(query.refetchIntervalId);\n        delete query.refetchIntervalId;\n        delete query.currentRefetchInterval;\n      };\n    }\n  }, [config.refetchInterval, config.refetchIntervalInBackground, refetch]);\n  return _extends({}, query.state, {\n    config: config,\n    query: query,\n    refetch: refetch\n  });\n}\n\nfunction useQuery() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var query = useBaseQuery.apply(void 0, getQueryArgs(args));\n  handleSuspense(query);\n  return query;\n}\n\nfunction usePaginatedQuery() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var _getQueryArgs = getQueryArgs(args),\n      queryKey = _getQueryArgs[0],\n      queryVariables = _getQueryArgs[1],\n      queryFn = _getQueryArgs[2],\n      _getQueryArgs$ = _getQueryArgs[3],\n      config = _getQueryArgs$ === void 0 ? {} : _getQueryArgs$;\n\n  var lastDataRef = React.useRef();\n\n  if (!queryKey) {\n    lastDataRef.current = undefined;\n  } // If latestData is set, don't use initialData\n\n\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData;\n  }\n\n  var query = useBaseQuery(queryKey, queryVariables, queryFn, config);\n  var latestData = query.data,\n      status = query.status;\n  React.useEffect(function () {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData;\n    }\n  }, [latestData, status]);\n  var resolvedData = latestData;\n\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current;\n  }\n\n  if (typeof resolvedData !== 'undefined') {\n    status = 'success';\n  }\n\n  var paginatedQuery = _extends({}, query, {\n    resolvedData: resolvedData,\n    latestData: latestData,\n    status: status\n  });\n\n  handleSuspense(paginatedQuery);\n  return paginatedQuery;\n}\n\nfunction _await$3(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\n\nfunction _empty$1() {}\n\nfunction _invokeIgnored(body) {\n  var result = body();\n\n  if (result && result.then) {\n    return result.then(_empty$1);\n  }\n}\n\nfunction _settle(pact, state, value) {\n  if (!pact.s) {\n    if (value instanceof _Pact) {\n      if (value.s) {\n        if (state & 1) {\n          state = value.s;\n        }\n\n        value = value.v;\n      } else {\n        value.o = _settle.bind(null, pact, state);\n        return;\n      }\n    }\n\n    if (value && value.then) {\n      value.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n      return;\n    }\n\n    pact.s = state;\n    pact.v = value;\n    var observer = pact.o;\n\n    if (observer) {\n      observer(pact);\n    }\n  }\n}\n\nvar _Pact = /*#__PURE__*/function () {\n  function _Pact() {}\n\n  _Pact.prototype.then = function (onFulfilled, onRejected) {\n    var result = new _Pact();\n    var state = this.s;\n\n    if (state) {\n      var callback = state & 1 ? onFulfilled : onRejected;\n\n      if (callback) {\n        try {\n          _settle(result, 1, callback(this.v));\n        } catch (e) {\n          _settle(result, 2, e);\n        }\n\n        return result;\n      } else {\n        return this;\n      }\n    }\n\n    this.o = function (_this) {\n      try {\n        var value = _this.v;\n\n        if (_this.s & 1) {\n          _settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n        } else if (onRejected) {\n          _settle(result, 1, onRejected(value));\n        } else {\n          _settle(result, 2, value);\n        }\n      } catch (e) {\n        _settle(result, 2, e);\n      }\n    };\n\n    return result;\n  };\n\n  return _Pact;\n}();\n\nfunction _isSettledPact(thenable) {\n  return thenable instanceof _Pact && thenable.s & 1;\n}\n\nfunction _do(body, test) {\n  var awaitBody;\n\n  do {\n    var result = body();\n\n    if (result && result.then) {\n      if (_isSettledPact(result)) {\n        result = result.v;\n      } else {\n        awaitBody = true;\n        break;\n      }\n    }\n\n    var shouldContinue = test();\n\n    if (_isSettledPact(shouldContinue)) {\n      shouldContinue = shouldContinue.v;\n    }\n\n    if (!shouldContinue) {\n      return result;\n    }\n  } while (!shouldContinue.then);\n\n  var pact = new _Pact();\n\n  var reject = _settle.bind(null, pact, 2);\n\n  (awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n  return pact;\n\n  function _resumeAfterBody(value) {\n    result = value;\n\n    for (;;) {\n      shouldContinue = test();\n\n      if (_isSettledPact(shouldContinue)) {\n        shouldContinue = shouldContinue.v;\n      }\n\n      if (!shouldContinue) {\n        break;\n      }\n\n      if (shouldContinue.then) {\n        shouldContinue.then(_resumeAfterTest).then(void 0, reject);\n        return;\n      }\n\n      result = body();\n\n      if (result && result.then) {\n        if (_isSettledPact(result)) {\n          result = result.v;\n        } else {\n          result.then(_resumeAfterBody).then(void 0, reject);\n          return;\n        }\n      }\n    }\n\n    _settle(pact, 1, result);\n  }\n\n  function _resumeAfterTest(shouldContinue) {\n    if (shouldContinue) {\n      do {\n        result = body();\n\n        if (result && result.then) {\n          if (_isSettledPact(result)) {\n            result = result.v;\n          } else {\n            result.then(_resumeAfterBody).then(void 0, reject);\n            return;\n          }\n        }\n\n        shouldContinue = test();\n\n        if (_isSettledPact(shouldContinue)) {\n          shouldContinue = shouldContinue.v;\n        }\n\n        if (!shouldContinue) {\n          _settle(pact, 1, result);\n\n          return;\n        }\n      } while (!shouldContinue.then);\n\n      shouldContinue.then(_resumeAfterTest).then(void 0, reject);\n    } else {\n      _settle(pact, 1, result);\n    }\n  }\n}\n\nfunction _continue(value, then) {\n  return value && value.then ? value.then(then) : then(value);\n}\n\nfunction _async$3(f) {\n  return function () {\n    for (var args = [], i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    try {\n      return Promise.resolve(f.apply(this, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n}\n\nfunction _rethrow(thrown, value) {\n  if (thrown) throw value;\n  return value;\n}\n\nfunction _finallyRethrows(body, finalizer) {\n  try {\n    var result = body();\n  } catch (e) {\n    return finalizer(true, e);\n  }\n\n  if (result && result.then) {\n    return result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n  }\n\n  return finalizer(false, result);\n}\n\nfunction useInfiniteQuery() {\n  var queryInfoRef = React.useRef();\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var _getQueryArgs = getQueryArgs(args),\n      queryKey = _getQueryArgs[0],\n      queryVariables = _getQueryArgs[1],\n      queryFn = _getQueryArgs[2],\n      _getQueryArgs$ = _getQueryArgs[3],\n      config = _getQueryArgs$ === void 0 ? {} : _getQueryArgs$;\n\n  var getFetchMore = config.getFetchMore;\n  var getGetFetchMore = useGetLatest(getFetchMore); // The default queryFn will query all pages and map them together\n\n  var originalQueryFn = queryFn;\n  queryFn = _async$3(function () {\n    var _interrupt = false;\n    var data = [];\n    var pageVariables = [].concat(queryInfoRef.current.query.pageVariables);\n    var rebuiltPageVariables = [];\n    return _continue(_do(function () {\n      var args = pageVariables.shift();\n      return _invokeIgnored(function () {\n        if (!data.length) {\n          var _push3 = data.push; // the first page query doesn't need to be rebuilt\n\n          return _await$3(originalQueryFn.apply(void 0, args), function (_originalQueryFn) {\n            _push3.call(data, _originalQueryFn);\n\n            rebuiltPageVariables.push(args);\n          });\n        } else {\n          // get an up-to-date cursor based on the previous data set\n          var nextCursor = getGetFetchMore()(data[data.length - 1], data); // break early if there's no next cursor\n          // otherwise we'll start from the beginning\n          // which will cause unwanted duplication\n\n          if (!nextCursor) {\n            _interrupt = true;\n            return;\n          }\n\n          var pageArgs = [].concat(args.slice(0, -1), [nextCursor]);\n          var _push4 = data.push;\n          return _await$3(originalQueryFn.apply(void 0, pageArgs), function (_originalQueryFn2) {\n            _push4.call(data, _originalQueryFn2);\n\n            rebuiltPageVariables.push(pageArgs);\n          });\n        }\n      });\n    }, function () {\n      return !_interrupt && !!pageVariables.length;\n    }), function () {\n      queryInfoRef.current.query.canFetchMore = getGetFetchMore()(data[data.length - 1], data);\n      queryInfoRef.current.query.pageVariables = rebuiltPageVariables;\n      return data;\n    });\n  });\n  var queryInfo = useBaseQuery(queryKey, queryVariables, queryFn, config);\n\n  if (typeof queryInfo.query.canFetchMore === 'undefined' && typeof queryInfo.data !== 'undefined') {\n    queryInfo.query.canFetchMore = getGetFetchMore()(queryInfo.data[queryInfo.data.length - 1], queryInfo.data);\n  }\n\n  queryInfoRef.current = queryInfo;\n  var refetch = queryInfo.refetch,\n      _queryInfo$data = queryInfo.data,\n      data = _queryInfo$data === void 0 ? [] : _queryInfo$data,\n      canFetchMore = queryInfo.query.canFetchMore; // Here we seed the pageVariabes for the query\n\n  if (!queryInfo.query.pageVariables) {\n    queryInfo.query.pageVariables = [[].concat(queryInfo.query.queryKey, queryInfo.query.queryVariables)];\n  }\n\n  var fetchMore = React.useCallback(function (fetchMoreInfo) {\n    if (fetchMoreInfo === void 0) {\n      fetchMoreInfo = queryInfoRef.current.query.canFetchMore;\n    }\n\n    return queryInfoRef.current.query.canFetchMore ? refetch({\n      force: true,\n      __queryFn: _async$3(function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n\n        return _finallyRethrows(function () {\n          queryInfoRef.current.query.setState(function (old) {\n            return _extends({}, old, {\n              isFetchingMore: true\n            });\n          });\n          var newArgs = [].concat(args, [fetchMoreInfo]);\n          queryInfoRef.current.query.pageVariables.push(newArgs);\n          var _queryInfoRef$current = queryInfoRef.current.data;\n          return _await$3(originalQueryFn.apply(void 0, newArgs), function (_originalQueryFn3) {\n            var data = [].concat(_queryInfoRef$current, [_originalQueryFn3]);\n            queryInfoRef.current.query.canFetchMore = getGetFetchMore()(data[data.length - 1], data);\n            return data;\n          });\n        }, function (_wasThrown, _result) {\n          queryInfoRef.current.query.setState(function (old) {\n            return _extends({}, old, {\n              isFetchingMore: false\n            });\n          });\n          return _rethrow(_wasThrown, _result);\n        });\n      })\n    }) : void 0;\n  }, [getGetFetchMore, originalQueryFn, refetch]);\n  handleSuspense(queryInfo);\n  return _extends({}, queryInfo, {\n    data: data,\n    canFetchMore: canFetchMore,\n    fetchMore: fetchMore\n  });\n}\n\nexport { ReactQueryCacheProvider, ReactQueryConfigProvider, deepIncludes, makeQueryCache, queryCache, setConsole, setFocusHandler, stableStringify, statusError, statusIdle, statusLoading, statusSuccess, useInfiniteQuery, useIsFetching, useMutation, usePaginatedQuery, useQuery, useQueryCache };","map":{"version":3,"sources":["../src/utils.js","../src/config.js","../src/queryCache.js","../src/setFocusHandler.js","../src/useIsFetching.js","../src/useMutation.js","../src/useBaseQuery.js","../src/useQuery.js","../src/usePaginatedQuery.js","../src/useInfiniteQuery.js"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","noop","identity","Console","console","error","warn","log","ref","React","updater","Object","value","JSON","a","Array","deepIncludes","b","document","navigator","isObject","args","queryKey","variables","queryFn","config","mounted","callback","queryInfo","setTimeout","length","i","deepEqual","keys","key","configContext","DEFAULTS","retry","retryDelay","Math","staleTime","cacheTime","refetchAllOnWindowFocus","refetchInterval","suspense","queryKeySerializerFn","queryFnParamsFilter","throwOnError","useErrorBoundary","onMutate","onSuccess","onError","onSettled","refetchOnMount","isDataEqual","defaultConfigRef","current","children","configContextValue","newConfig","defaultQueryKeySerializerFn","queryHash","stableStringify","queryCache","makeQueryCache","queryCacheContext","queryCaches","cache","actionInit","actionFailed","actionMarkStale","actionMarkGC","actionFetch","actionSuccess","actionError","actionSetState","listeners","queries","isFetching","notifyGlobalListeners","query","state","arguments","acc","d","Promise","f","then","findQueries","exact","predicate","foundQueries","clearTimeout","force","queryVariables","makeQuery","getQueryArgs","options","reducer","noQueryHash","initialData","hasInitialData","isStale","manual","initialStatus","instances","type","dispatch","found","instance","onStateUpdate","tryFetchData","promise","isDocumentVisible","delay","functionalUpdate","reject","resolve","__queryFn","callbackInstances","cancelled","action","status","canFetchMore","failureCount","markedForGarbageCollection","result","data","updatedAt","Date","body","recover","visibilityChangeEvent","focusEvent","onWindowFocus","isOnline","removePreviousHandler","setFocusHandler","window","useQueryCache","setState","getDefaultState","actionReset","actionLoading","actionResolve","actionReject","unsafeDispatch","useMountedCallback","getMutationFn","useGetLatest","getConfig","useConfigContext","latestMutationRef","mutate","mutationId","isLatest","snapshotValue","reset","instanceId","useUid","queryRef","newQuery","useCachedQuery","unsafeRerender","rerender","getLatestConfig","refetch","rest","useEffect","id","clearInterval","setInterval","useBaseQuery","handleSuspense","lastDataRef","latestData","resolvedData","paginatedQuery","queryInfoRef","getFetchMore","getGetFetchMore","originalQueryFn","pageVariables","rebuiltPageVariables","_this","onFulfilled","onRejected","nextCursor","pact","pageArgs","s","observer","thenable","fetchMore","fetchMoreInfo","isFetchingMore","newArgs","awaitBody","shouldContinue","test","finalizer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIaA,UAAU,GAAG,M;IACbC,aAAa,GAAG,S;IAChBC,WAAW,GAAG,O;IACdC,aAAa,GAAG,S;AAE7B,IAAIC,IAAI,GAAR,CAAA;;AACO,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAA;AAAA,SAAMD,IAAN,EAAA;AAAZ,CAAA;;AACA,IAAME,cAAc,GAApB,EAAA;AAEA,IAAMC,QAAQ,GAAG,OAAA,MAAA,KAAjB,WAAA;;AACA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAnB,CAAA;;AACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAA,CAAA,EAAC;AAAA,SAAA,CAAA;AAAlB,CAAA;;AACA,IAAIC,OAAO,GAAGC,OAAO,IAAI;AAAEC,EAAAA,KAAK,EAAP,IAAA;AAAeC,EAAAA,IAAI,EAAnB,IAAA;AAA2BC,EAAAA,GAAG,EAAEN;AAAhC,CAAzB;;AAEA,SAAA,MAAA,GAAkB;AACvB,MAAMO,GAAG,GAAGC,KAAK,CAALA,MAAAA,CAAZ,IAAYA,CAAZ;;AAEA,MAAID,GAAG,CAAHA,OAAAA,KAAJ,IAAA,EAA0B;AACxBA,IAAAA,GAAG,CAAHA,OAAAA,GAAcV,GAAdU,EAAAA;AACD;;AAED,SAAOA,GAAG,CAAV,OAAA;AACD;;AAEM,SAAA,UAAA,CAAA,CAAA,EAAuB;AAC5BL,EAAAA,OAAO,GAAPA,CAAAA;AACD;;AAEM,SAAA,YAAA,CAAA,GAAA,EAA2B;AAChC,MAAMK,GAAG,GAAGC,KAAK,CAAjB,MAAYA,EAAZ;AACAD,EAAAA,GAAG,CAAHA,OAAAA,GAAAA,GAAAA;AAEA,SAAO,KAAK,CAAL,WAAA,CAAkB,YAAA;AAAA,WAAMA,GAAG,CAAT,OAAA;AAAlB,GAAA,EAAP,EAAO,CAAP;AACD;;AAEM,SAAA,gBAAA,CAAA,OAAA,EAAA,GAAA,EAAwC;AAC7C,SAAO,OAAA,OAAA,KAAA,UAAA,GAAgCE,OAAO,CAAvC,GAAuC,CAAvC,GAAP,OAAA;AACD;;AAEM,SAAA,uBAAA,CAAA,CAAA,EAAA,KAAA,EAA2C;AAChD,SAAO,QAAQ,CAAR,KAAQ,CAAR,GACHC,MAAM,CAANA,MAAAA,CAAAA,KAAAA,CAAAA,MAAAA,EAAM,CAAA,EAAA,EAAA,MAAA,CAED,MAAM,CAAN,IAAA,CAAA,KAAA,EAAA,IAAA,GAAA,GAAA,CAEI,UAAA,GAAA,EAAG;AAAA,QAAA,IAAA;;AAAA,WAAA,IAAA,GAAA,EAAA,EAAA,IAAA,CAAA,GAAA,CAAA,GACCC,KAAK,CADN,GACM,CADN,EAAA,IAAA;AALT,GAGE,CAFC,CAAND,CADG,GAAP,KAAA;AAUD;;AAEM,SAAA,eAAA,CAAA,GAAA,EAA8B;AACnC,SAAOE,IAAI,CAAJA,SAAAA,CAAAA,GAAAA,EAAP,uBAAOA,CAAP;AACD;;AAEM,SAAA,QAAA,CAAA,CAAA,EAAqB;AAC1B,SAAOC,CAAC,IAAI,OAAA,CAAA,KAALA,QAAAA,IAA8B,CAACC,KAAK,CAALA,OAAAA,CAAtC,CAAsCA,CAAtC;AACD;;AAEM,SAAA,YAAA,CAAA,CAAA,EAAA,CAAA,EAA4B;AACjC,MAAID,CAAC,KAAL,CAAA,EAAa;AACX,WAAA,IAAA;AACD;;AAED,MAAI,OAAA,CAAA,KAAa,OAAjB,CAAA,EAA2B;AACzB,WAAA,KAAA;AACD;;AAED,MAAI,OAAA,CAAA,KAAJ,QAAA,EAA2B;AACzB,WAAO,CAAC,MAAM,CAAN,IAAA,CAAA,CAAA,EAAA,IAAA,CAAoB,UAAA,GAAA,EAAG;AAAA,aAAI,CAACE,YAAY,CAACF,CAAC,CAAF,GAAE,CAAF,EAASG,CAAC,CAA3B,GAA2B,CAAV,CAAjB;AAA/B,KAAQ,CAAR;AACD;;AAED,SAAA,KAAA;AACD;;AAEM,SAAA,iBAAA,GAA6B;AAClC,SACE,OAAA,QAAA,KAAA,WAAA,IACAC,QAAQ,CAARA,eAAAA,KADA,SAAA,IAEAA,QAAQ,CAARA,eAAAA,KAFA,SAAA,IAGAA,QAAQ,CAARA,eAAAA,KAJF,WAAA;AAMD;;AAEM,SAAA,QAAA,GAAoB;AACzB,SAAOC,SAAS,CAATA,MAAAA,KAAAA,SAAAA,IAAkCA,SAAS,CAAlD,MAAA;AACD;;AAEM,SAAA,YAAA,CAAA,IAAA,EAA4B;AACjC,MAAIC,QAAQ,CAACC,IAAI,CAAjB,CAAiB,CAAL,CAAZ,EAAuB;AACrB,QACEA,IAAI,CAAJA,CAAI,CAAJA,CAAAA,cAAAA,CAAAA,UAAAA,KACAA,IAAI,CAAJA,CAAI,CAAJA,CAAAA,cAAAA,CAFF,SAEEA,CAFF,EAGE;AAAA,UAAA,MAAA,GAC2DA,IAAI,CAD/D,CAC+D,CAD/D;AAAA,UACQC,SADR,GAAA,MAAA,CAAA,QAAA;AAAA,UAAA,gBAAA,GAAA,MAAA,CAAA,SAAA;AAAA,UACkBC,SADlB,GAAA,gBAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,gBAAA;AAAA,UACkCC,QADlC,GAAA,MAAA,CAAA,OAAA;AAAA,UAAA,aAAA,GAAA,MAAA,CAAA,MAAA;AAAA,UAC2CC,OAD3C,GAAA,aAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,aAAA;;AAEA,aAAO,CAAA,SAAA,EAAA,SAAA,EAAA,QAAA,EAAP,OAAO,CAAP;AALF,KAAA,MAMO;AACL,YAAM,IAAA,KAAA,CAAN,yCAAM,CAAN;AACD;AACF;;AAED,MAAI,OAAOJ,IAAI,CAAX,CAAW,CAAX,KAAJ,UAAA,EAAmC;AAAA,QAC1BC,UAD0B,GACwBD,IADxB,CAAA,CAAA,CAAA;AAAA,QAAA,OAAA,GACwBA,IADxB,CAAA,CAAA,CAAA;AAAA,QAChBE,UADgB,GAAA,OAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,OAAA;AAAA,QACAC,SADA,GACwBH,IADxB,CAAA,CAAA,CAAA;AAAA,QAAA,OAAA,GACwBA,IADxB,CAAA,CAAA,CAAA;AAAA,QACSI,QADT,GAAA,OAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,OAAA;;AAEjC,WAAO,CAAA,UAAA,EAAA,UAAA,EAAA,SAAA,EAAP,QAAO,CAAP;AACD;;AAhBgC,MAkB1BH,QAlB0B,GAkBQD,IAlBR,CAAA,CAAA,CAAA;AAAA,MAkBhBG,OAlBgB,GAkBQH,IAlBR,CAAA,CAAA,CAAA;AAAA,MAAA,OAAA,GAkBQA,IAlBR,CAAA,CAAA,CAAA;AAAA,MAkBPI,MAlBO,GAAA,OAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,OAAA;AAoBjC,SAAO,CAAA,QAAA,EAAA,EAAA,EAAA,OAAA,EAAP,MAAO,CAAP;AACD;;AAEM,SAAA,kBAAA,CAAA,QAAA,EAAsC;AAC3C,MAAMC,OAAO,GAAGjB,KAAK,CAALA,MAAAA,CAAhB,KAAgBA,CAAhB;AACAA,EAAAA,KAAK,CAACT,QAAQ,GAAA,WAAA,GAAdS,iBAAK,CAALA,CAAkD,YAAM;AACtDiB,IAAAA,OAAO,CAAPA,OAAAA,GAAAA,IAAAA;AACA,WAAO,YAAA;AAAA,aAAOA,OAAO,CAAPA,OAAAA,GAAP,KAAA;AAAP,KAAA;AAFFjB,GAAAA,EAAAA,EAAAA;AAIA,SAAO,KAAK,CAAL,WAAA,CACL,YAAA;AAAA,WAAciB,OAAO,CAAPA,OAAAA,GAAkBC,QAAQ,CAARA,KAAAA,CAAAA,KAAAA,CAAAA,EAAlBD,SAAkBC,CAAlBD,GAAsC,KAApD,CAAA;AADK,GAAA,EAEL,CAFF,QAEE,CAFK,CAAP;AAID;;AAEM,SAAA,cAAA,CAAA,SAAA,EAAmC;AACxC,MAAIE,SAAS,CAATA,MAAAA,CAAAA,QAAAA,IAA6BA,SAAS,CAATA,MAAAA,CAAjC,gBAAA,EAAoE;AAClE,QAAIA,SAAS,CAATA,MAAAA,KAAJ,WAAA,EAAsC;AACpCC,MAAAA,UAAU,CAAC,YAAM;AACfD,QAAAA,SAAS,CAATA,KAAAA,CAAAA,KAAAA,CAAAA,MAAAA,GAAAA,SAAAA;AADFC,OAAU,CAAVA;AAGA,YAAMD,SAAS,CAAf,KAAA;AACD;AACF;;AAED,MAAIA,SAAS,CAATA,MAAAA,CAAJ,QAAA,EAA+B;AAC7B,QAAIA,SAAS,CAATA,MAAAA,KAAJ,aAAA,EAAwC;AACtCA,MAAAA,SAAS,CAATA,KAAAA,CAAAA,YAAAA,GAAAA,IAAAA;AACA,YAAMA,SAAS,CAAf,OAAMA,EAAN;AACD;AACF;AACF,C,CAAA;AAGD;;;AACO,SAAA,SAAA,CAAA,CAAA,EAAA,CAAA,EAAyB;AAC9B,MAAId,CAAC,KAAL,CAAA,EAAa,OAAA,IAAA;;AAEb,MAAIA,CAAC,IAADA,CAAAA,IAAU,OAAA,CAAA,IAAVA,QAAAA,IAAkC,OAAA,CAAA,IAAtC,QAAA,EAA4D;AAC1D,QAAA,MAAA,EAAA,CAAA,EAAA,IAAA;;AACA,QAAIC,KAAK,CAALA,OAAAA,CAAJ,CAAIA,CAAJ,EAAsB;AACpBe,MAAAA,MAAM,GAAGhB,CAAC,CADU,MACpBgB,CADoB,CAAA;;AAGpB,UAAIA,MAAM,IAAIb,CAAC,CAAf,MAAA,EAAwB,OAAA,KAAA;;AACxB,WAAKc,CAAC,GAAN,MAAA,EAAiBA,CAAC,OAAlB,CAAA,GAAA;AAA8B,YAAI,CAACC,SAAS,CAAClB,CAAC,CAAF,CAAE,CAAF,EAAOG,CAAC,CAAtB,CAAsB,CAAR,CAAd,EAA4B,OAAA,KAAA;AAA1D;;AACA,aAAA,IAAA;AACD;;AAED,QAAIH,CAAC,CAADA,OAAAA,KAAcH,MAAM,CAANA,SAAAA,CAAlB,OAAA,EACE,OAAOG,CAAC,CAADA,OAAAA,OAAgBG,CAAC,CAAxB,OAAuBA,EAAvB;AAEFgB,IAAAA,IAAI,GAAGtB,MAAM,CAANA,IAAAA,CAAPsB,CAAOtB,CAAPsB;AACAH,IAAAA,MAAM,GAAGG,IAAI,CAAbH,MAAAA;AACA,QAAIA,MAAM,KAAKnB,MAAM,CAANA,IAAAA,CAAAA,CAAAA,EAAf,MAAA,EAAsC,OAAA,KAAA;;AAEtC,SAAKoB,CAAC,GAAN,MAAA,EAAiBA,CAAC,OAAlB,CAAA,GAAA;AACE,UAAI,CAACpB,MAAM,CAANA,SAAAA,CAAAA,cAAAA,CAAAA,IAAAA,CAAAA,CAAAA,EAAwCsB,IAAI,CAAjD,CAAiD,CAA5CtB,CAAL,EAAuD,OAAA,KAAA;AADzD;;AAGA,SAAKoB,CAAC,GAAN,MAAA,EAAiBA,CAAC,OAAlB,CAAA,GAA8B;AAC5B,UAAIG,GAAG,GAAGD,IAAI,CAAd,CAAc,CAAd;AAEA,UAAI,CAACD,SAAS,CAAClB,CAAC,CAAF,GAAE,CAAF,EAASG,CAAC,CAAxB,GAAwB,CAAV,CAAd,EAAgC,OAAA,KAAA;AACjC;;AAED,WAAA,IAAA;AA7B4B,GAAA,CAAA;AAiC9B;;;AACA,SAAOH,CAAC,KAADA,CAAAA,IAAWG,CAAC,KAAnB,CAAA;AACD;;ACpLM,IAAMkB,aAAa,GAAG1B,KAAK,CAA3B,aAAsBA,EAAtB;AAEP,IAAM2B,QAAQ,GAAG;AACfC,EAAAA,KAAK,EADU,CAAA;AAEfC,EAAAA,UAAU,EAAE,SAAA,UAAA,CAAA,YAAA,EAAY;AAAA,WAAIC,IAAI,CAAJA,GAAAA,CAAS,OAAA,IAAA,CAAA,GAAA,CAAA,CAAA,EAATA,YAAS,CAATA,EAAJ,KAAIA,CAAJ;AAFT,GAAA;AAGfC,EAAAA,SAAS,EAHM,CAAA;AAIfC,EAAAA,SAAS,EAAE,IAAA,EAAA,GAJI,IAAA;AAKfC,EAAAA,uBAAuB,EALR,IAAA;AAMfC,EAAAA,eAAe,EANA,KAAA;AAOfC,EAAAA,QAAQ,EAPO,KAAA;AAQfC,EAAAA,oBAAoB,EARL,2BAAA;AASfC,EAAAA,mBAAmB,EATJ,QAAA;AAUfC,EAAAA,YAAY,EAVG,KAAA;AAWfC,EAAAA,gBAAgB,EAXD,SAAA;AAWc;AAC7BC,EAAAA,QAAQ,EAZO,IAAA;AAafC,EAAAA,SAAS,EAbM,IAAA;AAcfC,EAAAA,OAAO,EAdQ,IAAA;AAefC,EAAAA,SAAS,EAfM,IAAA;AAgBfC,EAAAA,cAAc,EAhBC,IAAA;AAiBfC,EAAAA,WAAW,EAAEtB;AAjBE,CAAjB;AAoBO,IAAMuB,gBAAgB,GAAG;AAC9BC,EAAAA,OAAO,EAAEpB;AADqB,CAAzB;;AAIA,SAAA,gBAAA,GAA4B;AACjC,SAAO3B,KAAK,CAALA,UAAAA,CAAAA,aAAAA,KAAmC8C,gBAAgB,CAA1D,OAAA;AACD;;AAEM,SAAA,wBAAA,CAAA,IAAA,EAAwD;AAAA,MAApB9B,MAAoB,GAAA,IAAA,CAApBA,MAAoB;AAAA,MAAZgC,QAAY,GAAA,IAAA,CAAZA,QAAY;AAC7D,MAAIC,kBAAkB,GAAGjD,KAAK,CAALA,UAAAA,CAAzB,aAAyBA,CAAzB;AAEA,MAAMkD,SAAS,GAAG,KAAK,CAAL,OAAA,CAAc,YAAM;AACpC,QAAMA,SAAS,GAAA,QAAA,CAAA,EAAA,EACTD,kBAAkB,IAAIH,gBAAgB,CAD7B,OAAA,EADqB,MACrB,CAAf,CADoC,CAAA;;;AAOpC,QAAI,OAAOI,SAAS,CAAhB,gBAAA,KAAJ,WAAA,EAAuD;AACrDA,MAAAA,SAAS,CAATA,gBAAAA,GAA6BA,SAAS,CAAtCA,QAAAA;AACD;;AAED,WAAA,SAAA;AAXgB,GAAA,EAYf,CAAA,MAAA,EAZH,kBAYG,CAZe,CAAlB;AAcAlD,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB;AACA,WAAO,YAAM;AACX8C,MAAAA,gBAAgB,CAAhBA,OAAAA,GAAAA,QAAAA,CAAAA,EAAAA,EAAiCG,kBAAkB,IADxC,QACXH,CAAAA,CADW,CAAA;;AAIX,UAAI,OAAOA,gBAAgB,CAAhBA,OAAAA,CAAP,gBAAA,KAAJ,WAAA,EAAsE;AACpEA,QAAAA,gBAAgB,CAAhBA,OAAAA,CAAAA,gBAAAA,GACEA,gBAAgB,CAAhBA,OAAAA,CADFA,QAAAA;AAED;AAPH,KAAA;AAFF9C,GAAAA,EAWG,CAXHA,kBAWG,CAXHA;;AAaA,MAAI,CAAJ,kBAAA,EAAyB;AACvB8C,IAAAA,gBAAgB,CAAhBA,OAAAA,GAAAA,SAAAA;AACD;;AAED,SAAA,aACE,KAAA,CAAA,aAAA,CAAC,aAAD,CAAA,QAAA,EAAA;AAAwB,IAAA,KAAK,EAAEI;AAA/B,GAAA,EADF,QACE,CADF;AAKD;;AAEM,SAAA,2BAAA,CAAA,QAAA,EAA+C;AACpD,MAAI,CAAJ,QAAA,EAAe;AACb,WAAA,EAAA;AACD;;AAED,MAAI,OAAA,QAAA,KAAJ,UAAA,EAAoC;AAClC,QAAI;AACF,aAAOC,2BAA2B,CAACtC,QAAnC,EAAkC,CAAlC;AADF,KAAA,CAEE,OAAA,OAAA,EAAM;AACN,aAAA,EAAA;AACD;AACF;;AAED,MAAI,OAAA,QAAA,KAAJ,QAAA,EAAkC;AAChCA,IAAAA,QAAQ,GAAG,CAAXA,QAAW,CAAXA;AACD;;AAED,MAAMuC,SAAS,GAAGC,eAAe,CAAjC,QAAiC,CAAjC;AACAxC,EAAAA,QAAQ,GAAGT,IAAI,CAAJA,KAAAA,CAAXS,SAAWT,CAAXS;AAEA,SAAO,CAAA,SAAA,EAAP,QAAO,CAAP;AACD;;ACXM,SAAA,MAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,MAAA,MAAA,EAAY;AACX,WAAOiE,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,MAAI,CAAA,KAAA,IAAU,CAAC3E,KAAK,CAApB,IAAA,EAA2B;AAC1BA,IAAAA,KAAK,GAAGyE,OAAO,CAAPA,OAAAA,CAARzE,KAAQyE,CAARzE;AACA;;AACD,SAAO4E,IAAI,GAAG5E,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAsdM,SAAA,MAAA,CAAA,IAAA,EAAA,OAAA,EAA+B;AACrC,MAAI;AACH,QAAIkH,MAAM,GAAGI,IAAb,EAAA;AADD,GAAA,CAEE,OAAA,CAAA,EAAS;AACV,WAAOC,OAAO,CAAd,CAAc,CAAd;AACA;;AACD,MAAIL,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAY,KAAZA,CAAAA,EAAP,OAAOA,CAAP;AACA;;AACD,SAAA,MAAA;AACA;;AAtfM,SAAA,MAAA,CAAA,CAAA,EAAmB;AACzB,SAAO,YAAW;AACjB,SAAK,IAAIzG,IAAI,GAAR,EAAA,EAAeU,CAACiD,GAArB,CAAA,EAA2BC,CAAC,GAAGC,SAAS,CAAxC,MAAA,EAAiD,CAAjD,EAAA,EAAsD;AACrD7D,MAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAU6D,SAAS,CAAnB7D,CAAmB,CAAnBA;AACA;;AACD,QAAI;AACH,aAAOgE,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,KAAA,CAEE,OAAA,CAAA,EAAS;AACV,aAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,GAAA;AAUA;;AAgdM,SAAA,OAAA,CAAA,IAAA,EAAA,IAAA,EAA6B;AACnC,MAAIyC,MAAM,GAAGL,IAAb,EAAA;;AACA,MAAIK,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAP,IAAOA,CAAP;AACA;;AACD,SAAOvC,IAAI,CAAX,MAAW,CAAX;AACA;;IAxhBYxB,UAAU,GAAGC,cAAc,E;AAEjC,IAAMC,iBAAiB,GAAGxD,KAAK,CAALA,aAAAA,CAA1B,UAA0BA,CAA1B;AAEA,IAAMyD,WAAW,GAAG,CAApB,UAAoB,CAApB;;AAEA,SAAA,aAAA,GAAyB;AAC9B,SAAOzD,KAAK,CAALA,UAAAA,CAAP,iBAAOA,CAAP;AACD;;AAEM,SAAA,uBAAA,CAAA,IAAA,EAA2D;AAAA,MAAxBsD,UAAwB,GAAA,IAAA,CAAxBA,UAAwB;AAAA,MAAZN,QAAY,GAAA,IAAA,CAAZA,QAAY;AAChE,MAAMU,KAAK,GAAG,KAAK,CAAL,OAAA,CAAc,YAAA;AAAA,WAAMJ,UAAU,IAAIC,cAApB,EAAA;AAAd,GAAA,EAAoD,CAAlE,UAAkE,CAApD,CAAd;AAIAvD,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpByD,IAAAA,WAAW,CAAXA,IAAAA,CAAAA,KAAAA;AAEA,WAAO,YAAM;AACX;AACA,UAAMnC,CAAC,GAAGmC,WAAW,CAAXA,OAAAA,CAAV,KAAUA,CAAV;;AACA,UAAInC,CAAC,IAAL,CAAA,EAAY;AACVmC,QAAAA,WAAW,CAAXA,MAAAA,CAAAA,CAAAA,EAAAA,CAAAA;AAJS,OAAA,CAAA;;;AAOX,UAAIH,UAAU,IAAd,IAAA,EAAwB;AACtBI,QAAAA,KAAK,CAALA,KAAAA;AACD;AATH,KAAA;AAHF1D,GAAAA,EAcG,CAAA,KAAA,EAdHA,UAcG,CAdHA;AAgBA,SAAA,aACE,KAAA,CAAA,aAAA,CAAC,iBAAD,CAAA,QAAA,EAAA;AAA4B,IAAA,KAAK,EAAE0D;AAAnC,GAAA,EADF,QACE,CADF;AAKD;;AAED,IAAMC,UAAU,GAAhB,EAAA;AACA,IAAMC,YAAY,GAAlB,EAAA;AACA,IAAMC,eAAe,GAArB,EAAA;AACA,IAAMC,YAAY,GAAlB,EAAA;AACA,IAAMC,WAAW,GAAjB,EAAA;AACA,IAAMC,aAAa,GAAnB,EAAA;AACA,IAAMC,WAAW,GAAjB,EAAA;AACA,IAAMC,cAAc,GAApB,EAAA;;AAEO,SAAA,cAAA,GAA0B;AAC/B,MAAMC,SAAS,GAAf,EAAA;AAEA,MAAMT,KAAK,GAAG;AACZU,IAAAA,OAAO,EADK,EAAA;AAEZC,IAAAA,UAAU,EAAE;AAFA,GAAd;;AAKA,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;AAClCZ,IAAAA,KAAK,CAALA,UAAAA,GAAmB,MAAM,CAAN,MAAA,CAAcA,KAAK,CAAnB,OAAA,EAAA,MAAA,CACjB,UAAA,GAAA,EAAA,KAAA,EAAA;AAAA,aAAiBa,KAAK,CAALA,KAAAA,CAAAA,UAAAA,GAAyBG,GAAG,GAA5BH,CAAAA,GAAjB,GAAA;AADiB,KAAA,EAAnBb,CAAmB,CAAnBA;AAIAS,IAAAA,SAAS,CAATA,OAAAA,CAAkB,UAAA,CAAA,EAAC;AAAA,aAAIQ,CAAC,CAAL,KAAK,CAAL;AAAnBR,KAAAA;AALF,GAAA;;AAQAT,EAAAA,KAAK,CAALA,SAAAA,GAAkB,UAAA,EAAA,EAAM;AACtBS,IAAAA,SAAS,CAATA,IAAAA,CAAAA,EAAAA;AACA,WAAO,YAAM;AACXA,MAAAA,SAAS,CAATA,MAAAA,CAAiBA,SAAS,CAATA,OAAAA,CAAjBA,EAAiBA,CAAjBA,EAAAA,CAAAA;AADF,KAAA;AAFFT,GAAAA;;AAOAA,EAAAA,KAAK,CAALA,KAAAA,GAAc,YAAM;AAClBxD,IAAAA,MAAM,CAANA,MAAAA,CAAcwD,KAAK,CAAnBxD,OAAAA,EAAAA,OAAAA,CAAqC,UAAA,KAAA,EAAK;AAAA,aAAIqE,KAAK,CAAT,KAAIA,EAAJ;AAA1CrE,KAAAA;AACAwD,IAAAA,KAAK,CAALA,OAAAA,GAAAA,EAAAA;AACAY,IAAAA,qBAAqB;AAHvBZ,GAAAA;;AAMA,MAAMqB,WAAW,GAAG,SAAdA,WAAc,CAAA,SAAA,EAAA,KAAA,EAA+B;AAAA,QAAA,KAAA,GAAA,KAAA,KAAA,KAAA,CAAA,GAAP,EAAO,GAAA,KAAA;AAAA,QAAjBC,KAAiB,GAAA,KAAA,CAAjBA,KAAiB;;AACjD,QAAI,OAAA,SAAA,KAAJ,UAAA,EAAqC;AAAA,UAAA,qBAAA,GAI/BlC,gBAAgB,CAAhBA,OAAAA,CAAAA,oBAAAA,CAJ+B,SAI/BA,CAJ+B;AAAA,UAEjCM,SAFiC,GAAA,qBAAA,CAAA,CAAA,CAAA;AAAA,UAGjCvC,QAHiC,GAAA,qBAAA,CAAA,CAAA,CAAA;;AAKnCoE,MAAAA,SAAS,GAAG,SAAA,SAAA,CAAA,CAAA,EAAC;AAAA,eACXD,KAAK,GAAGL,CAAC,CAADA,SAAAA,KAAH,SAAA,GAA+BpE,YAAY,CAACoE,CAAC,CAAF,QAAA,EADrC,QACqC,CADrC;AAAbM,OAAAA;AAED;;AAED,WAAO/E,MAAM,CAANA,MAAAA,CAAcwD,KAAK,CAAnBxD,OAAAA,EAAAA,MAAAA,CAAP,SAAOA,CAAP;AAVF,GAAA;;AAaAwD,EAAAA,KAAK,CAALA,UAAAA,GAAAA,WAAAA;;AAEAA,EAAAA,KAAK,CAALA,QAAAA,GAAiB,UAAA,QAAA,EAAQ;AAAA,WAAI,WAAW,CAAA,QAAA,EAAW;AAAEsB,MAAAA,KAAK,EAAE;AAAT,KAAX,CAAX,CAAJ,CAAI,CAAJ;AAAzBtB,GAAAA;;AAEAA,EAAAA,KAAK,CAALA,YAAAA,GAAqB,UAAA,QAAA,EAAQ;AAAA,QAAA,eAAA;;AAAA,WAAA,CAAA,eAAA,GAAIA,KAAK,CAALA,QAAAA,CAAJ,QAAIA,CAAJ,KAAA,IAAA,GAAA,KAAA,CAAA,GAAIA,eAAAA,CAAAA,KAAAA,CAAJ,IAAA;AAA7BA,GAAAA;;AAEAA,EAAAA,KAAK,CAALA,aAAAA,GAAsB,UAAA,SAAA,EAAA,MAAA,EAA+B;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAAP,EAAO,GAAA,MAAA;AAAA,QAAjBsB,KAAiB,GAAA,KAAA,CAAjBA,KAAiB;;AACnD,QAAME,YAAY,GAAGH,WAAW,CAAA,SAAA,EAAY;AAAEC,MAAAA,KAAK,EAALA;AAAF,KAAZ,CAAhC;AAEAE,IAAAA,YAAY,CAAZA,OAAAA,CAAqB,UAAA,KAAA,EAAS;AAC5BC,MAAAA,YAAY,CAACZ,KAAK,CAAlBY,YAAY,CAAZA;AACA,aAAOzB,KAAK,CAALA,OAAAA,CAAca,KAAK,CAA1B,SAAOb,CAAP;AAFFwB,KAAAA;;AAKA,QAAIA,YAAY,CAAhB,MAAA,EAAyB;AACvBZ,MAAAA,qBAAqB;AACtB;AAVHZ,GAAAA;;AAaAA,EAAAA,KAAK,CAALA,aAAAA,GAAsB,UAAA,SAAA,EAAA,MAAA,EAA+B;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAAP,EAAO,GAAA,MAAA;AAAA,QAAjBsB,KAAiB,GAAA,KAAA,CAAjBA,KAAiB;;AACnD,QAAME,YAAY,GAAGH,WAAW,CAAA,SAAA,EAAY;AAAEC,MAAAA,KAAK,EAALA;AAAF,KAAZ,CAAhC;AAEAE,IAAAA,YAAY,CAAZA,OAAAA,CAAqB,UAAA,KAAA,EAAS;AAC5BX,MAAAA,KAAK,CAALA,MAAAA;AADFW,KAAAA;;AAIA,QAAIA,YAAY,CAAhB,MAAA,EAAyB;AACvBZ,MAAAA,qBAAqB;AACtB;AATHZ,GAAAA;;AAYAA,EAAAA,KAAK,CAALA,cAAAA,GAAAA,MAAAA,CAAAA,UAAAA,SAAAA,EAAAA,MAAAA,EAGK;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAD8B,EAC9B,GAAA,MAAA;AAAA,QADDsB,KACC,GAAA,KAAA,CADDA,KACC;AAAA,QADM1C,YACN,GAAA,KAAA,CADMA,YACN;AAAA,QADoB8C,KACpB,GAAA,KAAA,CADoBA,KACpB;;AACH,QAAMF,YAAY,GAChBD,SAAS,KAATA,IAAAA,GACI/E,MAAM,CAANA,MAAAA,CAAcwD,KAAK,CADvBuB,OACI/E,CADJ+E,GAEIF,WAAW,CAAA,SAAA,EAAY;AAAEC,MAAAA,KAAK,EAALA;AAAF,KAAZ,CAHjB;AADG,WAAA,MAAA,CAAA,YAMC;AAAA,aAAA,MAAA,CACW,OAAO,CAAP,GAAA,CACX,YAAY,CAAZ,GAAA,CAAiB,UAAA,KAAA,EAAK;AAAA,eAAI,KAAK,CAAL,KAAA,CAAY;AAAEI,UAAAA,KAAK,EAALA;AAAF,SAAZ,CAAJ;AAFtB,OAEA,CADW,CADX,CAAA;AAND,KAAA,EAAA,UAAA,GAAA,EAUW;AAAA,UAAA,YAAA,EAAA;AAEV,cAAA,GAAA;AAFU;AAVX,KAAA,CAAA;AAHL1B,GAAAA,CAAAA;;AAoBAA,EAAAA,KAAK,CAALA,WAAAA,GAAoB,UAAA,YAAA,EAAA,cAAA,EAAA,OAAA,EAAA,MAAA,EAAmD;AAAA,QAAA,qBAAA,GACzC1C,MAAM,CAANA,oBAAAA,CADyC,YACzCA,CADyC;AAAA,QAChEoC,SADgE,GAAA,qBAAA,CAAA,CAAA,CAAA;AAAA,QACrDvC,QADqD,GAAA,qBAAA,CAAA,CAAA,CAAA;;AAGrE,QAAI0D,KAAK,GAAGb,KAAK,CAALA,OAAAA,CAAZ,SAAYA,CAAZ;;AAEA,QAAA,KAAA,EAAW;AACTxD,MAAAA,MAAM,CAANA,MAAAA,CAAAA,KAAAA,EAAqB;AAAEmF,QAAAA,cAAc,EAAhB,cAAA;AAAkBtE,QAAAA,OAAO,EAAPA;AAAlB,OAArBb;AACAqE,MAAAA,KAAK,CAALA,MAAAA,GAAAA,QAAAA,CAAAA,EAAAA,EAAoBA,KAAK,CAAzBA,MAAAA,EAAAA,MAAAA,CAAAA;AAFF,KAAA,MAGO;AACLA,MAAAA,KAAK,GAAGe,SAAS,CAAC;AAChB5B,QAAAA,KAAK,EADW,KAAA;AAEhB7C,QAAAA,QAAQ,EAFQ,QAAA;AAGhBuC,QAAAA,SAAS,EAHO,SAAA;AAIhBiC,QAAAA,cAAc,EAJE,cAAA;AAKhBtE,QAAAA,OAAO,EALS,OAAA;AAMhBC,QAAAA,MAAM,EAANA;AANgB,OAAD,CAAjBuD,CADK,CAAA;AAWL;;AACA,UAAI,CAAA,QAAA,IAAaA,KAAK,CAALA,KAAAA,CAAjB,IAAA,EAAmC;AACjCA,QAAAA,KAAK,CAD4B,oBACjCA,GADiC,CAAA;;AAIjCA,QAAAA,KAAK,CAJ4B,IAIjCA,GAJiC,CAAA;AAMjC;;AACAA,QAAAA,KAAK,CAALA,yBAAAA;AACD;;AAED,UAAIA,KAAK,CAAT,SAAA,EAAqB;AACnB,YAAI,CAAJ,QAAA,EAAe;AACbb,UAAAA,KAAK,CAALA,OAAAA,CAAAA,SAAAA,IADa,KACbA,CADa,CAAA;AAGb;AACA;;AACAtC,UAAAA,UAAU,CAAC,YAAM;AACfkD,YAAAA,qBAAqB;AADvBlD,WAAU,CAAVA;AAGD;AACF;AACF;;AAED,WAAA,KAAA;AA3CFsC,GAAAA;;AA8CAA,EAAAA,KAAK,CAALA,aAAAA,GAAAA,MAAAA,CAAAA,YAAyC;AAAA,QAAA,KAAA,GAAA,KAAA;;AAAA,SAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAAT9C,IAAS,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAATA,MAAAA,IAAS,CAAA,IAAA,CAATA,GAAS,SAAA,CAAA,IAAA,CAATA;AAAS;;AAAA,QAAA,aAAA,GAMnC2E,YAAY,CANuB,IAMvB,CANuB;AAAA,QAErC1E,QAFqC,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,QAGrCwE,cAHqC,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,QAIrCtE,OAJqC,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,QAAA,cAAA,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,QAKnCqE,KALmC,GAAA,cAAA,CAAA,KAAA;AAAA,QAKzBpE,MALyB,GAAA,6BAAA,CAAA,cAAA,EAAA,CAAA,OAAA,CAAA,CAAA;;AAQvCA,IAAAA,MAAM,GAAA,QAAA,CAAA,EAAA,EACD8B,gBAAgB,CADf,OAAA,EAAN9B,MAAM,CAANA;;AAKA,QAAMuD,KAAK,GAAGb,KAAK,CAALA,WAAAA,CAAAA,QAAAA,EAAAA,cAAAA,EAAAA,OAAAA,EAbyB,MAazBA,CAAd,CAbuC,CAAA;;;AAAA,WAAA,OAAA,CAAA,YAAA;AAAA,UAgBnCa,KAAK,CAALA,KAAAA,CAAAA,OAAAA,IAhBmC,KAAA,EAAA;AAiBrC;AAjBqC,eAAA,MAAA,CAAA,YAkBjC;AAAA,iBAAA,MAAA,CACgB,KAAK,CAAL,KAAA,CAAY;AAAEa,YAAAA,KAAK,EAALA;AAAF,WAAZ,CADhB,EAAA,UAAA,GAAA,EAAA;AAEFb,YAAAA,KAAK,CAALA,aAAAA,GAAAA,IAAAA;AAFE,YAAA,KAAA,GAAA,IAAA;AAAA,mBAAA,GAAA;AAAA,WAAA,CAAA;AAlBiC,SAAA,EAAA,UAAA,GAAA,EAsBvB;AAAA,cACRvD,MAAM,CADE,YAAA,EAAA;AAEV,kBAAA,GAAA;AAFU;AAtBuB,SAAA,CAAA;AAAA;AAAA,KAAA,EAAA,UAAA,QAAA,EAAA;AAAA,aAAA,KAAA,GAAA,QAAA,GA6BhCuD,KAAK,CAALA,KAAAA,CA7BgC,IAAA;AAAA,KAAA,CAAA;AAAzCb,GAAAA,CAAAA;;AAgCAA,EAAAA,KAAK,CAALA,YAAAA,GAAqB,UAAA,QAAA,EAAA,OAAA,EAAA,MAAA,EAAkD;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAAP,EAAO,GAAA,MAAA;AAAA,QAA5BsB,KAA4B,GAAA,KAAA,CAA5BA,KAA4B;AAAA,QAAlBhE,MAAkB,GAAA,6BAAA,CAAA,KAAA,EAAA,CAAA,OAAA,CAAA,CAAA;;AACrE,QAAIoD,OAAO,GAAGW,WAAW,CAAA,QAAA,EAAW;AAAEC,MAAAA,KAAK,EAALA;AAAF,KAAX,CAAzB;;AAEA,QAAI,CAACZ,OAAO,CAAR,MAAA,IAAmB,OAAA,QAAA,KAAvB,UAAA,EAAuD;AACrDA,MAAAA,OAAO,GAAG,CACR,KAAK,CAAL,WAAA,CAAA,QAAA,EAAA,SAAA,EAAuC,YAAA;AAAA,eAAM,IAAA,OAAA,CAAN,IAAM,CAAN;AAAvC,OAAA,EAAA,QAAA,CAAA,EAAA,EACKtB,gBAAgB,CADrB,OAAA,EADFsB,MACE,CAAA,CADQ,CAAVA;AAMD;;AAEDA,IAAAA,OAAO,CAAPA,OAAAA,CAAgB,UAAA,CAAA,EAAC;AAAA,aAAIO,CAAC,CAADA,OAAAA,CAAJ,OAAIA,CAAJ;AAAjBP,KAAAA;AAZFV,GAAAA;;AAeA,WAAA,SAAA,CAAA,OAAA,EAA4B;AAC1B,QAAMJ,UAAU,GAAGkC,OAAO,CAA1B,KAAA;AACA,QAAMC,OAAO,GAAGD,OAAO,CAAPA,MAAAA,CAAAA,YAAAA,IAAhB,mBAAA;AAEA,QAAME,WAAW,GAAG,OAAOF,OAAO,CAAd,SAAA,KAApB,WAAA;AAEA,QAAMG,WAAW,GACf,OAAOH,OAAO,CAAPA,MAAAA,CAAP,WAAA,KAAA,UAAA,GACIA,OAAO,CAAPA,MAAAA,CADJ,WACIA,EADJ,GAEIA,OAAO,CAAPA,MAAAA,CAHN,WAAA;AAKA,QAAMI,cAAc,GAAG,OAAA,WAAA,KAAvB,WAAA;AAEA,QAAMC,OAAO,GAAGH,WAAW,GAAA,IAAA,GAAU,CAArC,cAAA;AAEA,QAAMI,MAAM,GAAGN,OAAO,CAAPA,MAAAA,CAAf,MAAA;AAEA,QAAMO,aAAa,GACjBL,WAAW,IAAXA,MAAAA,IAAAA,cAAAA,GAAAA,aAAAA,GADF,aAAA;;AAGA,QAAMnB,KAAK,GAAA,QAAA,CAAA,EAAA,EAAA,OAAA,EAAA;AAETyB,MAAAA,SAAS,EAFA,EAAA;AAGTxB,MAAAA,KAAK,EAAEiB,OAAO,CAAA,SAAA,EAAY;AACxBQ,QAAAA,IAAI,EADoB,UAAA;AAExBF,QAAAA,aAAa,EAFW,aAAA;AAGxBJ,QAAAA,WAAW,EAHa,WAAA;AAIxBC,QAAAA,cAAc,EAJU,cAAA;AAKxBC,QAAAA,OAAO,EALiB,OAAA;AAMxBC,QAAAA,MAAM,EAANA;AANwB,OAAZ;AAHL,KAAA,CAAX;;AAaA,QAAMI,QAAQ,GAAG,SAAXA,QAAW,CAAA,MAAA,EAAU;AACzB3B,MAAAA,KAAK,CAALA,KAAAA,GAAckB,OAAO,CAAClB,KAAK,CAAN,KAAA,EAArBA,MAAqB,CAArBA;AACAA,MAAAA,KAAK,CAALA,SAAAA,CAAAA,OAAAA,CAAwB,UAAA,CAAA,EAAC;AAAA,eAAII,CAAC,CAADA,aAAAA,CAAgBJ,KAAK,CAAzB,KAAII,CAAJ;AAAzBJ,OAAAA;AACAD,MAAAA,qBAAqB;AAHvB,KAAA;;AAMAC,IAAAA,KAAK,CAALA,oBAAAA,GAA6B,YAAM;AACjC,UAAIA,KAAK,CAALA,MAAAA,CAAAA,SAAAA,KAAJ,QAAA,EAAyC;AACvC;AACD;;AACDA,MAAAA,KAAK,CAALA,YAAAA,GAAqBnD,UAAU,CAAC,YAAM;AACpC,YAAIkC,UAAU,CAAVA,QAAAA,CAAoBiB,KAAK,CAA7B,QAAIjB,CAAJ,EAAyC;AACvC4C,UAAAA,QAAQ,CAAC;AAAED,YAAAA,IAAI,EAAEpC;AAAR,WAAD,CAARqC;AACD;AAH4B,OAAA,EAI5B3B,KAAK,CAALA,MAAAA,CAJHA,SAA+B,CAA/BA;AAJFA,KAAAA;;AAWAA,IAAAA,KAAK,CAALA,yBAAAA,GAAkC,YAAM;AACtC,UAAIA,KAAK,CAALA,MAAAA,CAAAA,SAAAA,KAAJ,QAAA,EAAyC;AACvC;AACD;;AACD2B,MAAAA,QAAQ,CAAC;AAAED,QAAAA,IAAI,EAAEnC;AAAR,OAAD,CAARoC;AACA3B,MAAAA,KAAK,CAALA,YAAAA,GAAqBnD,UAAU,CAC7B,YAAM;AACJsC,QAAAA,KAAK,CAALA,aAAAA,CACE,UAAA,CAAA,EAAC;AAAA,iBACCiB,CAAC,CAADA,KAAAA,CAAAA,0BAAAA,IACAA,CAAC,CAADA,SAAAA,KAAgBJ,KAAK,CAFtB,SAAA;AADHb,SAAAA;AAF2B,OAAA,EAQ7B,OAAOa,KAAK,CAALA,KAAAA,CAAP,IAAA,KAAA,WAAA,IACEA,KAAK,CAALA,KAAAA,CAAAA,MAAAA,KADF,OAAA,GAAA,CAAA,GAGIA,KAAK,CAALA,MAAAA,CAXNA,SAA+B,CAA/BA;AALFA,KAAAA;;AAoBAA,IAAAA,KAAK,CAALA,IAAAA,GAAa,YAAM;AACjB;AACAY,MAAAA,YAAY,CAACZ,KAAK,CAFD,YAEL,CAAZY,CAFiB,CAAA;;AAKjBZ,MAAAA,KAAK,CAALA,SAAAA,GAAAA,IAAAA;AALFA,KAAAA;;AAQAA,IAAAA,KAAK,CAALA,MAAAA,GAAe,YAAM;AACnBA,MAAAA,KAAK,CAALA,SAAAA,GAAAA,cAAAA;;AAEA,UAAIA,KAAK,CAAT,cAAA,EAA0B;AACxBA,QAAAA,KAAK,CAALA,cAAAA;AACD;;AAED,aAAOA,KAAK,CAAZ,OAAA;AAEAD,MAAAA,qBAAqB;AATvBC,KAAAA;;AAYAA,IAAAA,KAAK,CAALA,cAAAA,GAAuB,UAAA,QAAA,EAAY;AACjC,UAAI4B,KAAK,GAAG,KAAK,CAAL,SAAA,CAAA,IAAA,CAAqB,UAAA,CAAA,EAAC;AAAA,eAAIxB,CAAC,CAADA,EAAAA,KAASyB,QAAQ,CAArB,EAAA;AAAlC,OAAY,CAAZ;;AAEA,UAAA,KAAA,EAAW;AACTlG,QAAAA,MAAM,CAANA,MAAAA,CAAAA,KAAAA,EAAAA,QAAAA;AADF,OAAA,MAEO;AACLiG,QAAAA,KAAK,GAAA,QAAA,CAAA;AACHE,UAAAA,aAAa,EAAE7G;AADZ,SAAA,EAAL2G,QAAK,CAALA;AAIA5B,QAAAA,KAAK,CAALA,SAAAA,CAAAA,IAAAA,CAAAA,QAAAA;AACD;AAXHA,KAAAA;;AAcAA,IAAAA,KAAK,CAALA,SAAAA,GAAkB,UAAA,UAAA,EAAc;AAC9BA,MAAAA,KAAK,CADyB,IAC9BA,GAD8B,CAAA;;AAI9B,aAAO,YAAM;AACXA,QAAAA,KAAK,CAALA,SAAAA,GAAkB,KAAK,CAAL,SAAA,CAAA,MAAA,CAAuB,UAAA,CAAA,EAAC;AAAA,iBAAII,CAAC,CAADA,EAAAA,KAAJ,UAAA;AAA1CJ,SAAkB,CAAlBA;;AAEA,YAAI,CAACA,KAAK,CAALA,SAAAA,CAAL,MAAA,EAA6B;AAC3BA,UAAAA,KAAK,CADsB,MAC3BA,GAD2B,CAAA;;AAI3BA,UAAAA,KAAK,CAALA,yBAAAA;AACD;AARH,OAAA;AA5GwB,KAwG1BA,CAxG0B,CAAA;;;AAyH1B,QAAM+B,YAAY,GAAA,MAAA,CAAA,UAAA,OAAA,EAA+B;AAAA,WAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAAT1F,IAAS,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;AAATA,QAAAA,IAAS,CAAA,KAAA,GAAA,CAAA,CAATA,GAAS,SAAA,CAAA,KAAA,CAATA;AAAS;;AAAA,aAAA,MAAA,CAAA,YAC3C;AACF;AACA,YAAM2F,OAAO,GAAGxF,OAAO,CAAPA,KAAAA,CAAAA,KAAAA,CAAAA,EAAWwD,KAAK,CAALA,MAAAA,CAAAA,mBAAAA,CAA3B,IAA2BA,CAAXxD,CAAhB;;AAEAwD,QAAAA,KAAK,CAALA,cAAAA,GAAuB,YAAA;AAAA,iBAAMgC,OAAO,CAAb,MAAMA,IAAN,IAAMA,GAAN,KAAA,CAAMA,GAAAA,OAAO,CAAb,MAAMA,EAAN;AAAvBhC,SAAAA;;AAJE,eAAA,MAAA,CAAA,OAAA,EAAA,UAAA,IAAA,EAAA;AAOF,iBAAOA,KAAK,CAAZ,0BAAA;AAEA,iBAAOA,KAAK,CAAZ,cAAA;AACA,cAAIA,KAAK,CAAT,SAAA,EAAqB,MAAMA,KAAK,CAAX,SAAA;AAErB,iBAAA,IAAA;AAZE,SAAA,CAAA;AAD2C,OAAA,EAAA,UAAA,KAAA,EAc/B;AAAA,YAAA,MAAA,GAAA,KAAA;AACd,eAAOA,KAAK,CAAZ,cAAA;AACA,YAAIA,KAAK,CAAT,SAAA,EAAqB,MAAMA,KAAK,CAFlB,SAEO,CAFP,CAAA;;AAKd2B,QAAAA,QAAQ,CAAC;AAAED,UAAAA,IAAI,EAAErC;AAAR,SAAD,CAARsC,CALc,CAAA;;AAAA,eAAA,OAAA,CAAA,YAAA;AAAA,cASZ3B,KAAK,CAALA,MAAAA,CAAAA,KAAAA,KAAAA,IAAAA,IACAA,KAAK,CAALA,KAAAA,CAAAA,YAAAA,IAA4BA,KAAK,CAALA,MAAAA,CAD5BA,KAAAA,IAEC,OAAOA,KAAK,CAALA,MAAAA,CAAP,KAAA,KAAA,UAAA,IACCA,KAAK,CAALA,MAAAA,CAAAA,KAAAA,CAAmBA,KAAK,CAALA,KAAAA,CAAnBA,YAAAA,EAZU,KAYVA,CAZU,EAAA;AAcZ;AACA,gBAAI,CAACiC,iBAAL,EAAA,EAA0B;AACxB;AACAjC,cAAAA,KAAK,CAALA,0BAAAA,GAAAA,IAAAA;AAFwB,cAAA,MAAA,GAAA,IAAA;AAAA,qBAGjB,IAAA,OAAA,CAHiB,IAGjB,CAHiB;AAIzB;;AAED,mBAAOA,KAAK,CArBA,0BAqBZ,CArBY,CAAA;;AAwBZ,gBAAMkC,KAAK,GAAGC,gBAAgB,CAC5BnC,KAAK,CAALA,MAAAA,CAD4B,UAAA,EAE5BA,KAAK,CAALA,KAAAA,CA1BU,YAwBkB,CAA9B,CAxBY,CAAA;;AAAA,YAAA,MAAA,GAAA,IAAA;AAAA,mBAAA,MAAA,CA8BC,IAAA,OAAA,CAAY,UAAA,OAAA,EAAA,MAAA,EAAqB;AAC5C;AACAnD,cAAAA,UAAU,CAAA,MAAA,CAAA,YAAa;AAAA,uBACjBmD,KAAK,CADY,SACjBA,GAAwBoC,MAAM,CAACpC,KAAK,CADnB,SACa,CAA9BA,GADiB,MAAA,CAAA,YAGjB;AAAA,yBAAA,MAAA,CACiB+B,YAAY,CAAZA,KAAAA,CAAAA,KAAAA,CAAAA,EAAAA,CAAAA,OAAAA,EAAAA,MAAAA,CADjB,IACiBA,CAAAA,CADjB,EAAA,UAAA,IAAA,EAAA;AAEF,wBAAI/B,KAAK,CAAT,SAAA,EAAqB,OAAOoC,MAAM,CAACpC,KAAK,CAAnB,SAAa,CAAb;AACrBqC,oBAAAA,OAAO,CAAPA,IAAO,CAAPA;AAHE,mBAAA,CAAA;AAHiB,iBAAA,EAAA,UAAA,KAAA,EAOL;AACd,sBAAIrC,KAAK,CAAT,SAAA,EAAqB,OAAOoC,MAAM,CAACpC,KAAK,CAAnB,SAAa,CAAb;AACrBoC,kBAAAA,MAAM,CAANA,KAAM,CAANA;AATmB,iBAAA,CAAA;AAAb,eAAA,CAAA,EAAVvF,KAAU,CAAVA;AAhCU,aA8BC,CA9BD,CAAA;AAAA;AAAA,SAAA,EAAA,UAAA,QAAA,EAAA;AAAA,cAAA,MAAA,EAAA,OAAA,QAAA;AA+Cd,gBAAA,KAAA;AA/Cc,SAAA,CAAA;AAd+B,OAAA,CAAA;AAAjD,KAAkB,CAAlB;;AAiEAmD,IAAAA,KAAK,CAALA,KAAAA,GAAAA,MAAAA,CAAAA,UAAAA,MAAAA,EAAmE;AAAA,UAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,GAAP,EAAO,GAAA,MAAA;AAAA,UAA5Ca,KAA4C,GAAA,KAAA,CAA5CA,KAA4C;AAAA,UAAA,eAAA,GAAA,KAAA,CAArCyB,SAAqC;AAAA,UAArCA,SAAqC,GAAA,eAAA,KAAA,KAAA,CAAA,GAAzBtC,KAAK,CAACxD,OAAmB,GAAA,eAAA,CAAA,CACjE;;;AAEA,UAAI,CAACwD,KAAK,CAAN,SAAA,IAAqB,CAACA,KAAK,CAALA,KAAAA,CAAD,OAAA,IAAwB,CAAjD,KAAA,EAA0D;AACxD;AAJ+D,OAAA,CAAA;;;AAQjE,UAAI,CAACA,KAAK,CAAV,OAAA,EAAoB;AAClBA,QAAAA,KAAK,CAALA,OAAAA,GAAgB,MAAA,CAAA,YAAa;AAC3B;AACAA,UAAAA,KAAK,CAALA,SAAAA,GAAAA,IAAAA;AAEA,cAAMuC,iBAAiB,GAAA,GAAA,MAAA,CAAOvC,KAAK,CAAnC,SAAuB,CAAvB;;AAEA,cAAIA,KAAK,CAAT,YAAA,EAAwB;AACtBuC,YAAAA,iBAAiB,CAAjBA,OAAAA,CAA0BvC,KAAK,CAA/BuC,gBAAAA;AACD;;AAR0B,iBAAA,MAAA,CAAA,YAUvB;AACF;AACAZ,YAAAA,QAAQ,CAAC;AAAED,cAAAA,IAAI,EAAElC;AAAR,aAAD,CAARmC,CAFE,CAAA;;AAAA,mBAAA,MAAA,CAKeI,YAAY,CAAZA,KAAAA,CAAAA,KAAAA,CAAAA,EAAAA,CAAAA,SAAAA,EAAAA,MAAAA,CAEZ/B,KAAK,CAFO+B,QAAAA,EAGZ/B,KAAK,CARR,cAKe+B,CAAAA,CALf,EAAA,UAAA,IAAA,EAAA;AAWF/B,cAAAA,KAAK,CAALA,OAAAA,CAAc,UAAA,GAAA,EAAG;AAAA,uBACfA,KAAK,CAALA,MAAAA,CAAAA,WAAAA,CAAAA,GAAAA,EAAAA,IAAAA,IAAAA,GAAAA,GADe,IAAA;AAAjBA,eAAAA;AAIAuC,cAAAA,iBAAiB,CAAjBA,OAAAA,CACE,UAAA,QAAA,EAAQ;AAAA,uBACNV,QAAQ,CAARA,SAAAA,IAAsBA,QAAQ,CAARA,SAAAA,CAAmB7B,KAAK,CAALA,KAAAA,CADnC,IACgB6B,CADhB;AADVU,eAAAA;AAKAA,cAAAA,iBAAiB,CAAjBA,OAAAA,CACE,UAAA,QAAA,EAAQ;AAAA,uBACNV,QAAQ,CAARA,SAAAA,IAAsBA,QAAQ,CAARA,SAAAA,CAAmB7B,KAAK,CAALA,KAAAA,CAAnB6B,IAAAA,EADhB,IACgBA,CADhB;AADVU,eAAAA;AAKA,qBAAOvC,KAAK,CAAZ,OAAA;AAEA,qBAAA,IAAA;AA3BE,aAAA,CAAA;AAVuB,WAAA,EAAA,UAAA,KAAA,EAsCX;AACd2B,YAAAA,QAAQ,CAAC;AACPD,cAAAA,IAAI,EADG,WAAA;AAEPc,cAAAA,SAAS,EAAEnH,KAAK,KAAK2E,KAAK,CAFnB,SAAA;AAGP3E,cAAAA,KAAK,EAALA;AAHO,aAAD,CAARsG;AAMA,mBAAO3B,KAAK,CAAZ,OAAA;;AAPc,gBASV3E,KAAK,KAAK2E,KAAK,CATL,SAAA,EAAA;AAUZuC,cAAAA,iBAAiB,CAAjBA,OAAAA,CACE,UAAA,QAAA,EAAQ;AAAA,uBAAIV,QAAQ,CAARA,OAAAA,IAAoBA,QAAQ,CAARA,OAAAA,CAAxB,KAAwBA,CAAxB;AADVU,eAAAA;AAIAA,cAAAA,iBAAiB,CAAjBA,OAAAA,CACE,UAAA,QAAA,EAAQ;AAAA,uBACNV,QAAQ,CAARA,SAAAA,IAAsBA,QAAQ,CAARA,SAAAA,CAAAA,SAAAA,EADhB,KACgBA,CADhB;AADVU,eAAAA;AAKA,oBAAA,KAAA;AAnBY;AAtCW,WAAA,CAAA;AAA7BvC,SAAgB,CAAA,EAAhBA;AA6DD;;AAED,aAAOA,KAAK,CAAZ,OAAA;AAxEFA,KAAAA,CAAAA;;AA2EAA,IAAAA,KAAK,CAALA,QAAAA,GAAiB,UAAA,OAAA,EAAO;AAAA,aAAI2B,QAAQ,CAAC;AAAED,QAAAA,IAAI,EAAN,cAAA;AAAwBhG,QAAAA,OAAO,EAAPA;AAAxB,OAAD,CAAZ;AAAxBsE,KAAAA;;AAEAA,IAAAA,KAAK,CAALA,OAAAA,GAAgB,UAAA,OAAA,EAAW;AACzB;AACA2B,MAAAA,QAAQ,CAAC;AAAED,QAAAA,IAAI,EAAN,aAAA;AAAuBhG,QAAAA,OAAO,EAAPA;AAAvB,OAAD,CAARiG,CAFyB,CAAA;;AAKzBf,MAAAA,YAAY,CAACZ,KAAK,CAAlBY,YAAY,CAAZA;AACAZ,MAAAA,KAAK,CAALA,oBAAAA;AANFA,KAAAA;;AASAA,IAAAA,KAAK,CAALA,KAAAA,GAAc,YAAM;AAClBY,MAAAA,YAAY,CAACZ,KAAK,CAAlBY,YAAY,CAAZA;AACAA,MAAAA,YAAY,CAACZ,KAAK,CAAlBY,YAAY,CAAZA;AACAZ,MAAAA,KAAK,CAALA,MAAAA;AAHFA,KAAAA;;AAMA,WAAA,KAAA;AACD;;AAED,SAAA,KAAA;AACD;;AAEM,SAAA,mBAAA,CAAA,KAAA,EAAA,MAAA,EAA4C;AACjD,UAAQyC,MAAM,CAAd,IAAA;AACE,SAAA,UAAA;AACE,aAAO;AACLC,QAAAA,MAAM,EAAED,MAAM,CADT,aAAA;AAELpH,QAAAA,KAAK,EAFA,IAAA;AAGLyE,QAAAA,UAAU,EACR2C,MAAM,CAANA,cAAAA,IAAyBA,MAAM,CAA/BA,MAAAA,GAAAA,KAAAA,GAEIA,MAAM,CAANA,aAAAA,KAND,SAAA;AAOLE,QAAAA,YAAY,EAPP,KAAA;AAQLC,QAAAA,YAAY,EARP,CAAA;AASLtB,QAAAA,OAAO,EAAEmB,MAAM,CATV,OAAA;AAULI,QAAAA,0BAA0B,EAVrB,KAAA;AAWLE,QAAAA,IAAI,EAAEN,MAAM,CAXP,WAAA;AAYLO,QAAAA,SAAS,EAAEP,MAAM,CAANA,cAAAA,GAAwBQ,IAAI,CAA5BR,GAAwBQ,EAAxBR,GAAqC;AAZ3C,OAAP;;AAcF,SAAA,YAAA;AACE,aAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEEG,QAAAA,YAAY,EAAE3C,KAAK,CAALA,YAAAA,GAAqB;AAFrC,OAAA,CAAA;;AAIF,SAAA,eAAA;AACE,aAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEEqB,QAAAA,OAAO,EAAE;AAFX,OAAA,CAAA;;AAIF,SAAA,YAAA;AAAmB;AACjB,eAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEEuB,UAAAA,0BAA0B,EAAE;AAF9B,SAAA,CAAA;AAID;;AACD,SAAA,WAAA;AACE,aAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEEH,QAAAA,MAAM,EAAEzC,KAAK,CAALA,MAAAA,KAAAA,WAAAA,GAAAA,aAAAA,GAA+CA,KAAK,CAF9D,MAAA;AAGEH,QAAAA,UAAU,EAHZ,IAAA;AAIE8C,QAAAA,YAAY,EAAE;AAJhB,OAAA,CAAA;;AAMF,SAAA,aAAA;AACE,aAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEEF,QAAAA,MAAM,EAFR,aAAA;AAGEK,QAAAA,IAAI,EAAEZ,gBAAgB,CAACM,MAAM,CAAP,OAAA,EAAiBxC,KAAK,CAH9C,IAGwB,CAHxB;AAIE5E,QAAAA,KAAK,EAJP,IAAA;AAKEiG,QAAAA,OAAO,EALT,KAAA;AAMExB,QAAAA,UAAU,EANZ,KAAA;AAOE6C,QAAAA,YAAY,EAAEF,MAAM,CAPtB,YAAA;AAQEO,QAAAA,SAAS,EAAEC,IAAI,CARjB,GAQaA,EARb;AASEL,QAAAA,YAAY,EAAE;AAThB,OAAA,CAAA;;AAWF,SAAA,WAAA;AACE,aAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAEE9C,QAAAA,UAAU,EAFZ,KAAA;AAGEwB,QAAAA,OAAO,EAAE;AAHX,OAAA,EAIM,CAACmB,MAAM,CAAP,SAAA,IAAqB;AACvBC,QAAAA,MAAM,EADiB,WAAA;AAEvBrH,QAAAA,KAAK,EAAEoH,MAAM,CAACpH;AAFS,OAJ3B,CAAA;;AASF,SAAA,cAAA;AACE,aAAO8G,gBAAgB,CAACM,MAAM,CAAP,OAAA,EAAvB,KAAuB,CAAvB;;AACF;AACE,YAAM,IAAN,KAAM,EAAN;AAhEJ;AAkED;;ACnlBD,IAAMW,qBAAqB,GAA3B,kBAAA;AACA,IAAMC,UAAU,GAAhB,OAAA;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAA,MAClB5F,uBADkB,GACUa,gBAAgB,CAD1B,OACUA,CADV,uBAAA;;AAG1B,MAAI0D,iBAAiB,MAAMsB,QAA3B,EAAA,EAAuC;AACrCrE,IAAAA,WAAW,CAAXA,OAAAA,CAAoB,UAAA,UAAA,EAAU;AAAA,aAC5B,UAAU,CAAV,cAAA,CACkB,UAAA,KAAA,EAAS;AACvB,YAAI,CAACc,KAAK,CAALA,SAAAA,CAAL,MAAA,EAA6B;AAC3B,iBAAA,KAAA;AACD;;AAED,YAAIA,KAAK,CAALA,MAAAA,CAAAA,MAAAA,KAAJ,IAAA,EAAkC;AAChC,iBAAA,KAAA;AACD;;AAED,YAAIA,KAAK,CAAT,0BAAA,EAAsC;AACpC;AACA,iBAAOA,KAAK,CAAZ,OAAA;AACA,iBAAA,IAAA;AACD;;AAED,YAAI,OAAOA,KAAK,CAALA,MAAAA,CAAP,oBAAA,KAAJ,WAAA,EAA8D;AAC5D,iBAAA,uBAAA;AADF,SAAA,MAEO;AACL,iBAAOA,KAAK,CAALA,MAAAA,CAAP,oBAAA;AACD;AApBL,OAAA,EAAA,KAAA,CAsBS7E,OAAO,CAvBY,KAC5B,CAD4B;AAA9B+D,KAAAA;AAyBD;AA7BH,CAAA;;AAgCA,IAAA,qBAAA;;AAEO,SAAA,eAAA,CAAA,QAAA,EAAmC;AACxC;AACA,MAAA,qBAAA,EAA2B;AACzBsE,IAAAA,qBAAqB;AAHiB,GAAA,CAAA;;;AAMxCA,EAAAA,qBAAqB,GAAG7G,QAAQ,CAAhC6G,aAAgC,CAAhCA;AACD;;AAEDC,eAAe,CAAC,UAAA,WAAA,EAAe;AAAA,MAAA,OAAA,CAAA,CAC7B;;;AACA,MAAI,CAAA,QAAA,KAAA,CAAA,OAAA,GAAA,MAAA,KAAA,IAAA,GAAA,KAAA,CAAA,GAAaC,OAAAA,CAAjB,gBAAI,CAAJ,EAA2C;AACzCA,IAAAA,MAAM,CAANA,gBAAAA,CAAAA,qBAAAA,EAAAA,WAAAA,EAAAA,KAAAA;AACAA,IAAAA,MAAM,CAANA,gBAAAA,CAAAA,UAAAA,EAAAA,WAAAA,EAAAA,KAAAA;AAEA,WAAO,YAAM;AACX;AACAA,MAAAA,MAAM,CAANA,mBAAAA,CAAAA,qBAAAA,EAAAA,WAAAA;AACAA,MAAAA,MAAM,CAANA,mBAAAA,CAAAA,UAAAA,EAAAA,WAAAA;AAHF,KAAA;AAKD;AAXHD,CAAe,CAAfA;;AC9CO,SAAA,aAAA,GAAyB;AAC9B,MAAM1E,UAAU,GAAG4E,aAAnB,EAAA;;AAD8B,MAAA,eAAA,GAEJlI,KAAK,CAALA,QAAAA,CAFI,EAEJA,CAFI;AAAA,MAEvBwE,KAFuB,GAAA,eAAA,CAAA,CAAA,CAAA;AAAA,MAEhB2D,QAFgB,GAAA,eAAA,CAAA,CAAA,CAAA;;AAI9BnI,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB,WAAO,UAAU,CAAV,SAAA,CAAqB,YAAA;AAAA,aAAMmI,QAAQ,CAAd,EAAc,CAAd;AAA5B,KAAO,CAAP;AADFnI,GAAAA,EAAAA,EAAAA;AAIA,SAAO,KAAK,CAAL,OAAA,CAAc,YAAA;AAAA,WAAMwE,KAAK,IAAIlB,UAAU,CAAzB,UAAA;AAAd,GAAA,EAAoD,CAA3D,KAA2D,CAApD,CAAP;AACD;;ACuEM,SAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,MAAA,MAAA,EAAY;AACX,WAAOwB,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,MAAI,CAAA,KAAA,IAAU,CAAC3E,KAAK,CAApB,IAAA,EAA2B;AAC1BA,IAAAA,KAAK,GAAGyE,OAAO,CAAPA,OAAAA,CAARzE,KAAQyE,CAARzE;AACA;;AACD,SAAO2E,IAAI,GAAG3E,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AA3ED,IAAMiI,eAAe,GAAG,SAAlBA,eAAkB,GAAA;AAAA,SAAO;AAC7BnB,IAAAA,MAAM,EADuB,UAAA;AAE7BK,IAAAA,IAAI,EAFyB,SAAA;AAG7B1H,IAAAA,KAAK,EAAE;AAHsB,GAAP;AAAxB,CAAA;;AA+kBO,SAAA,MAAA,GAAkB,CAAA;;AAzkBzB,IAAMyI,WAAW,GAAjB,EAAA;;AAwEO,SAAA,aAAA,CAAA,KAAA,EAAA,MAAA,EAAsC;AAC5C,MAAI,CAAJ,MAAA,EAAa;AACZ,WAAOlI,KAAK,IAAIA,KAAK,CAAdA,IAAAA,GAAsBA,KAAK,CAALA,IAAAA,CAAtBA,MAAsBA,CAAtBA,GAA2CyE,OAAO,CAAzD,OAAkDA,EAAlD;AACA;AACD;;AA3ED,IAAM0D,aAAa,GAAnB,EAAA;;AAygBO,SAAA,SAAA,CAAA,IAAA,EAAA,IAAA,EAA6B;AACnC,MAAIjB,MAAM,GAAGI,IAAb,EAAA;;AACA,MAAIJ,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAP,IAAOA,CAAP;AACA;;AACD,SAAOvC,IAAI,CAAX,MAAW,CAAX;AACA;;AA9gBD,IAAMyD,aAAa,GAAnB,EAAA;;AAyhBO,SAAA,QAAA,CAAA,IAAA,EAAA,OAAA,EAA+B;AACrC,MAAI;AACH,QAAIlB,MAAM,GAAGI,IAAb,EAAA;AADD,GAAA,CAEE,OAAA,CAAA,EAAS;AACV,WAAOC,OAAO,CAAd,CAAc,CAAd;AACA;;AACD,MAAIL,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAY,KAAZA,CAAAA,EAAP,OAAOA,CAAP;AACA;;AACD,SAAA,MAAA;AACA;;AAliBD,IAAMmB,YAAY,GAAlB,EAAA;;AA4CO,SAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,SAAO,YAAW;AACjB,SAAK,IAAI5H,IAAI,GAAR,EAAA,EAAeU,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGmD,SAAS,CAAxC,MAAA,EAAiDnD,CAAjD,EAAA,EAAsD;AACrDV,MAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAU6D,SAAS,CAAnB7D,CAAmB,CAAnBA;AACA;;AACD,QAAI;AACH,aAAOgE,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,KAAA,CAEE,OAAA,CAAA,EAAS;AACV,aAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,GAAA;AAUA;;AArDD,SAAA,eAAA,CAAA,KAAA,EAAA,MAAA,EAAwC;AACtC,MAAIoC,MAAM,CAANA,IAAAA,KAAJ,WAAA,EAAiC;AAC/B,WAAOoB,eAAP,EAAA;AACD;;AACD,MAAIpB,MAAM,CAANA,IAAAA,KAAJ,aAAA,EAAmC;AACjC,WAAO;AACLC,MAAAA,MAAM,EAAEhI;AADH,KAAP;AAGD;;AACD,MAAI+H,MAAM,CAANA,IAAAA,KAAJ,aAAA,EAAmC;AACjC,WAAO;AACLC,MAAAA,MAAM,EADD,aAAA;AAELK,MAAAA,IAAI,EAAEN,MAAM,CAACM;AAFR,KAAP;AAID;;AACD,MAAIN,MAAM,CAANA,IAAAA,KAAJ,YAAA,EAAkC;AAChC,WAAO;AACLC,MAAAA,MAAM,EADD,WAAA;AAELrH,MAAAA,KAAK,EAAEoH,MAAM,CAACpH;AAFT,KAAP;AAID;;AACD,QAAM,IAAN,KAAM,EAAN;AACD;;AAEM,SAAA,WAAA,CAAA,UAAA,EAAA,MAAA,EAA8C;AAAA,MAAboB,MAAa,KAAA,KAAA,CAAA,EAAA;AAAbA,IAAAA,MAAa,GAAJ,EAATA;AAAa;;AAAA,MAAA,iBAAA,GACnBhB,KAAK,CAALA,UAAAA,CAAAA,eAAAA,EAAAA,IAAAA,EADmB,eACnBA,CADmB;AAAA,MAC5CwE,KAD4C,GAAA,iBAAA,CAAA,CAAA,CAAA;AAAA,MACrCiE,cADqC,GAAA,iBAAA,CAAA,CAAA,CAAA;;AAOnD,MAAMvC,QAAQ,GAAGwC,kBAAkB,CAAnC,cAAmC,CAAnC;AAEA,MAAMC,aAAa,GAAGC,YAAY,CAAlC,UAAkC,CAAlC;AAEA,MAAMC,SAAS,GAAGD,YAAY,CAAA,QAAA,CAAA,EAAA,EACzBE,gBADyB,EAAA,EAA9B,MAA8B,CAAA,CAA9B;AAKA,MAAMC,iBAAiB,GAAG/I,KAAK,CAA/B,MAA0BA,EAA1B;AAEA,MAAMgJ,MAAM,GAAG,KAAK,CAAL,WAAA,CAAA,QAAA,CAAA,UAAA,SAAA,EAAA,KAAA,EAIR;AAAA,QAAA,IAAA,GAAA,KAAA,KAAA,KAAA,CAAA,GADoE,EACpE,GAAA,KAAA;AAAA,QAAA,cAAA,GAAA,IAAA,CADDvG,SACC;AAAA,QADDA,SACC,GAAA,cAAA,KAAA,KAAA,CAAA,GADWjD,IACX,GAAA,cAAA;AAAA,QAAA,YAAA,GAAA,IAAA,CADiBkD,OACjB;AAAA,QADiBA,OACjB,GAAA,YAAA,KAAA,KAAA,CAAA,GAD2BlD,IAC3B,GAAA,YAAA;AAAA,QAAA,cAAA,GAAA,IAAA,CADiCmD,SACjC;AAAA,QADiCA,SACjC,GAAA,cAAA,KAAA,KAAA,CAAA,GAD6CnD,IAC7C,GAAA,cAAA;AAAA,QADmD8C,YACnD,GAAA,IAAA,CADmDA,YACnD;;AACH,QAAMtB,MAAM,GAAG6H,SAAf,EAAA;AAEA,QAAMI,UAAU,GAAG5J,GAAnB,EAAA;AACA0J,IAAAA,iBAAiB,CAAjBA,OAAAA,GAAAA,UAAAA;;AAEA,QAAMG,QAAQ,GAAG,SAAXA,QAAW,GAAA;AAAA,aAAMH,iBAAiB,CAAjBA,OAAAA,KAAN,UAAA;AAAjB,KAAA;;AAEA7C,IAAAA,QAAQ,CAAC;AAAED,MAAAA,IAAI,EAAEqC;AAAR,KAAD,CAARpC;AAEA,QAAA,aAAA;AAVG,WAAA,QAAA,CAAA,YAYC;AAAA,aAAA,QAAA,CACoBlF,MAAM,CAANA,QAAAA,CADpB,SACoBA,CADpB,EAAA,UAAA,gBAAA,EAAA;AACFmI,QAAAA,aAAa,GAAbA,gBAAAA;AAEA,YAAA,IAAA;AAHE,eAAA,SAAA,CAAA,YAAA;AAAA,cAKE,QALF,EAAA,EAAA;AAAA,mBAAA,QAAA,CAMaR,aAAa,GAN1B,SAM0B,CAN1B,EAAA,UAAA,cAAA,EAAA;AAMArB,cAAAA,IAAI,GAAJA,cAAAA;AANA,aAAA,CAAA;AAAA;AAAA,SAAA,EAAA,YAAA;AAAA,iBAAA,SAAA,CAAA,YAAA;AAAA,gBASE4B,QATF,EAAA,EAAA;AAAA,qBAAA,aAAA,CAUMzG,SAAS,CAAA,IAAA,EAVf,SAUe,CAVf,CAAA;AAAA;AAAA,WAAA,EAAA,YAAA;AAAA,mBAAA,SAAA,CAAA,YAAA;AAAA,kBAaEyG,QAbF,EAAA,EAAA;AAAA,uBAAA,aAAA,CAcMlI,MAAM,CAANA,SAAAA,CAAAA,IAAAA,EAdN,SAcMA,CAdN,CAAA;AAAA;AAAA,aAAA,EAAA,YAAA;AAAA,qBAAA,SAAA,CAAA,YAAA;AAAA,oBAiBEkI,QAjBF,EAAA,EAAA;AAAA,yBAAA,aAAA,CAkBMvG,SAAS,CAAA,IAAA,EAAA,IAAA,EAlBf,SAkBe,CAlBf,CAAA;AAAA;AAAA,eAAA,EAAA,YAAA;AAAA,uBAAA,SAAA,CAAA,YAAA;AAAA,sBAqBEuG,QArBF,EAAA,EAAA;AAAA,2BAAA,aAAA,CAsBMlI,MAAM,CAANA,SAAAA,CAAAA,IAAAA,EAAAA,IAAAA,EAtBN,SAsBMA,CAtBN,CAAA;AAAA;AAAA,iBAAA,EAAA,YAAA;AAyBF,sBAAIkI,QAAJ,EAAA,EAAgB;AACdhD,oBAAAA,QAAQ,CAAC;AAAED,sBAAAA,IAAI,EAAN,aAAA;AAAuBqB,sBAAAA,IAAI,EAAJA;AAAvB,qBAAD,CAARpB;AACD;;AAED,yBAAA,IAAA;AA7BE,iBAAA,CAAA;AAAA,eAAA,CAAA;AAAA,aAAA,CAAA;AAAA,WAAA,CAAA;AAAA,SAAA,CAAA;AAAA,OAAA,CAAA;AAZD,KAAA,EAAA,UAAA,KAAA,EA0Ca;AAAA,aAAA,SAAA,CAAA,YAAA;AAAA,YACVgD,QADU,EAAA,EAAA;AAEZxJ,UAAAA,OAAO,CAAPA,KAAAA,CAAAA,KAAAA;AAFY,iBAAA,aAAA,CAGNgD,OAAO,CAAA,KAAA,EAAA,SAAA,EAHD,aAGC,CAHD,CAAA;AAAA;AAAA,OAAA,EAAA,YAAA;AAAA,eAAA,SAAA,CAAA,YAAA;AAAA,cAMVwG,QANU,EAAA,EAAA;AAAA,mBAAA,aAAA,CAONlI,MAAM,CAANA,OAAAA,CAAAA,KAAAA,EAAAA,SAAAA,EAPM,aAONA,CAPM,CAAA;AAAA;AAAA,SAAA,EAAA,YAAA;AAAA,iBAAA,SAAA,CAAA,YAAA;AAAA,gBAUVkI,QAVU,EAAA,EAAA;AAAA,qBAAA,aAAA,CAWNvG,SAAS,CAAA,SAAA,EAAA,KAAA,EAAA,SAAA,EAXH,aAWG,CAXH,CAAA;AAAA;AAAA,WAAA,EAAA,YAAA;AAAA,mBAAA,SAAA,CAAA,YAAA;AAAA,kBAcVuG,QAdU,EAAA,EAAA;AAAA,uBAAA,aAAA,CAeNlI,MAAM,CAANA,SAAAA,CAAAA,SAAAA,EAAAA,KAAAA,EAAAA,SAAAA,EAfM,aAeNA,CAfM,CAAA;AAAA;AAAA,aAAA,EAAA,YAAA;AAAA,kBAkBVkI,QAlBU,EAAA,EAAA;AAmBZhD,gBAAAA,QAAQ,CAAC;AAAED,kBAAAA,IAAI,EAAN,YAAA;AAAsBrG,kBAAAA,KAAK,EAALA;AAAtB,iBAAD,CAARsG;;AAnBY,oBAqBR5D,YArBQ,IAAA,IAqBRA,GArBQ,YAqBRA,GAAgBtB,MAAM,CArBd,YAAA,EAAA;AAsBV,wBAAA,KAAA;AAtBU;AAAA;AAAA,aAAA,CAAA;AAAA,WAAA,CAAA;AAAA,SAAA,CAAA;AAAA,OAAA,CAAA;AA1Cb,KAAA,CAAA;AAJQ,GAAA,CAAA,EAyEb,CAAA,QAAA,EAAA,SAAA,EAzEF,aAyEE,CAzEa,CAAf;AA4EA,MAAMoI,KAAK,GAAG,KAAK,CAAL,WAAA,CAAkB,YAAA;AAAA,WAAMlD,QAAQ,CAAC;AAAED,MAAAA,IAAI,EAAEoC;AAAR,KAAD,CAAd;AAAlB,GAAA,EAAyD,CAAvE,QAAuE,CAAzD,CAAd;AAIArI,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB,QAAI6I,SAAS,GAATA,gBAAAA,IAAgCrE,KAAK,CAAzC,KAAA,EAAiD;AAC/C,YAAMA,KAAK,CAAX,KAAA;AACD;AAHHxE,GAAAA,EAIG,CAAA,SAAA,EAAYwE,KAAK,CAJpBxE,KAIG,CAJHA;AAMA,SAAO,CAAA,MAAA,EAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAAqBoJ,IAAAA,KAAK,EAALA;AAArB,GAAA,CAAA,CAAP;AACD;;ACzEM,SAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,MAAA,MAAA,EAAY;AACX,WAAOtE,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,MAAI,CAAA,KAAA,IAAU,CAAC3E,KAAK,CAApB,IAAA,EAA2B;AAC1BA,IAAAA,KAAKoE,GAAGK,OAAO,CAAPA,OAAAA,CAARzE,KAAQyE,CAARzE;AACA;;AACD,SAAO2E,IAAI,GAAG3E,KAAK,CAALA,IAAAA,CAAH,IAAGA,CAAH,GAAX,KAAA;AACA;;AAsdM,SAAA,QAAA,CAAA,IAAA,EAAA,OAAA,EAA+B;AACrC,MAAI;AACH,QAAIkH,MAAM,GAAGI,IAAb,EAAA;AADD,GAAA,CAEE,OAAA,CAAA,EAAS;AACV,WAAOC,OAAO,CAAd,CAAc,CAAd;AACA;;AACD,MAAIL,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAY,KAAZA,CAAAA,EAAP,OAAOA,CAAP;AACA;;AACD,SAAA,MAAA;AACA;;AAtfM,SAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,SAAO0C,YAAW;AACjB,SAAK,IAAInJ,IAAI,GAAR,EAAA,EAAeU,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGmD,SAAS,CAAxC,MAAA,EAAiDnD,CAAjD,EAAA,EAAsD;AACrDV,MAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAU6D,SAAS,CAAnB7D,CAAmB,CAAnBA;AACA;;AACD,QAAIyF;AACH,aAAOzB,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,KAAA,CAEE,OAAA,CAAA,EAAS;AACV,aAAOA,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,GAAA;AAUA;;AAnEM,SAAA,YAAA,CAAA,QAAA,EAAA,cAAA,EAAA,OAAA,EAAA,MAAA,EAAsE;AAAA,MAAb5D,MAAa,KAAA,KAAA,CAAA,EAAA;AAAbA,IAAAA,MAAa,GAAJ,EAATA;AAAa;;AAC3E,MAAMqI,UAAU,GAAGC,MAAnB,EAAA;AAEAtI,EAAAA,MAAM,GAAA,QAAA,CAAA,EAAA,EACD8H,gBADC,EAAA,EAAN9H,MAAM,CAANA;AAKA,MAAMsC,UAAU,GAAG4E,aAAnB,EAAA;AAEA,MAAMqB,QAAQ,GAAGvJ,KAAK,CAAtB,MAAiBA,EAAjB;;AAEA,MAAMwJ,QAAQ,GAAGlG,UAAU,CAAVA,WAAAA,CAAAA,QAAAA,EAAAA,cAAAA,EAAAA,OAAAA,EAAjB,MAAiBA,CAAjB;;AAOA,MAAMmG,cAAc,GAClBF,QAAQ,CAARA,OAAAA,IACA,OAAOA,QAAQ,CAARA,OAAAA,CAAP,SAAA,KADAA,WAAAA,IAEA,OAAOC,QAAQ,CAAf,SAAA,KAtByE,WAmB3E,CAnB2E,CAAA;AAyB3E;;AACA,MAAI,CAAJ,cAAA,EAAqB;AACnBD,IAAAA,QAAQ,CAARA,OAAAA,GAAAA,QAAAA;AACD;;AAED,MAAMhF,KAAK,GAAGgF,QAAQ,CAAtB,OAAA;;AA9B2E,MAAA,eAAA,GAgChDvJ,KAAK,CAhC2C,QAgChDA,EAhCgD;AAAA,MAgClE0J,cAhCkE,GAAA,eAAA,CAAA,CAAA,CAAA;;AAkC3E,MAAMC,QAAQ,GAAGjB,kBAAkB,CAAnC,cAAmC,CAAnC;AAEA,MAAMkB,eAAe,GAAGhB,YAAY,CAApC,MAAoC,CAApC;AACA,MAAMiB,OAAO,GAAG,KAAK,CAAL,WAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAC4B;AAAA,QAAA,IAAA,GAAA,KAAA,KAAA,KAAA,CAAA,GAAP,EAAO,GAAA,KAAA;AAAA,QAAjCvH,YAAiC,GAAA,IAAA,CAAjCA,YAAiC;AAAA,QAAhBwH,IAAgB,GAAA,6BAAA,CAAA,IAAA,EAAA,CAAA,cAAA,CAAA,CAAA;;AAAA,WAAA,QAAA,CAAA,YACpC;AAAA,aAAA,QAAA,CACWvF,KAAK,CAALA,KAAAA,CADX,IACWA,CADX,CAAA;AADoC,KAAA,EAAA,UAAA,GAAA,EAG1B;AAAA,UAAA,YAAA,EAAA;AAEV,cAAA,GAAA;AAFU;AAH0B,KAAA,CAAA;AAD5B,GAAA,CAAA,EAUd,CAVF,KAUE,CAVc,CAAhB;AAaAA,EAAAA,KAAK,CAALA,gBAAAA,GAAyB;AACvB9B,IAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,IAAA,EAAI;AAAA,aAAImH,eAAe,GAAfA,SAAAA,CAAJ,IAAIA,CAAJ;AADQ,KAAA;AAEvBlH,IAAAA,OAAO,EAAE,SAAA,OAAA,CAAA,GAAA,EAAG;AAAA,aAAIkH,eAAe,GAAfA,OAAAA,CAAJ,GAAIA,CAAJ;AAFW,KAAA;AAGvBjH,IAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,IAAA,EAAA,GAAA,EAAA;AAAA,aAAeiH,eAAe,GAAfA,SAAAA,CAAAA,IAAAA,EAAf,GAAeA,CAAf;AAAA;AAHY,GAAzBrF,CAlD2E,CAAA;;AAyD3EvE,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB;AACAuE,IAAAA,KAAK,CAALA,cAAAA,CAAqB;AACnByF,MAAAA,EAAE,EADiB,UAAA;AAEnB3D,MAAAA,aAAa,EAAE,SAAA,aAAA,GAAA;AAAA,eAAMsD,QAAQ,CAAd,EAAc,CAAd;AAFI,OAAA;AAGnBlH,MAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,IAAA,EAAI;AAAA,eAAImH,eAAe,GAAfA,SAAAA,CAAJ,IAAIA,CAAJ;AAHI,OAAA;AAInBlH,MAAAA,OAAO,EAAE,SAAA,OAAA,CAAA,GAAA,EAAG;AAAA,eAAIkH,eAAe,GAAfA,OAAAA,CAAJ,GAAIA,CAAJ;AAJO,OAAA;AAKnBjH,MAAAA,SAAS,EAAE,SAAA,SAAA,CAAA,IAAA,EAAA,GAAA,EAAA;AAAA,eAAeiH,eAAe,GAAfA,SAAAA,CAAAA,IAAAA,EAAf,GAAeA,CAAf;AAAA;AALQ,KAArBrF;AAQA,WAAOA,KAAK,CAALA,SAAAA,CAAP,UAAOA,CAAP;AAVFvE,GAAAA,EAWG,CAAA,eAAA,EAAA,UAAA,EAAA,KAAA,EAXHA,QAWG,CAXHA;AAaAA,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB;AACA,QACE,CAAC4J,eAAe,GAAhB,MAAA,IAAA;AACA,KAACrF,KAAK,CADN,aAAA,IAAA;AAEA,KAACA,KAAK,CAFN,YAAA,IAAA;AAGAA,IAAAA,KAAK,CAALA,KAAAA,CAHA,OAAA,MAAA;AAICqF,IAAAA,eAAe,GAAfA,cAAAA,IAAoCrF,KAAK,CAALA,SAAAA,CAAAA,MAAAA,KALvC,CACE,CADF,EAME;AACAsF,MAAAA,OAAO,GAAPA,KAAAA,CAAgBnK,OAAO,CAAvBmK,KAAAA;AACD;;AAEDtF,IAAAA,KAAK,CAALA,aAAAA,GAAAA,KAAAA;AACAA,IAAAA,KAAK,CAALA,YAAAA,GAAAA,KAAAA;AAbFvE,GAAAA,EAcG,CAAA,eAAA,EAAA,KAAA,EApFwE,OAoFxE,CAdHA,EAtE2E,CAAA;;AAuF3EA,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB,QAAMuE,KAAK,GAAGgF,QAAQ,CAAtB,OAAA;;AACA,QACEvI,MAAM,CAANA,eAAAA,KACC,CAACuD,KAAK,CAAN,sBAAA,IAAA;AAECvD,IAAAA,MAAM,CAANA,eAAAA,GAAyBuD,KAAK,CAJlC,sBACEvD,CADF,EAKE;AACAuD,MAAAA,KAAK,CAALA,sBAAAA,GAA+BvD,MAAM,CAArCuD,eAAAA;AACA0F,MAAAA,aAAa,CAAC1F,KAAK,CAAnB0F,iBAAa,CAAbA;AACA1F,MAAAA,KAAK,CAALA,iBAAAA,GAA0B2F,WAAW,CAAC,YAAM;AAC1C,YAAI1D,iBAAiB,MAAMxF,MAAM,CAAjC,2BAAA,EAA+D;AAC7D6I,UAAAA,OAAO,GAAPA,KAAAA,CAAgBnK,OAAO,CAAvBmK,KAAAA;AACD;AAHkC,OAAA,EAIlC7I,MAAM,CAJTuD,eAAqC,CAArCA;AAMA,aAAO,YAAM;AACX0F,QAAAA,aAAa,CAAC1F,KAAK,CAAnB0F,iBAAa,CAAbA;AACA,eAAO1F,KAAK,CAAZ,iBAAA;AACA,eAAOA,KAAK,CAAZ,sBAAA;AAHF,OAAA;AAKD;AArBHvE,GAAAA,EAsBG,CAACgB,MAAM,CAAP,eAAA,EAAyBA,MAAM,CAA/B,2BAAA,EAtBHhB,OAsBG,CAtBHA;AAwBA,SAAA,QAAA,CAAA,EAAA,EACKuE,KAAK,CADV,KAAA,EAAA;AAEEvD,IAAAA,MAAM,EAFR,MAAA;AAGEuD,IAAAA,KAAK,EAHP,KAAA;AAIEsF,IAAAA,OAAO,EAAPA;AAJF,GAAA,CAAA;AAMD;;AChIM,SAAA,QAAA,GAA2B;AAAA,OAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANjJ,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAANA,IAAAA,IAAM,CAAA,IAAA,CAANA,GAAM,SAAA,CAAA,IAAA,CAANA;AAAM;;AAChC,MAAM2D,KAAK,GAAG4F,YAAY,CAAZA,KAAAA,CAAAA,KAAAA,CAAAA,EAAgB5E,YAAY,CAA1C,IAA0C,CAA5B4E,CAAd;AAEAC,EAAAA,cAAc,CAAdA,KAAc,CAAdA;AAEA,SAAA,KAAA;AACD;;ACFM,SAAA,iBAAA,GAAoC;AAAA,OAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANxJ,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAANA,IAAAA,IAAM,CAAA,IAAA,CAANA,GAAM,SAAA,CAAA,IAAA,CAANA;AAAM;;AAAA,MAAA,aAAA,GACc2E,YAAY,CAD1B,IAC0B,CAD1B;AAAA,MACpC1E,QADoC,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MAC1BwE,cAD0B,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MACVtE,OADU,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MAAA,cAAA,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MACDC,MADC,GAAA,cAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,cAAA;;AAGzC,MAAMqJ,WAAW,GAAGrK,KAAK,CAAzB,MAAoBA,EAApB;;AAEA,MAAI,CAAJ,QAAA,EAAe;AACbqK,IAAAA,WAAW,CAAXA,OAAAA,GAAAA,SAAAA;AANuC,GAAA,CAAA;;;AAUzC,MAAI,OAAOA,WAAW,CAAlB,OAAA,KAAJ,WAAA,EAAgD;AAC9C,WAAOrJ,MAAM,CAAb,WAAA;AACD;;AAED,MAAMuD,KAAK,GAAG4F,YAAY,CAAA,QAAA,EAAA,cAAA,EAAA,OAAA,EAA1B,MAA0B,CAA1B;AAdyC,MAgB7BG,UAhB6B,GAgBN/F,KAhBM,CAAA,IAAA;AAAA,MAgBjB0C,MAhBiB,GAgBN1C,KAhBM,CAAA,MAAA;AAkBzCvE,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB,QAAIiH,MAAM,KAANA,SAAAA,IAAwB,OAAA,UAAA,KAA5B,WAAA,EAA+D;AAC7DoD,MAAAA,WAAW,CAAXA,OAAAA,GAAAA,UAAAA;AACD;AAHHrK,GAAAA,EAIG,CAAA,UAAA,EAJHA,MAIG,CAJHA;AAMA,MAAIuK,YAAY,GAAhB,UAAA;;AAEA,MAAI,OAAA,YAAA,KAAJ,WAAA,EAAyC;AACvCA,IAAAA,YAAY,GAAGF,WAAW,CAA1BE,OAAAA;AACD;;AAED,MAAI,OAAA,YAAA,KAAJ,WAAA,EAAyC;AACvCtD,IAAAA,MAAM,GAANA,SAAAA;AACD;;AAED,MAAMuD,cAAc,GAAA,QAAA,CAAA,EAAA,EAAA,KAAA,EAAA;AAElBD,IAAAA,YAAY,EAFM,YAAA;AAGlBD,IAAAA,UAAU,EAHQ,UAAA;AAIlBrD,IAAAA,MAAM,EAANA;AAJkB,GAAA,CAApB;;AAOAmD,EAAAA,cAAc,CAAdA,cAAc,CAAdA;AAEA,SAAA,cAAA;AACD;;ACiCM,SAAA,QAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAqC;AAC3C,MAAA,MAAA,EAAY;AACX,WAAOtF,IAAI,GAAGA,IAAI,CAAP,KAAO,CAAP,GAAX,KAAA;AACA;;AACD,MAAI2G,CAAAA,KAAAA,IAAU,CAACtL,KAAK,CAApB,IAAA,EAA2B;AAC1BA,IAAAA,KAAK,GAAGyE,OAAO,CAAPA,OAAAA,CAARzE,KAAQyE,CAARzE;AACA;;AACD,SAAO2E,IAAIM,GAAGjF,KAAK,CAALA,IAAAA,CAAHiF,IAAGjF,CAAHiF,GAAX,KAAA;AACA;;AAogBM,SAAA,QAAA,GAAkB,CAAA;;AAtDlB,SAAA,cAAA,CAAA,IAAA,EAA8B;AACpC,MAAIiC,MAAM,GAAGI,IAAb,EAAA;;AACA,MAAIJ,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAP,QAAOA,CAAP;AACA;AACD;;AAxgBM,SAAA,OAAA,CAAA,IAAA,EAAA,KAAA,EAAA,KAAA,EAAqC;AAC3C,MAAI,CAAC8D,IAAI,CAAT,CAAA,EAAaC;AACZ,QAAIjL,KAAK,YAAT,KAAA,EAA4B;AAC3B,UAAIA,KAAK,CAAT,CAAA,EAAa;AACZ,YAAIqE,KAAK,GAAT,CAAA,EAAe;AACdA,UAAAA,KAAK,GAAGrE,KAAK,CAAbqE,CAAAA;AACA;;AACDrE,QAAAA,KAAK,GAAGA,KAAK,CAAbA,CAAAA;AAJD,OAAA,MAKO;AACNA,QAAAA,KAAK,CAALA,CAAAA,GAAU,OAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,EAAVA,KAAU,CAAVA;AACA;AACA;AACD;;AACD,QAAIA,KAAK,IAAIA,KAAK,CAAlB,IAAA,EAAyB;AACxBA,MAAAA,KAAK,CAALA,IAAAA,CAAW,OAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,EAAXA,KAAW,CAAXA,EAA4C,OAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,EAA5CA,CAA4C,CAA5CA;AACA;AACA;;AACDgL,IAAAA,IAAI,CAAJA,CAAAA,GAAAA,KAAAA;AACAA,IAAAA,IAAI,CAAJA,CAAAA,GAAAA,KAAAA;AACA,QAAMG,QAAQ,GAAGH,IAAI,CAArB,CAAA;;AACA,QAAA,QAAA,EAAc;AACbG,MAAAA,QAAQ,CAARA,IAAQ,CAARA;AACA;AACD;AACD;;AA9DM,IAAM,KAAA,GAAA,aAAsB,YAAW;AAC7C,WAAA,KAAA,GAAiB,CAAA;;AACjB,EAAA,KAAA,CAAA,SAAA,CAAA,IAAA,GAAuB,UAAA,WAAA,EAAA,UAAA,EAAkC;AACxD,QAAMjE,MAAM,GAAG,IAAf,KAAe,EAAf;AACA,QAAM7C,KAAK,GAAG,KAAd,CAAA;;AACA,QAAA,KAAA,EAAW;AACV,UAAMtD,QAAQ,GAAGsD,KAAK,GAALA,CAAAA,GAAAA,WAAAA,GAAjB,UAAA;;AACA,UAAA,QAAA,EAAc;AACb,YAAI;AACH,UAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAmBtD,QAAQ,CAAC,KAA5B,CAA2B,CAA3B,CAAA;AADD,SAAA,CAEE,OAAA,CAAA,EAAU;AACX,UAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA;;AACD,eAAA,MAAA;AAND,OAAA,MAOO;AACN,eAAA,IAAA;AACA;AACD;;AACD,SAAA,CAAA,GAAS,UAAA,KAAA,EAAgB;AACxB,UAAI;AACH,YAAMf,KAAK,GAAG4K,KAAK,CAAnB,CAAA;;AACA,YAAIA,KAAK,CAALA,CAAAA,GAAJ,CAAA,EAAiB;AAChB,UAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAmBC,WAAW,GAAGA,WAAW,CAAd,KAAc,CAAd,GAA9B,KAAA,CAAA;AADD,SAAA,MAEO,IAAA,UAAA,EAAgB;AACtB,UAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAmBC,UAAU,CAA7B,KAA6B,CAA7B,CAAA;AADM,SAAA,MAEA;AACN,UAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,KAAA,CAAA;AACA;AARF,OAAA,CASE,OAAA,CAAA,EAAU;AACX,QAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACA;AAZF,KAAA;;AAcA,WAAA,MAAA;AA9BD,GAAA;;AAgCA,SAAA,KAAA;AAlCM,CAA4B,EAA5B;;AAgEA,SAAA,cAAA,CAAA,QAAA,EAAkC;AACxC,SAAOM,QAAQ,YAARA,KAAAA,IAA6BA,QAAQ,CAARA,CAAAA,GAApC,CAAA;AACA;;AAmRM,SAAA,GAAA,CAAA,IAAA,EAAA,IAAA,EAAyB;AAC/B,MAAA,SAAA;;AACA,KAAG;AACF,QAAIlE,MAAM,GAAGI,IAAb,EAAA;;AACA,QAAIJ,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,UAAI,cAAA,CAAJ,MAAI,CAAJ,EAA4B;AAC3BA,QAAAA,MAAM,GAAGA,MAAM,CAAfA,CAAAA;AADD,OAAA,MAEO;AACNuE,QAAAA,SAAS,GAATA,IAAAA;AACA;AACA;AACD;;AACD,QAAIC,cAAc,GAAGC,IAArB,EAAA;;AACA,QAAI,cAAA,CAAJ,cAAI,CAAJ,EAAoC;AACnCD,MAAAA,cAAc,GAAGA,cAAc,CAA/BA,CAAAA;AACA;;AACD,QAAI,CAAJ,cAAA,EAAqB;AACpB,aAAA,MAAA;AACA;AAhBF,GAAA,QAiBS,CAACA,cAAc,CAjBxB,IAAA;;AAkBA,MAAMV,IAAI,GAAG,IAAb,KAAa,EAAb;;AACA,MAAMxE,MAAM,GAAG,OAAA,CAAA,IAAA,CAAA,IAAA,EAAA,IAAA,EAAf,CAAe,CAAf;;AACA,GAACiF,SAAS,GAAGvE,MAAM,CAANA,IAAAA,CAAH,gBAAGA,CAAH,GAAmCwE,cAAc,CAAdA,IAAAA,CAA7C,gBAA6CA,CAA7C,EAAA,IAAA,CAAyF,KAAzF,CAAA,EAAA,MAAA;AACA,SAAA,IAAA;;AACA,WAAA,gBAAA,CAAA,KAAA,EAAiC;AAChCxE,IAAAA,MAAM,GAANA,KAAAA;;AACA,aAAS;AACRwE,MAAAA,cAAc,GAAGC,IAAjBD,EAAAA;;AACA,UAAI,cAAA,CAAJ,cAAI,CAAJ,EAAoC;AACnCA,QAAAA,cAAc,GAAGA,cAAc,CAA/BA,CAAAA;AACA;;AACD,UAAI,CAAJ,cAAA,EAAqB;AACpB;AACA;;AACD,UAAIA,cAAc,CAAlB,IAAA,EAAyB;AACxBA,QAAAA,cAAc,CAAdA,IAAAA,CAAAA,gBAAAA,EAAAA,IAAAA,CAA2C,KAA3CA,CAAAA,EAAAA,MAAAA;AACA;AACA;;AACDxE,MAAAA,MAAM,GAAGI,IAATJ,EAAAA;;AACA,UAAIA,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,YAAI,cAAA,CAAJ,MAAI,CAAJ,EAA4B;AAC3BA,UAAAA,MAAM,GAAGA,MAAM,CAAfA,CAAAA;AADD,SAAA,MAEO;AACNA,UAAAA,MAAM,CAANA,IAAAA,CAAAA,gBAAAA,EAAAA,IAAAA,CAAmC,KAAnCA,CAAAA,EAAAA,MAAAA;AACA;AACA;AACD;AACD;;AACD,IAAA,OAAA,CAAA,IAAA,EAAA,CAAA,EAAA,MAAA,CAAA;AACA;;AACD,WAAA,gBAAA,CAAA,cAAA,EAA0C;AACzC,QAAA,cAAA,EAAoB;AACnB,SAAG;AACFA,QAAAA,MAAM,GAAGI,IAATJ,EAAAA;;AACA,YAAIA,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,cAAI,cAAA,CAAJ,MAAI,CAAJ,EAA4B;AAC3BA,YAAAA,MAAM,GAAGA,MAAM,CAAfA,CAAAA;AADD,WAAA,MAEO;AACNA,YAAAA,MAAM,CAANA,IAAAA,CAAAA,gBAAAA,EAAAA,IAAAA,CAAmC,KAAnCA,CAAAA,EAAAA,MAAAA;AACA;AACA;AACD;;AACDwE,QAAAA,cAAc,GAAGC,IAAjBD,EAAAA;;AACA,YAAI,cAAA,CAAJ,cAAI,CAAJ,EAAoC;AACnCA,UAAAA,cAAc,GAAGA,cAAc,CAA/BA,CAAAA;AACA;;AACD,YAAI,CAAJ,cAAA,EAAqB;AACpB,UAAA,OAAA,CAAA,IAAA,EAAA,CAAA,EAAA,MAAA,CAAA;;AACA;AACA;AAjBF,OAAA,QAkBS,CAACA,cAAc,CAlBxB,IAAA;;AAmBAA,MAAAA,cAAc,CAAdA,IAAAA,CAAAA,gBAAAA,EAAAA,IAAAA,CAA2C,KAA3CA,CAAAA,EAAAA,MAAAA;AApBD,KAAA,MAqBO;AACN,MAAA,OAAA,CAAA,IAAA,EAAA,CAAA,EAAA,MAAA,CAAA;AACA;AACD;AACD;;AA5TM,SAAA,SAAA,CAAA,KAAA,EAAA,IAAA,EAAgC;AACtC,SAAO1L,KAAK,IAAIA,KAAK,CAAdA,IAAAA,GAAsBA,KAAK,CAALA,IAAAA,CAAtBA,IAAsBA,CAAtBA,GAAyC2E,IAAI,CAApD,KAAoD,CAApD;AACA;;AAlCM,SAAA,QAAA,CAAA,CAAA,EAAmB;AACzB,SAAO,YAAW;AACjB,SAAK,IAAIlE,IAAImC,GAAR,EAAA,EAAezB,CAAC,GAArB,CAAA,EAA2BA,CAAC,GAAGmD,SAAS,CAAxC,MAAA,EAAiDnD,CAAjD,EAAA,EAAsD;AACrDV,MAAAA,IAAI,CAAJA,CAAI,CAAJA,GAAU6D,SAAS,CAAnB7D,CAAmB,CAAnBA;AACA;;AACD,QAAI;AACH,aAAOgE,OAAO,CAAPA,OAAAA,CAAgBC,CAAC,CAADA,KAAAA,CAAAA,IAAAA,EAAvB,IAAuBA,CAAhBD,CAAP;AADD,KAAA,CAEE,OAAA,CAAA,EAASsC;AACV,aAAOtC,OAAO,CAAPA,MAAAA,CAAP,CAAOA,CAAP;AACA;AARF,GAAA;AAUA;;AAwgBM,SAAA,QAAA,CAAA,MAAA,EAAA,KAAA,EAAiC;AACvC,MAAA,MAAA,EACC,MAAA,KAAA;AACD,SAAA,KAAA;AACA;;AA9BM,SAAA,gBAAA,CAAA,IAAA,EAAA,SAAA,EAA2C;AACjD,MAAI;AACH,QAAIyC,MAAM,GAAGI,IAAb,EAAA;AADD,GAAA,CAEE,OAAA,CAAA,EAAU;AACX,WAAOsE,SAAS,CAAA,IAAA,EAAhB,CAAgB,CAAhB;AACA;;AACD,MAAI1E,MAAM,IAAIA,MAAM,CAApB,IAAA,EAA2B;AAC1B,WAAOA,MAAM,CAANA,IAAAA,CAAY0E,SAAS,CAATA,IAAAA,CAAAA,IAAAA,EAAZ1E,KAAY0E,CAAZ1E,EAAyC0E,SAAS,CAATA,IAAAA,CAAAA,IAAAA,EAAhD,IAAgDA,CAAzC1E,CAAP;AACA;;AACD,SAAO0E,SAAS,CAAA,KAAA,EAAhB,MAAgB,CAAhB;AACA;;AAlkBM,SAAA,gBAAA,GAAmC;AACxC,MAAMtB,YAAY,GAAGzK,KAAK,CAA1B,MAAqBA,EAArB;;AADwC,OAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANY,IAAM,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;AAANA,IAAAA,IAAM,CAAA,IAAA,CAANA,GAAM,SAAA,CAAA,IAAA,CAANA;AAAM;;AAAA,MAAA,aAAA,GAEe2E,YAAY,CAF3B,IAE2B,CAF3B;AAAA,MAEnC1E,QAFmC,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MAEzBwE,cAFyB,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MAETtE,OAFS,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MAAA,cAAA,GAAA,aAAA,CAAA,CAAA,CAAA;AAAA,MAEAC,MAFA,GAAA,cAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,cAAA;;AAAA,MAIhC0J,YAJgC,GAIf1J,MAJe,CAAA,YAAA;AAKxC,MAAM2J,eAAe,GAAG/B,YAAY,CALI,YAKJ,CAApC,CALwC,CAAA;;AAQxC,MAAMgC,eAAe,GAArB,OAAA;AAEA7J,EAAAA,OAAO,GAAA,QAAA,CAAA,YAAe;AAAA,QAAA,UAAA,GAAA,KAAA;AACpB,QAAMuG,IAAI,GAAV,EAAA;AACA,QAAMuD,aAAa,GAAA,GAAA,MAAA,CAAOJ,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAA1B,aAAmB,CAAnB;AACA,QAAMK,oBAAoB,GAA1B,EAAA;AAHoB,WAAA,SAAA,CAAA,GAAA,CAAA,YAKjB;AACD,UAAMlK,IAAI,GAAGiK,aAAa,CAA1B,KAAaA,EAAb;AADC,aAAA,cAAA,CAAA,YAAA;AAAA,YAGG,CAACvD,IAAI,CAHR,MAAA,EAAA;AAAA,cAAA,MAAA,GAKC,IAAI,CALL,IAAA,CAAA,CAIC;;AAJD,iBAAA,QAAA,CAKiBsD,eAAe,CAAfA,KAAAA,CAAAA,KAAAA,CAAAA,EALjB,IAKiBA,CALjB,EAAA,UAAA,gBAAA,EAAA;AAKC,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,gBAAA;;AACAE,YAAAA,oBAAoB,CAApBA,IAAAA,CAAAA,IAAAA;AAND,WAAA,CAAA;AAAA,SAAA,MAAA;AAQC;AACA,cAAMI,UAAU,GAAGP,eAAe,GAAGrD,IAAI,CAACA,IAAI,CAAJA,MAAAA,GAAR,CAAO,CAAP,EATnC,IASmC,CAAlC,CATD,CAAA;AAYC;AACA;;AACA,cAAI,CAAJ,UAAA,EAAiB;AAAA,YAAA,UAAA,GAAA,IAAA;AAAA;AAEhB;;AAED,cAAM8D,QAAQ,GAAA,GAAA,MAAA,CAETC,IAAI,CAAJA,KAAAA,CAAAA,CAAAA,EAAc,CAFL,CAETA,CAFS,EAAA,CAAd,UAAc,CAAA,CAAd;AAlBD,cAAA,MAAA,GAwBC,IAAIlL,CAxBL,IAAA;AAAA,iBAAA,QAAA,CAwBiByK,eAAe,CAAfA,KAAAA,CAAAA,KAAAA,CAAAA,EAxBjB,QAwBiBA,CAxBjB,EAAA,UAAA,iBAAA,EAAA;AAwBC,YAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,iBAAA;;AACAE,YAAAA,oBAAoB,CAApBA,IAAAA,CAAAA,QAAAA;AAzBD,WAAA,CAAA;AAAA;AAAA,OAAA,CAAA;AALiB,KAAA,EAAA,YAAA;AAAA,aAAA,CAAA,UAAA,IAAA,CAAA,CAgCXD,aAAa,CAhCF,MAAA;AAAA,KAAA,CAAA,EAAA,YAAA;AAkCpBJ,MAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA,YAAAA,GAA0CE,eAAe,GACvDxK,IAAI,CAAC,IAAIA,CAAJ,MAAA,GADkD,CACnD,CADmD,EAAzDsK,IAAyD,CAAzDA;AAIAA,MAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA,aAAAA,GAAAA,oBAAAA;AAEA,aAAA,IAAA;AAxCoB,KAAA,CAAA;AAAtB1J,GAAO,CAAPA;AA2CA,MAAMI,SAAS,GAAGgJ,YAAY,CAAA,QAAA,EAAA,cAAA,EAAA,OAAA,EAA9B,MAA8B,CAA9B;;AAEA,MACE,OAAOhJ,SAAS,CAATA,KAAAA,CAAP,YAAA,KAAA,WAAA,IACA,OAAOA,SAAS,CAAhB,IAAA,KAFF,WAAA,EAGE;AACAA,IAAAA,SAAS,CAATA,KAAAA,CAAAA,YAAAA,GAA+BwJ,eAAe,GAC5CxJ,SAAS,CAATA,IAAAA,CAAeA,SAAS,CAATA,IAAAA,CAAAA,MAAAA,GAD6B,CAC5CA,CAD4C,EAE5CA,SAAS,CAFXA,IAA8C,CAA9CA;AAID;;AAED,EAAA,YAAY,CAAZ,OAAA,GAAA,SAAA;AAjEwC,MAoEtC0I,OApEsC,GAuEpC1I,SAvEoC,CAAA,OAAA;AAAA,MAAA,eAAA,GAuEpCA,SAvEoC,CAAA,IAAA;AAAA,MAqEtCmG,IArEsC,GAAA,eAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,eAAA;AAAA,MAsE7BJ,YAtE6B,GAuEpC/F,SAvEoC,CAAA,KAuEpCA,CAvEoC,YAAA,CAAA,CAAA;;AA0ExC,MAAI,CAACA,SAAS,CAATA,KAAAA,CAAL,aAAA,EAAoC;AAClCA,IAAAA,SAAS,CAATA,KAAAA,CAAAA,aAAAA,GAAgC,CAAA,GAAA,MAAA,CAC1BA,SAAS,CAATA,KAAAA,CAD0B,QAAA,EACGA,SAAS,CAATA,KAAAA,CADnCA,cAAgC,CAAA,CAAhCA;AAGD;;AAED,MAAMqK,SAAS,GAAG,KAAK,CAAL,WAAA,CAChB,UAAA,aAAA,EAAA;AAAA,QAACC,aAAD,KAAA,KAAA,CAAA,EAAA;AAACA,MAAAA,aAAD,GAAiB,YAAY,CAAZ,OAAA,CAAA,KAAA,CAAjB,YAACA;AAAD;;AAAA,WACE,YAAY7E,CAAZ,OAAA,CAAA,KAAA,CAAA,YAAA,GACIiD,OAAO,CAAC;AACNzE,MAAAA,KAAK,EADC,IAAA;AAENyB,MAAAA,SAAS,EAAA,QAAA,CAAA,YAAqB;AAAA,aAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAATjG,IAAS,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;AAATA,UAAAA,IAAS,CAAA,KAAA,CAATA,GAAS,SAAA,CAAA,KAAA,CAATA;AAAS;;AAAA,eAAA,gBAAA,CAAA,YACxB;AACF6J,UAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA,QAAAA,CAAoC,UAAA,GAAA,EAAG;AAAA,mBAAA,QAAA,CAAA,EAAA,EAAA,GAAA,EAAA;AAErCiB,cAAAA,cAAc,EAAE;AAFqB,aAAA,CAAA;AAAvCjB,WAAAA;AAKA,cAAMkB,OAAO,GAAA,GAAA,MAAA,CAAA,IAAA,EAAA,CAAb,aAAa,CAAA,CAAb;AACAlB,UAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA,aAAAA,CAAAA,IAAAA,CAAAA,OAAAA;AAPE,cAAA,qBAAA,GAUGA,YAAY,CAAZA,OAAAA,CAVH,IAAA;AAAA,iBAAA,QAAA,CAWMG,eAAe,CAAfA,KAAAA,CAAAA,KAAAA,CAAAA,EAXN,OAWMA,CAXN,EAAA,UAAA,iBAAA,EAAA;AASF,gBAAMtD,IAAInH,GAAAA,GAAAA,MAAAA,CAAAA,qBAAAA,EAAAA,CAAV,iBAAUA,CAAAA,CAAV;AAKAsK,YAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA,YAAAA,GAA0CE,eAAe,GACvDrD,IAAI,CAACA,IAAI,CAAJA,MAAAA,GADkD,CACnD,CADmD,EAAzDmD,IAAyD,CAAzDA;AAKA,mBAAA,IAAA;AAnBE,WAAA,CAAA;AADwB,SAAA,EAAA,UAAA,UAAA,EAAA,OAAA,EAAA;AAsB1BA,UAAAA,YAAY,CAAZA,OAAAA,CAAAA,KAAAA,CAAAA,QAAAA,CAAoC,UAAA,GAAA,EAAG;AAAA,mBAAA,QAAA,CAAA,EAAA,EAAA,GAAA,EAAA;AAErCiB,cAAAA,cAAc,EAAE;AAFqB,aAAA,CAAA;AAAvCjB,WAAAA;AAtB0B,iBAAA,QAAA,CAAA,UAAA,EAAA,OAAA,CAAA;AAAA,SAAA,CAAA;AAArB,OAAA;AAFH,KAAD,CADX,GAgCI,KAjCN,CAAA;AADgB,GAAA,EAmChB,CAAA,eAAA,EAAA,eAAA,EAnCF,OAmCE,CAnCgB,CAAlB;AAsCAL,EAAAA,cAAc,CAAdA,SAAc,CAAdA;AAEA,SAAA,QAAA,CAAA,EAAA,EAAA,SAAA,EAAA;AAEE9C,IAAAA,IAAI,EAFN,IAAA;AAGEJ,IAAAA,YAAY,EAHd,YAAA;AAIEsE,IAAAA,SAAS,EAATA;AAJF,GAAA,CAAA;AAMD","sourcesContent":["import React from 'react'\n\n//\n\nexport const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport const noop = () => {}\nexport const identity = d => d\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    if (\n      args[0].hasOwnProperty('queryKey') &&\n      args[0].hasOwnProperty('queryFn')\n    ) {\n      const { queryKey, variables = [], queryFn, config = {} } = args[0]\n      return [queryKey, variables, queryFn, config]\n    } else {\n      throw new Error('queryKey and queryFn keys are required.')\n    }\n  }\n\n  if (typeof args[2] === 'function') {\n    const [queryKey, variables = [], queryFn, config = {}] = args\n    return [queryKey, variables, queryFn, config]\n  }\n\n  const [queryKey, queryFn, config = {}] = args\n\n  return [queryKey, [], queryFn, config]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(queryInfo) {\n  if (queryInfo.config.suspense || queryInfo.config.useErrorBoundary) {\n    if (queryInfo.status === statusError) {\n      setTimeout(() => {\n        queryInfo.query.state.status = 'loading'\n      })\n      throw queryInfo.error\n    }\n  }\n\n  if (queryInfo.config.suspense) {\n    if (queryInfo.status === statusLoading) {\n      queryInfo.query.wasSuspended = true\n      throw queryInfo.refetch()\n    }\n  }\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nexport function deepEqual(a, b) {\n  if (a === b) return true\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i]\n\n      if (!deepEqual(a[key], b[key])) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n","import React from 'react'\nimport { noop, stableStringify, identity, deepEqual } from './utils'\n\nexport const configContext = React.createContext()\n\nconst DEFAULTS = {\n  retry: 3,\n  retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n  staleTime: 0,\n  cacheTime: 5 * 60 * 1000,\n  refetchAllOnWindowFocus: true,\n  refetchInterval: false,\n  suspense: false,\n  queryKeySerializerFn: defaultQueryKeySerializerFn,\n  queryFnParamsFilter: identity,\n  throwOnError: false,\n  useErrorBoundary: undefined, // this will default to the suspense value\n  onMutate: noop,\n  onSuccess: noop,\n  onError: noop,\n  onSettled: noop,\n  refetchOnMount: true,\n  isDataEqual: deepEqual,\n}\n\nexport const defaultConfigRef = {\n  current: DEFAULTS,\n}\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = React.useContext(configContext)\n\n  const newConfig = React.useMemo(() => {\n    const newConfig = {\n      ...(configContextValue || defaultConfigRef.current),\n      ...config,\n    }\n\n    // Default useErrorBoundary to the suspense value\n    if (typeof newConfig.useErrorBoundary === 'undefined') {\n      newConfig.useErrorBoundary = newConfig.suspense\n    }\n\n    return newConfig\n  }, [config, configContextValue])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = { ...(configContextValue || DEFAULTS) }\n\n      // Default useErrorBoundary to the suspense value\n      if (typeof defaultConfigRef.current.useErrorBoundary === 'undefined') {\n        defaultConfigRef.current.useErrorBoundary =\n          defaultConfigRef.current.suspense\n      }\n    }\n  }, [configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    return []\n  }\n\n  if (typeof queryKey === 'function') {\n    try {\n      return defaultQueryKeySerializerFn(queryKey())\n    } catch {\n      return []\n    }\n  }\n\n  if (typeof queryKey === 'string') {\n    queryKey = [queryKey]\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  return [queryHash, queryKey]\n}\n","import React from 'react'\nimport {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  getQueryArgs,\n  deepIncludes,\n  noop,\n} from './utils'\nimport { defaultConfigRef } from './config'\n\nexport const queryCache = makeQueryCache()\n\nexport const queryCacheContext = React.createContext(queryCache)\n\nexport const queryCaches = [queryCache]\n\nexport function useQueryCache() {\n  return React.useContext(queryCacheContext)\n}\n\nexport function ReactQueryCacheProvider({ queryCache, children }) {\n  const cache = React.useMemo(() => queryCache || makeQueryCache(), [\n    queryCache,\n  ])\n\n  React.useEffect(() => {\n    queryCaches.push(cache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(cache)\n      if (i >= 0) {\n        queryCaches.splice(i, 1)\n      }\n      // if the cache was created by us, we need to tear it down\n      if (queryCache == null) {\n        cache.clear()\n      }\n    }\n  }, [cache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={cache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n\nconst actionInit = {}\nconst actionFailed = {}\nconst actionMarkStale = {}\nconst actionMarkGC = {}\nconst actionFetch = {}\nconst actionSuccess = {}\nconst actionError = {}\nconst actionSetState = {}\n\nexport function makeQueryCache() {\n  const listeners = []\n\n  const cache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    cache.isFetching = Object.values(cache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n    listeners.forEach(d => d(cache))\n  }\n\n  cache.subscribe = cb => {\n    listeners.push(cb)\n    return () => {\n      listeners.splice(listeners.indexOf(cb), 1)\n    }\n  }\n\n  cache.clear = () => {\n    Object.values(cache.queries).forEach(query => query.clear())\n    cache.queries = {}\n    notifyGlobalListeners()\n  }\n\n  const findQueries = (predicate, { exact } = {}) => {\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = defaultConfigRef.current.queryKeySerializerFn(predicate)\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(cache.queries).filter(predicate)\n  }\n\n  cache.getQueries = findQueries\n\n  cache.getQuery = queryKey => findQueries(queryKey, { exact: true })[0]\n\n  cache.getQueryData = queryKey => cache.getQuery(queryKey)?.state.data\n\n  cache.removeQueries = (predicate, { exact } = {}) => {\n    const foundQueries = findQueries(predicate, { exact })\n\n    foundQueries.forEach(query => {\n      clearTimeout(query.staleTimeout)\n      delete cache.queries[query.queryHash]\n    })\n\n    if (foundQueries.length) {\n      notifyGlobalListeners()\n    }\n  }\n\n  cache.cancelQueries = (predicate, { exact } = {}) => {\n    const foundQueries = findQueries(predicate, { exact })\n\n    foundQueries.forEach(query => {\n      query.cancel()\n    })\n\n    if (foundQueries.length) {\n      notifyGlobalListeners()\n    }\n  }\n\n  cache.refetchQueries = async (\n    predicate,\n    { exact, throwOnError, force } = {}\n  ) => {\n    const foundQueries =\n      predicate === true\n        ? Object.values(cache.queries)\n        : findQueries(predicate, { exact })\n\n    try {\n      return await Promise.all(\n        foundQueries.map(query => query.fetch({ force }))\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  cache._buildQuery = (userQueryKey, queryVariables, queryFn, config) => {\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = cache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { queryVariables, queryFn })\n      query.config = { ...query.config, ...config }\n    } else {\n      query = makeQuery({\n        cache,\n        queryKey,\n        queryHash,\n        queryVariables,\n        queryFn,\n        config,\n      })\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (query.queryHash) {\n        if (!isServer) {\n          cache.queries[queryHash] = query\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    return query\n  }\n\n  cache.prefetchQuery = async (...args) => {\n    let [\n      queryKey,\n      queryVariables,\n      queryFn,\n      { force, ...config },\n    ] = getQueryArgs(args)\n\n    config = {\n      ...defaultConfigRef.current,\n      ...config,\n    }\n\n    const query = cache._buildQuery(queryKey, queryVariables, queryFn, config)\n\n    // Don't prefetch queries that are fresh, unless force is passed\n    if (query.state.isStale || force) {\n      // Trigger a fetch and return the promise\n      try {\n        const res = await query.fetch({ force })\n        query.wasPrefetched = true\n        return res\n      } catch (err) {\n        if (config.throwOnError) {\n          throw err\n        }\n      }\n    }\n\n    return query.state.data\n  }\n\n  cache.setQueryData = (queryKey, updater, { exact, ...config } = {}) => {\n    let queries = findQueries(queryKey, { exact })\n\n    if (!queries.length && typeof queryKey !== 'function') {\n      queries = [\n        cache._buildQuery(queryKey, undefined, () => new Promise(noop), {\n          ...defaultConfigRef.current,\n          ...config,\n        }),\n      ]\n    }\n\n    queries.forEach(d => d.setData(updater))\n  }\n\n  function makeQuery(options) {\n    const queryCache = options.cache\n    const reducer = options.config.queryReducer || defaultQueryReducer\n\n    const noQueryHash = typeof options.queryHash === 'undefined'\n\n    const initialData =\n      typeof options.config.initialData === 'function'\n        ? options.config.initialData()\n        : options.config.initialData\n\n    const hasInitialData = typeof initialData !== 'undefined'\n\n    const isStale = noQueryHash ? true : !hasInitialData\n\n    const manual = options.config.manual\n\n    const initialStatus =\n      noQueryHash || manual || hasInitialData ? statusSuccess : statusLoading\n\n    const query = {\n      ...options,\n      instances: [],\n      state: reducer(undefined, {\n        type: actionInit,\n        initialStatus,\n        initialData,\n        hasInitialData,\n        isStale,\n        manual,\n      }),\n    }\n\n    const dispatch = action => {\n      query.state = reducer(query.state, action)\n      query.instances.forEach(d => d.onStateUpdate(query.state))\n      notifyGlobalListeners()\n    }\n\n    query.scheduleStaleTimeout = () => {\n      if (query.config.staleTime === Infinity) {\n        return\n      }\n      query.staleTimeout = setTimeout(() => {\n        if (queryCache.getQuery(query.queryKey)) {\n          dispatch({ type: actionMarkStale })\n        }\n      }, query.config.staleTime)\n    }\n\n    query.scheduleGarbageCollection = () => {\n      if (query.config.cacheTime === Infinity) {\n        return\n      }\n      dispatch({ type: actionMarkGC })\n      query.cacheTimeout = setTimeout(\n        () => {\n          cache.removeQueries(\n            d =>\n              d.state.markedForGarbageCollection &&\n              d.queryHash === query.queryHash\n          )\n        },\n        typeof query.state.data === 'undefined' &&\n          query.state.status !== 'error'\n          ? 0\n          : query.config.cacheTime\n      )\n    }\n\n    query.heal = () => {\n      // Stop the query from being garbage collected\n      clearTimeout(query.cacheTimeout)\n\n      // Mark the query as not cancelled\n      query.cancelled = null\n    }\n\n    query.cancel = () => {\n      query.cancelled = cancelledError\n\n      if (query.cancelPromises) {\n        query.cancelPromises()\n      }\n\n      delete query.promise\n\n      notifyGlobalListeners()\n    }\n\n    query.updateInstance = instance => {\n      let found = query.instances.find(d => d.id === instance.id)\n\n      if (found) {\n        Object.assign(found, instance)\n      } else {\n        found = {\n          onStateUpdate: noop,\n          ...instance,\n        }\n        query.instances.push(instance)\n      }\n    }\n\n    query.subscribe = instanceId => {\n      query.heal()\n\n      // Return the unsubscribe function\n      return () => {\n        query.instances = query.instances.filter(d => d.id !== instanceId)\n\n        if (!query.instances.length) {\n          query.cancel()\n\n          // Schedule garbage collection\n          query.scheduleGarbageCollection()\n        }\n      }\n    }\n\n    // Set up the fetch function\n    const tryFetchData = async (queryFn, ...args) => {\n      try {\n        // Perform the query\n        const promise = queryFn(...query.config.queryFnParamsFilter(args))\n\n        query.cancelPromises = () => promise.cancel?.()\n\n        const data = await promise\n        delete query.shouldContinueRetryOnFocus\n\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        return data\n      } catch (error) {\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        // If we fail, increase the failureCount\n        dispatch({ type: actionFailed })\n\n        // Do we need to retry the request?\n        if (\n          query.config.retry === true ||\n          query.state.failureCount <= query.config.retry ||\n          (typeof query.config.retry === 'function' &&\n            query.config.retry(query.state.failureCount, error))\n        ) {\n          // Only retry if the document is visible\n          if (!isDocumentVisible()) {\n            // set this flag to continue fetch retries on focus\n            query.shouldContinueRetryOnFocus = true\n            return new Promise(noop)\n          }\n\n          delete query.shouldContinueRetryOnFocus\n\n          // Determine the retryDelay\n          const delay = functionalUpdate(\n            query.config.retryDelay,\n            query.state.failureCount\n          )\n\n          // Return a new promise with the retry\n          return await new Promise((resolve, reject) => {\n            // Keep track of the retry timeout\n            setTimeout(async () => {\n              if (query.cancelled) return reject(query.cancelled)\n\n              try {\n                const data = await tryFetchData(queryFn, ...args)\n                if (query.cancelled) return reject(query.cancelled)\n                resolve(data)\n              } catch (error) {\n                if (query.cancelled) return reject(query.cancelled)\n                reject(error)\n              }\n            }, delay)\n          })\n        }\n\n        throw error\n      }\n    }\n\n    query.fetch = async ({ force, __queryFn = query.queryFn } = {}) => {\n      // Don't refetch fresh queries that don't have a queryHash\n\n      if (!query.queryHash || (!query.state.isStale && !force)) {\n        return\n      }\n\n      // Create a new promise for the query cache if necessary\n      if (!query.promise) {\n        query.promise = (async () => {\n          // If there are any retries pending for this query, kill them\n          query.cancelled = null\n\n          const callbackInstances = [...query.instances]\n\n          if (query.wasSuspended) {\n            callbackInstances.unshift(query.suspenseInstance)\n          }\n\n          try {\n            // Set up the query refreshing state\n            dispatch({ type: actionFetch })\n\n            // Try to fetch\n            let data = await tryFetchData(\n              __queryFn,\n              ...query.queryKey,\n              ...query.queryVariables\n            )\n\n            query.setData(old =>\n              query.config.isDataEqual(old, data) ? old : data\n            )\n\n            callbackInstances.forEach(\n              instance =>\n                instance.onSuccess && instance.onSuccess(query.state.data)\n            )\n\n            callbackInstances.forEach(\n              instance =>\n                instance.onSettled && instance.onSettled(query.state.data, null)\n            )\n\n            delete query.promise\n\n            return data\n          } catch (error) {\n            dispatch({\n              type: actionError,\n              cancelled: error === query.cancelled,\n              error,\n            })\n\n            delete query.promise\n\n            if (error !== query.cancelled) {\n              callbackInstances.forEach(\n                instance => instance.onError && instance.onError(error)\n              )\n\n              callbackInstances.forEach(\n                instance =>\n                  instance.onSettled && instance.onSettled(undefined, error)\n              )\n\n              throw error\n            }\n          }\n        })()\n      }\n\n      return query.promise\n    }\n\n    query.setState = updater => dispatch({ type: actionSetState, updater })\n\n    query.setData = updater => {\n      // Set data and mark it as cached\n      dispatch({ type: actionSuccess, updater })\n\n      // Schedule a fresh invalidation!\n      clearTimeout(query.staleTimeout)\n      query.scheduleStaleTimeout()\n    }\n\n    query.clear = () => {\n      clearTimeout(query.staleTimeout)\n      clearTimeout(query.cacheTimeout)\n      query.cancel()\n    }\n\n    return query\n  }\n\n  return cache\n}\n\nexport function defaultQueryReducer(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching:\n          action.hasInitialData || action.manual\n            ? false\n            : action.initialStatus === 'loading',\n        canFetchMore: false,\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status: state.status === statusError ? statusLoading : state.status,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        canFetchMore: action.canFetchMore,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n        }),\n      }\n    case actionSetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      throw new Error()\n  }\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { defaultConfigRef } from './config'\nimport { queryCaches } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  const { refetchAllOnWindowFocus } = defaultConfigRef.current\n\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .refetchQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (query.config.manual === true) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so `fetch` will create new one\n            delete query.promise\n            return true\n          }\n\n          if (typeof query.config.refetchOnWindowFocus === 'undefined') {\n            return refetchAllOnWindowFocus\n          } else {\n            return query.config.refetchOnWindowFocus\n          }\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\n\nimport { useQueryCache } from './queryCache'\n\nexport function useIsFetching() {\n  const queryCache = useQueryCache()\n  const [state, setState] = React.useState({})\n\n  React.useEffect(() => {\n    return queryCache.subscribe(() => setState({}))\n  }, [])\n\n  return React.useMemo(() => state && queryCache.isFetching, [state])\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './config'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  useGetLatest,\n  Console,\n  uid,\n  useMountedCallback,\n  noop,\n} from './utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext(),\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      dispatch({ type: actionLoading })\n\n      let snapshotValue\n\n      try {\n        snapshotValue = await config.onMutate(variables)\n\n        let data\n\n        if (isLatest()) {\n          data = await getMutationFn()(variables)\n        }\n\n        if (isLatest()) {\n          await onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        return data\n      } catch (error) {\n        if (isLatest()) {\n          Console.error(error)\n          await onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n\n          if (throwOnError ?? config.throwOnError) {\n            throw error\n          }\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    if (getConfig().useErrorBoundary && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [mutate, { ...state, reset }]\n}\n","import React from 'react'\n\n//\n\nimport { useQueryCache } from './queryCache'\nimport { useConfigContext } from './config'\nimport {\n  useUid,\n  isDocumentVisible,\n  Console,\n  useGetLatest,\n  useMountedCallback,\n} from './utils'\n\nexport function useBaseQuery(queryKey, queryVariables, queryFn, config = {}) {\n  const instanceId = useUid()\n\n  config = {\n    ...useConfigContext(),\n    ...config,\n  }\n\n  const queryCache = useQueryCache()\n\n  const queryRef = React.useRef()\n\n  const newQuery = queryCache._buildQuery(\n    queryKey,\n    queryVariables,\n    queryFn,\n    config\n  )\n\n  const useCachedQuery =\n    queryRef.current &&\n    typeof queryRef.current.queryHash === 'undefined' &&\n    typeof newQuery.queryHash === 'undefined'\n\n  // Do not use new query with undefined queryHash, if previous query also had undefined queryHash.\n  // Otherwise this will cause infinite loop.\n  if (!useCachedQuery) {\n    queryRef.current = newQuery\n  }\n\n  const query = queryRef.current\n\n  const [, unsafeRerender] = React.useState()\n\n  const rerender = useMountedCallback(unsafeRerender)\n\n  const getLatestConfig = useGetLatest(config)\n  const refetch = React.useCallback(\n    async ({ throwOnError, ...rest } = {}) => {\n      try {\n        return await query.fetch(rest)\n      } catch (err) {\n        if (throwOnError) {\n          throw err\n        }\n      }\n    },\n    [query]\n  )\n\n  query.suspenseInstance = {\n    onSuccess: data => getLatestConfig().onSuccess(data),\n    onError: err => getLatestConfig().onError(err),\n    onSettled: (data, err) => getLatestConfig().onSettled(data, err),\n  }\n\n  // After mount, subscribe to the query\n  React.useEffect(() => {\n    // Update the instance to the query again, but not as a placeholder\n    query.updateInstance({\n      id: instanceId,\n      onStateUpdate: () => rerender({}),\n      onSuccess: data => getLatestConfig().onSuccess(data),\n      onError: err => getLatestConfig().onError(err),\n      onSettled: (data, err) => getLatestConfig().onSettled(data, err),\n    })\n\n    return query.subscribe(instanceId)\n  }, [getLatestConfig, instanceId, query, rerender])\n\n  React.useEffect(() => {\n    // Perform the initial fetch for this query if necessary\n    if (\n      !getLatestConfig().manual && // Don't auto fetch if config is set to manual query\n      !query.wasPrefetched && // Don't double fetch for prefetched queries\n      !query.wasSuspended && // Don't double fetch for suspense\n      query.state.isStale && // Only refetch if stale\n      (getLatestConfig().refetchOnMount || query.instances.length === 1)\n    ) {\n      refetch().catch(Console.error)\n    }\n\n    query.wasPrefetched = false\n    query.wasSuspended = false\n  }, [getLatestConfig, query, refetch])\n\n  // Handle refetch interval\n  React.useEffect(() => {\n    const query = queryRef.current\n    if (\n      config.refetchInterval &&\n      (!query.currentRefetchInterval ||\n        // shorter interval should override previous one\n        config.refetchInterval < query.currentRefetchInterval)\n    ) {\n      query.currentRefetchInterval = config.refetchInterval\n      clearInterval(query.refetchIntervalId)\n      query.refetchIntervalId = setInterval(() => {\n        if (isDocumentVisible() || config.refetchIntervalInBackground) {\n          refetch().catch(Console.error)\n        }\n      }, config.refetchInterval)\n\n      return () => {\n        clearInterval(query.refetchIntervalId)\n        delete query.refetchIntervalId\n        delete query.currentRefetchInterval\n      }\n    }\n  }, [config.refetchInterval, config.refetchIntervalInBackground, refetch])\n\n  return {\n    ...query.state,\n    config,\n    query,\n    refetch,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...getQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function usePaginatedQuery(...args) {\n  let [queryKey, queryVariables, queryFn, config = {}] = getQueryArgs(args)\n\n  const lastDataRef = React.useRef()\n\n  if (!queryKey) {\n    lastDataRef.current = undefined\n  }\n\n  // If latestData is set, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  const query = useBaseQuery(queryKey, queryVariables, queryFn, config)\n\n  let { data: latestData, status } = query\n\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  let resolvedData = latestData\n\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  if (typeof resolvedData !== 'undefined') {\n    status = 'success'\n  }\n\n  const paginatedQuery = {\n    ...query,\n    resolvedData,\n    latestData,\n    status,\n  }\n\n  handleSuspense(paginatedQuery)\n\n  return paginatedQuery\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, useGetLatest, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  const queryInfoRef = React.useRef()\n  let [queryKey, queryVariables, queryFn, config = {}] = getQueryArgs(args)\n\n  const { getFetchMore } = config\n  const getGetFetchMore = useGetLatest(getFetchMore)\n\n  // The default queryFn will query all pages and map them together\n  const originalQueryFn = queryFn\n\n  queryFn = async () => {\n    const data = []\n    const pageVariables = [...queryInfoRef.current.query.pageVariables]\n    const rebuiltPageVariables = []\n\n    do {\n      const args = pageVariables.shift()\n\n      if (!data.length) {\n        // the first page query doesn't need to be rebuilt\n        data.push(await originalQueryFn(...args))\n        rebuiltPageVariables.push(args)\n      } else {\n        // get an up-to-date cursor based on the previous data set\n        const nextCursor = getGetFetchMore()(data[data.length - 1], data)\n\n        // break early if there's no next cursor\n        // otherwise we'll start from the beginning\n        // which will cause unwanted duplication\n        if (!nextCursor) {\n          break\n        }\n\n        const pageArgs = [\n          // remove the last argument (the previously saved cursor)\n          ...args.slice(0, -1),\n          nextCursor,\n        ]\n\n        data.push(await originalQueryFn(...pageArgs))\n        rebuiltPageVariables.push(pageArgs)\n      }\n    } while (pageVariables.length)\n\n    queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n      data[data.length - 1],\n      data\n    )\n    queryInfoRef.current.query.pageVariables = rebuiltPageVariables\n\n    return data\n  }\n\n  const queryInfo = useBaseQuery(queryKey, queryVariables, queryFn, config)\n\n  if (\n    typeof queryInfo.query.canFetchMore === 'undefined' &&\n    typeof queryInfo.data !== 'undefined'\n  ) {\n    queryInfo.query.canFetchMore = getGetFetchMore()(\n      queryInfo.data[queryInfo.data.length - 1],\n      queryInfo.data\n    )\n  }\n\n  queryInfoRef.current = queryInfo\n\n  let {\n    refetch,\n    data = [],\n    query: { canFetchMore },\n  } = queryInfo\n\n  // Here we seed the pageVariabes for the query\n  if (!queryInfo.query.pageVariables) {\n    queryInfo.query.pageVariables = [\n      [...queryInfo.query.queryKey, ...queryInfo.query.queryVariables],\n    ]\n  }\n\n  const fetchMore = React.useCallback(\n    (fetchMoreInfo = queryInfoRef.current.query.canFetchMore) =>\n      queryInfoRef.current.query.canFetchMore\n        ? refetch({\n            force: true,\n            __queryFn: async (...args) => {\n              try {\n                queryInfoRef.current.query.setState(old => ({\n                  ...old,\n                  isFetchingMore: true,\n                }))\n\n                const newArgs = [...args, fetchMoreInfo]\n                queryInfoRef.current.query.pageVariables.push(newArgs)\n\n                const data = [\n                  ...queryInfoRef.current.data,\n                  await originalQueryFn(...newArgs),\n                ]\n\n                queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n                  data[data.length - 1],\n                  data\n                )\n\n                return data\n              } finally {\n                queryInfoRef.current.query.setState(old => ({\n                  ...old,\n                  isFetchingMore: false,\n                }))\n              }\n            },\n          })\n        : void 0,\n    [getGetFetchMore, originalQueryFn, refetch]\n  )\n\n  handleSuspense(queryInfo)\n\n  return {\n    ...queryInfo,\n    data,\n    canFetchMore,\n    fetchMore,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}