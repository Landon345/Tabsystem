{"version":3,"file":"react-query.mjs","sources":["../src/core/utils.js","../src/core/config.js","../src/core/queryInstance.js","../src/core/query.js","../src/core/queryCache.js","../src/core/setFocusHandler.js","../src/react/ReactQueryCacheProvider.js","../src/react/ReactQueryConfigProvider.js","../src/react/utils.js","../src/react/useIsFetching.js","../src/react/useMutation.js","../src/react/useBaseQuery.js","../src/react/useQuery.js","../src/react/usePaginatedQuery.js","../src/react/useInfiniteQuery.js"],"sourcesContent":["export const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport function noop() {\n  return void 0\n}\nexport function identity(d) {\n  return d\n}\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    const { queryKey, queryFn, config } = args[0]\n    args = [queryKey, queryFn, config, ...args.slice(1)]\n  } else if (isObject(args[1])) {\n    const [queryKey, config, ...rest] = args\n    args = [queryKey, undefined, config, ...rest]\n  }\n\n  let [queryKey, queryFn, config = {}, ...rest] = args\n\n  queryFn = queryFn || config.queryFn\n\n  return [queryKey, queryFn ? { ...config, queryFn } : config, ...rest]\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nexport function deepEqual(a, b) {\n  if (a === b) return true\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i]\n\n      if (!deepEqual(a[key], b[key])) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n\nexport function getStatusBools(status) {\n  return {\n    isLoading: status === statusLoading,\n    isSuccess: status === statusSuccess,\n    isError: status === statusError,\n    isIdle: status === statusIdle,\n  }\n}\n","import { noop, stableStringify, identity, deepEqual } from './utils'\n\nexport const DEFAULT_CONFIG = {\n  shared: {\n    suspense: false,\n  },\n  queries: {\n    queryKeySerializerFn: defaultQueryKeySerializerFn,\n    queryFn: undefined,\n    initialStale: undefined,\n    enabled: true,\n    retry: 3,\n    retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n    staleTime: 0,\n    cacheTime: 5 * 60 * 1000,\n    refetchOnWindowFocus: true,\n    refetchInterval: false,\n    queryFnParamsFilter: identity,\n    refetchOnMount: true,\n    isDataEqual: deepEqual,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n  mutations: {\n    throwOnError: false,\n    onMutate: noop,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n}\n\nexport const defaultConfigRef = {\n  current: DEFAULT_CONFIG,\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    return []\n  }\n\n  if (!Array.isArray(queryKey)) {\n    queryKey = [queryKey]\n  }\n\n  if (queryKey.some(d => typeof d === 'function')) {\n    throw new Error('A valid query key is required!')\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  if (!queryHash) {\n    return []\n  }\n\n  return [queryHash, queryKey]\n}\n","import { uid, isServer, isDocumentVisible, Console } from './utils'\n\nexport function makeQueryInstance(query, onStateUpdate) {\n  const instance = {\n    id: uid(),\n    onStateUpdate,\n  }\n\n  instance.clearInterval = () => {\n    clearInterval(instance.refetchIntervalId)\n    delete instance.refetchIntervalId\n  }\n\n  instance.updateConfig = config => {\n    const oldConfig = instance.config\n\n    // Update the config\n    instance.config = config\n\n    if (!isServer) {\n      if (oldConfig?.refetchInterval === config.refetchInterval) {\n        return\n      }\n\n      query.clearIntervals()\n\n      const minInterval = Math.min(\n        ...query.instances.map(d => d.config.refetchInterval || Infinity)\n      )\n\n      if (\n        !instance.refetchIntervalId &&\n        minInterval > 0 &&\n        minInterval < Infinity\n      ) {\n        instance.refetchIntervalId = setInterval(() => {\n          if (\n            query.instances.some(instance => instance.config.enabled) &&\n            (isDocumentVisible() ||\n              query.instances.some(\n                instance => instance.config.refetchIntervalInBackground\n              ))\n          ) {\n            query.fetch()\n          }\n        }, minInterval)\n      }\n    }\n  }\n\n  instance.run = async () => {\n    try {\n      // Perform the refetch for this query if necessary\n      if (\n        query.config.enabled && // Don't auto refetch if disabled\n        !query.wasSuspended && // Don't double refetch for suspense\n        query.state.isStale && // Only refetch if stale\n        (query.config.refetchOnMount || query.instances.length === 1)\n      ) {\n        await query.fetch()\n      }\n\n      query.wasSuspended = false\n    } catch (error) {\n      Console.error(error)\n    }\n  }\n\n  instance.unsubscribe = () => {\n    query.instances = query.instances.filter(d => d.id !== instance.id)\n\n    if (!query.instances.length) {\n      instance.clearInterval()\n      query.cancel()\n\n      if (!isServer) {\n        // Schedule garbage collection\n        query.scheduleGarbageCollection()\n      }\n    }\n  }\n\n  return instance\n}\n","import {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  noop,\n  statusIdle,\n  Console,\n  getStatusBools,\n} from './utils'\nimport { makeQueryInstance } from './queryInstance'\n\nconst actionInit = 'Init'\nconst actionFailed = 'Failed'\nconst actionMarkStale = 'MarkStale'\nconst actionMarkGC = 'MarkGC'\nconst actionFetch = 'Fetch'\nconst actionSuccess = 'Success'\nconst actionError = 'Error'\nconst actionSetState = 'SetState'\n\nexport function makeQuery({\n  queryCache,\n  queryKey,\n  queryHash,\n  config,\n  notifyGlobalListeners,\n}) {\n  const initialData =\n    typeof config.initialData === 'function'\n      ? config.initialData()\n      : config.initialData\n\n  const hasInitialData = typeof initialData !== 'undefined'\n\n  const isStale =\n    !config.enabled ||\n    (typeof config.initialStale === 'function'\n      ? config.initialStale()\n      : config.initialStale ?? !hasInitialData)\n\n  const initialStatus = hasInitialData\n    ? statusSuccess\n    : config.enabled\n    ? statusLoading\n    : statusIdle\n\n  let query = {\n    queryKey,\n    queryHash,\n    config,\n    instances: [],\n    state: queryReducer(undefined, {\n      type: actionInit,\n      initialStatus,\n      initialData,\n      hasInitialData,\n      isStale,\n    }),\n  }\n\n  query.dispatch = action => {\n    query.state = queryReducer(query.state, action)\n    query.instances.forEach(d => d.onStateUpdate(query.state))\n    notifyGlobalListeners()\n  }\n\n  query.scheduleStaleTimeout = () => {\n    if (isServer) return\n    clearTimeout(query.staleTimeout)\n\n    if (query.config.staleTime === Infinity) {\n      return\n    }\n\n    query.staleTimeout = setTimeout(() => {\n      if (queryCache.getQuery(query.queryKey)) {\n        query.invalidate()\n      }\n    }, query.config.staleTime)\n  }\n\n  query.invalidate = () => {\n    clearTimeout(query.staleTimeout)\n    query.dispatch({ type: actionMarkStale })\n  }\n\n  query.scheduleGarbageCollection = () => {\n    if (!queryCache.queries[query.queryHash]) return\n    if (query.config.cacheTime === Infinity) {\n      return\n    }\n    query.dispatch({ type: actionMarkGC })\n    query.cacheTimeout = setTimeout(\n      () => {\n        queryCache.removeQueries(\n          d =>\n            d.state.markedForGarbageCollection &&\n            d.queryHash === query.queryHash\n        )\n      },\n      typeof query.state.data === 'undefined' && query.state.status !== 'error'\n        ? 0\n        : query.config.cacheTime\n    )\n  }\n\n  query.refetch = async () => {\n    try {\n      await query.fetch()\n    } catch (error) {\n      Console.error(error)\n    }\n  }\n\n  query.heal = () => {\n    // Stop the query from being garbage collected\n    clearTimeout(query.cacheTimeout)\n\n    // Mark the query as not cancelled\n    query.cancelled = null\n  }\n\n  query.cancel = () => {\n    query.cancelled = cancelledError\n\n    if (query.cancelPromises) {\n      query.cancelPromises()\n    }\n\n    delete query.promise\n  }\n\n  query.clearIntervals = () => {\n    query.instances.forEach(instance => {\n      instance.clearInterval()\n    })\n  }\n\n  query.setState = updater => query.dispatch({ type: actionSetState, updater })\n\n  query.setData = updater => {\n    // Set data and mark it as cached\n    query.dispatch({ type: actionSuccess, updater })\n\n    // Schedule a fresh invalidation!\n    query.scheduleStaleTimeout()\n  }\n\n  query.clear = () => {\n    clearTimeout(query.staleTimeout)\n    clearTimeout(query.cacheTimeout)\n    clearTimeout(query.retryTimeout)\n    query.clearIntervals()\n    query.cancel()\n    query.dispatch = noop\n    delete queryCache.queries[query.queryHash]\n    notifyGlobalListeners()\n  }\n\n  query.subscribe = (onStateUpdate = noop) => {\n    const instance = makeQueryInstance(query, onStateUpdate)\n    query.instances.push(instance)\n    query.heal()\n    return instance\n  }\n\n  // Set up the core fetcher function\n  const tryFetchData = async (fn, ...args) => {\n    try {\n      // Perform the query\n      const promise = fn(...query.config.queryFnParamsFilter(args))\n\n      query.cancelPromises = () => promise.cancel?.()\n\n      const data = await promise\n      delete query.shouldContinueRetryOnFocus\n\n      delete query.cancelPromises\n      if (query.cancelled) throw query.cancelled\n\n      return data\n    } catch (error) {\n      delete query.cancelPromises\n      if (query.cancelled) throw query.cancelled\n\n      // If we fail, increase the failureCount\n      query.dispatch({ type: actionFailed })\n\n      // Do we need to retry the request?\n      if (\n        query.config.retry === true ||\n        query.state.failureCount <= query.config.retry ||\n        (typeof query.config.retry === 'function' &&\n          query.config.retry(query.state.failureCount, error))\n      ) {\n        // Only retry if the document is visible\n        if (!isDocumentVisible()) {\n          // set this flag to continue retries on focus\n          query.shouldContinueRetryOnFocus = true\n          // Resolve a\n          return new Promise(noop)\n        }\n\n        delete query.shouldContinueRetryOnFocus\n\n        // Determine the retryDelay\n        const delay = functionalUpdate(\n          query.config.retryDelay,\n          query.state.failureCount\n        )\n\n        // Return a new promise with the retry\n        return await new Promise((resolve, reject) => {\n          // Keep track of the retry timeout\n          query.retryTimeout = setTimeout(async () => {\n            if (query.cancelled) return reject(query.cancelled)\n\n            try {\n              const data = await tryFetchData(fn, ...args)\n              if (query.cancelled) return reject(query.cancelled)\n              resolve(data)\n            } catch (error) {\n              if (query.cancelled) return reject(query.cancelled)\n              reject(error)\n            }\n          }, delay)\n        })\n      }\n\n      throw error\n    }\n  }\n\n  query.fetch = async ({ fetchMore } = {}) => {\n    let queryFn = query.config.queryFn\n\n    if (!queryFn) {\n      return\n    }\n\n    if (query.config.infinite) {\n      const originalQueryFn = queryFn\n\n      queryFn = async () => {\n        const data = []\n        const pageVariables = [...query.pageVariables]\n        const rebuiltPageVariables = []\n\n        do {\n          const args = pageVariables.shift()\n\n          if (!data.length) {\n            // the first page query doesn't need to be rebuilt\n            data.push(await originalQueryFn(...args))\n            rebuiltPageVariables.push(args)\n          } else {\n            // get an up-to-date cursor based on the previous data set\n\n            const nextCursor = query.config.getFetchMore(\n              data[data.length - 1],\n              data\n            )\n\n            // break early if there's no next cursor\n            // otherwise we'll start from the beginning\n            // which will cause unwanted duplication\n            if (!nextCursor) {\n              break\n            }\n\n            const pageArgs = [\n              // remove the last argument (the previously saved cursor)\n              ...args.slice(0, -1),\n              nextCursor,\n            ]\n\n            data.push(await originalQueryFn(...pageArgs))\n            rebuiltPageVariables.push(pageArgs)\n          }\n        } while (pageVariables.length)\n\n        query.state.canFetchMore = query.config.getFetchMore(\n          data[data.length - 1],\n          data\n        )\n        query.pageVariables = rebuiltPageVariables\n\n        return data\n      }\n\n      if (fetchMore) {\n        queryFn = async (...args) => {\n          const { fetchMoreInfo, previous } = fetchMore\n          try {\n            query.setState(old => ({\n              ...old,\n              isFetchingMore: previous ? 'previous' : 'next',\n            }))\n\n            const newArgs = [...args, fetchMoreInfo]\n\n            query.pageVariables[previous ? 'unshift' : 'push'](newArgs)\n\n            const newData = await originalQueryFn(...newArgs)\n\n            const data = previous\n              ? [newData, ...query.state.data]\n              : [...query.state.data, newData]\n\n            query.state.canFetchMore = query.config.getFetchMore(newData, data)\n\n            return data\n          } finally {\n            query.setState(old => ({\n              ...old,\n              isFetchingMore: false,\n            }))\n          }\n        }\n      }\n    }\n\n    // Create a new promise for the query cache if necessary\n    if (!query.promise) {\n      query.promise = (async () => {\n        // If there are any retries pending for this query, kill them\n        query.cancelled = null\n\n        const getCallbackInstances = () => {\n          const callbackInstances = [...query.instances]\n\n          if (query.wasSuspended) {\n            callbackInstances.unshift(query.fallbackInstance)\n          }\n          return callbackInstances\n        }\n\n        try {\n          // Set up the query refreshing state\n          query.dispatch({ type: actionFetch })\n\n          // Try to get the data\n          let data = await tryFetchData(queryFn, ...query.queryKey)\n\n          query.setData(old =>\n            query.config.isDataEqual(old, data) ? old : data\n          )\n\n          getCallbackInstances().forEach(\n            instance =>\n              instance.config.onSuccess &&\n              instance.config.onSuccess(query.state.data)\n          )\n\n          getCallbackInstances().forEach(\n            instance =>\n              instance.config.onSettled &&\n              instance.config.onSettled(query.state.data, null)\n          )\n\n          delete query.promise\n\n          return data\n        } catch (error) {\n          query.dispatch({\n            type: actionError,\n            cancelled: error === query.cancelled,\n            error,\n          })\n\n          delete query.promise\n\n          if (error !== query.cancelled) {\n            getCallbackInstances().forEach(\n              instance =>\n                instance.config.onError && instance.config.onError(error)\n            )\n\n            getCallbackInstances().forEach(\n              instance =>\n                instance.config.onSettled &&\n                instance.config.onSettled(undefined, error)\n            )\n\n            throw error\n          }\n        }\n      })()\n    }\n\n    return query.promise\n  }\n\n  if (query.config.infinite) {\n    query.fetchMore = (\n      fetchMoreInfo = query.state.canFetchMore,\n      { previous = false } = {}\n    ) => query.fetch({ fetchMore: { fetchMoreInfo, previous } })\n  }\n\n  return query\n}\n\nexport function queryReducer(state, action) {\n  const newState = switchActions(state, action)\n\n  return Object.assign(newState, getStatusBools(newState.status))\n}\n\nfunction switchActions(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching: action.initialStatus === 'loading',\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status:\n          typeof state.data !== 'undefined' ? statusSuccess : statusLoading,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n          throwInErrorBoundary: true,\n        }),\n      }\n    case actionSetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      throw new Error()\n  }\n}\n","import {\n  isServer,\n  getQueryArgs,\n  deepIncludes,\n  Console,\n  isObject,\n} from './utils'\nimport { defaultConfigRef } from './config'\nimport { makeQuery } from './query'\n\nexport const queryCache = makeQueryCache()\n\nexport const queryCaches = [queryCache]\n\nexport function makeQueryCache({ frozen = isServer, defaultConfig } = {}) {\n  // A frozen cache does not add new queries to the cache\n  const globalListeners = []\n\n  const configRef = defaultConfig\n    ? { current: { ...defaultConfigRef.current, ...defaultConfig }}\n    : defaultConfigRef\n\n  const queryCache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    queryCache.isFetching = Object.values(queryCache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n\n    globalListeners.forEach(d => d(queryCache))\n  }\n\n  queryCache.subscribe = cb => {\n    globalListeners.push(cb)\n    return () => {\n      globalListeners.splice(globalListeners.indexOf(cb), 1)\n    }\n  }\n\n  queryCache.clear = ({ notify = true } = {}) => {\n    Object.values(queryCache.queries).forEach(query => query.clear())\n    queryCache.queries = {}\n    if (notify) {\n      notifyGlobalListeners()\n    }\n  }\n\n  queryCache.getQueries = (predicate, { exact } = {}) => {\n    if (predicate === true) {\n      return Object.values(queryCache.queries)\n    }\n\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = configRef.current.queries.queryKeySerializerFn(predicate)\n\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(queryCache.queries).filter(predicate)\n  }\n\n  queryCache.getQuery = queryKey =>\n    queryCache.getQueries(queryKey, { exact: true })[0]\n\n  queryCache.getQueryData = queryKey =>\n    queryCache.getQuery(queryKey)?.state.data\n\n  queryCache.removeQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.clear())\n  }\n\n  queryCache.cancelQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.cancel())\n  }\n\n  queryCache.invalidateQueries = async (\n    predicate,\n    { refetchActive = true, refetchInactive = false, exact, throwOnError } = {}\n  ) => {\n    try {\n      return await Promise.all(\n        queryCache.getQueries(predicate, { exact }).map(query => {\n          if (query.instances.length) {\n            if (\n              refetchActive &&\n              query.instances.some(instance => instance.config.enabled)\n            ) {\n              return query.fetch()\n            }\n          } else {\n            if (refetchInactive) {\n              return query.fetch()\n            }\n          }\n\n          return query.invalidate()\n        })\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  queryCache.resetErrorBoundaries = () => {\n    queryCache.getQueries(true).forEach(query => {\n      query.state.throwInErrorBoundary = false\n    })\n  }\n\n  queryCache.buildQuery = (userQueryKey, config = {}) => {\n    config = {\n      ...configRef.current.shared,\n      ...configRef.current.queries,\n      ...config,\n    }\n\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = queryCache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { config })\n    } else {\n      query = makeQuery({\n        queryCache,\n        queryKey,\n        queryHash,\n        config,\n        notifyGlobalListeners,\n      })\n\n      if (config.infinite) {\n        if (\n          typeof query.state.canFetchMore === 'undefined' &&\n          typeof query.state.data !== 'undefined'\n        ) {\n          query.state.canFetchMore = config.getFetchMore(\n            query.state.data[query.state.data.length - 1],\n            query.state.data\n          )\n        }\n\n        // Here we seed the pageVariabes for the query\n        if (!query.pageVariables) {\n          query.pageVariables = [[...query.queryKey]]\n        }\n      }\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (!frozen) {\n        queryCache.queries[queryHash] = query\n\n        if (isServer) {\n          notifyGlobalListeners()\n        } else {\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    query.fallbackInstance = {\n      config: {\n        onSuccess: query.config.onSuccess,\n        onError: query.config.onError,\n        onSettled: query.config.onSettled,\n      },\n    }\n\n    return query\n  }\n\n  queryCache.prefetchQuery = async (...args) => {\n    if (\n      isObject(args[1]) &&\n      (args[1].hasOwnProperty('throwOnError') ||\n        args[1].hasOwnProperty('force'))\n    ) {\n      args[3] = args[1]\n      args[1] = undefined\n      args[2] = undefined\n    }\n\n    let [queryKey, config, { force, throwOnError } = {}] = getQueryArgs(args)\n\n    try {\n      const query = queryCache.buildQuery(queryKey, config)\n      if (force || query.state.isStale) {\n        await query.fetch()\n      }\n      return query.state.data\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n      Console.error(err)\n    }\n  }\n\n  queryCache.setQueryData = (queryKey, updater, config = {}) => {\n    let query = queryCache.getQuery(queryKey)\n\n    if (!query) {\n      query = queryCache.buildQuery(queryKey, config)\n    }\n\n    query.setData(updater)\n  }\n\n  return queryCache\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { queryCaches } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .invalidateQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (!query.instances.some(instance => instance.config.enabled)) {\n            return false\n          }\n\n          if (!query.state.isStale) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so refetching will create new one\n            delete query.promise\n          }\n\n          return query.config.refetchOnWindowFocus\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\nimport { queryCache, makeQueryCache } from '../core'\n\nexport const queryCacheContext = React.createContext(queryCache)\n\nexport const queryCaches = [queryCache]\n\nexport const useQueryCache = () => React.useContext(queryCacheContext)\n\nexport function ReactQueryCacheProvider({ queryCache, children }) {\n  const resolvedQueryCache = React.useMemo(\n    () => queryCache || makeQueryCache(),\n    [queryCache]\n  )\n\n  React.useEffect(() => {\n    queryCaches.push(resolvedQueryCache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(resolvedQueryCache)\n      if (i > -1) {\n        queryCaches.splice(i, 1)\n      }\n      // if the resolvedQueryCache was created by us, we need to tear it down\n      if (queryCache == null) {\n        resolvedQueryCache.clear({ notify: false })\n      }\n    }\n  }, [resolvedQueryCache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={resolvedQueryCache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n","import React from 'react'\nimport { DEFAULT_CONFIG, defaultConfigRef } from '../core/config'\n\n//\n\nconst configContext = React.createContext()\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = useConfigContext()\n\n  const newConfig = React.useMemo(() => {\n    const { shared = {}, queries = {}, mutations = {} } = config\n    const {\n      shared: contextShared = {},\n      queries: contextQueries = {},\n      mutations: contextMutations = {},\n    } = configContextValue\n\n    return {\n      shared: {\n        ...contextShared,\n        ...shared,\n      },\n      queries: {\n        ...contextQueries,\n        ...queries,\n      },\n      mutations: {\n        ...contextMutations,\n        ...mutations,\n      },\n    }\n  }, [config, configContextValue])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = { ...(configContextValue || DEFAULT_CONFIG) }\n    }\n  }, [configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\n\nimport {\n  uid,\n  isServer,\n  statusError,\n  statusSuccess,\n  getQueryArgs,\n} from '../core/utils'\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function useQueryArgs(args) {\n  const configContext = useConfigContext()\n\n  let [queryKey, config, ...rest] = getQueryArgs(args)\n\n  // Build the final config\n  config = {\n    ...configContext.shared,\n    ...configContext.queries,\n    ...config,\n  }\n\n  return [queryKey, config, ...rest]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(queryInfo) {\n  if (\n    queryInfo.query.config.suspense ||\n    queryInfo.query.config.useErrorBoundary\n  ) {\n    if (\n      queryInfo.query.state.status === statusError &&\n      queryInfo.query.state.throwInErrorBoundary\n    ) {\n      throw queryInfo.error\n    }\n\n    if (\n      queryInfo.query.config.suspense &&\n      queryInfo.status !== statusSuccess &&\n      queryInfo.query.config.enabled\n    ) {\n      queryInfo.query.wasSuspended = true\n      throw queryInfo.query.fetch()\n    }\n  }\n}\n","import React from 'react'\n\nimport { useMountedCallback, useGetLatest } from './utils'\nimport { useQueryCache } from './ReactQueryCacheProvider'\n\nexport function useIsFetching() {\n  const queryCache = useQueryCache()\n  const [state, unsafeRerender] = React.useReducer(d => d + 1, 1)\n  const rerender = useMountedCallback(unsafeRerender)\n\n  const isFetching = React.useMemo(() => state && queryCache.isFetching, [\n    queryCache.isFetching,\n    state,\n  ])\n\n  const getIsFetching = useGetLatest(isFetching)\n\n  React.useEffect(\n    () =>\n      queryCache.subscribe(newCache => {\n        if (getIsFetching() !== newCache.isFetching) rerender()\n      }),\n    [getIsFetching, queryCache, rerender]\n  )\n\n  return isFetching\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\nimport { useGetLatest, useMountedCallback } from './utils'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  Console,\n  uid,\n  noop,\n} from '../core/utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext().shared,\n    ...useConfigContext().mutations,\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      let snapshotValue\n\n      try {\n        dispatch({ type: actionLoading })\n        snapshotValue = await config.onMutate(variables)\n\n        let data = await getMutationFn()(variables)\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        await config.onSuccess(data, variables)\n        await onSuccess(data, variables)\n        await config.onSettled(data, null, variables)\n        await onSettled(data, null, variables)\n\n        return data\n      } catch (error) {\n        Console.error(error)\n        await config.onError(error, variables, snapshotValue)\n        await onError(error, variables, snapshotValue)\n        await config.onSettled(undefined, error, variables, snapshotValue)\n        await onSettled(undefined, error, variables, snapshotValue)\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n        }\n\n        if (throwOnError ?? config.throwOnError) {\n          throw error\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    const { suspense, useErrorBoundary } = getConfig()\n\n    if ((useErrorBoundary ?? suspense) && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [\n    mutate,\n    {\n      ...state,\n      reset,\n      isIdle: state.status === statusIdle,\n      isLoading: state.status === statusLoading,\n      isSuccess: state.status === statusSuccess,\n      isError: state.status === statusError,\n    },\n  ]\n}\n","import React from 'react'\n\n//\n\nimport { useQueryCache } from './ReactQueryCacheProvider'\nimport { useMountedCallback } from './utils'\n\nexport function useBaseQuery(queryKey, config = {}) {\n  // Make a rerender function\n  const rerender = useMountedCallback(React.useState()[1])\n\n  // Get the query cache\n  const queryCache = useQueryCache()\n\n  // Build the query for use\n  const query = queryCache.buildQuery(queryKey, config)\n\n  // Create a query instance ref\n  const instanceRef = React.useRef()\n\n  // Subscribe to the query when the subscribe function changes\n  React.useEffect(() => {\n    instanceRef.current = query.subscribe(() => rerender({}))\n\n    // Unsubscribe when things change\n    return instanceRef.current.unsubscribe\n  }, [query, rerender])\n\n  // Always update the config\n  React.useEffect(() => {\n    instanceRef.current.updateConfig(config)\n  })\n\n  const enabledBool = Boolean(config.enabled)\n\n  // Run the instance when the query or enabled change\n  React.useEffect(() => {\n    if (enabledBool && query) {\n      // Just for change detection\n    }\n    instanceRef.current.run()\n  }, [enabledBool, query])\n\n  return {\n    ...query,\n    ...query.state,\n    query,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...useQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\nimport { getStatusBools } from '../core/utils'\n\n// A paginated query is more like a \"lag\" query, which means\n// as the query key changes, we keep the results from the\n// last query and use them as placeholder data in the next one\n// We DON'T use it as initial data though. That's important\nexport function usePaginatedQuery(...args) {\n  let [queryKey, config = {}] = useQueryArgs(args)\n\n  // Keep track of the latest data result\n  const lastDataRef = React.useRef()\n\n  // If latestData is there, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  // Make the query as normal\n  const queryInfo = useBaseQuery(queryKey, config)\n\n  // If the query is disabled, get rid of the latest data\n  if (!queryInfo.query.config.enabled) {\n    lastDataRef.current = undefined\n  }\n\n  // Get the real data and status from the query\n  let { data: latestData, status } = queryInfo\n\n  // If the real query succeeds, and there is data in it,\n  // update the latest data\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  // Resolved data should be either the real data we're waiting on\n  // or the latest placeholder data\n  let resolvedData = latestData\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  // If we have any data at all from either, we\n  // need to make sure the status is success, even though\n  // the real query may still be loading\n  if (typeof resolvedData !== 'undefined') {\n    const overrides = { status: 'success', ...getStatusBools('success') }\n    Object.assign(queryInfo.query.state, overrides)\n    Object.assign(queryInfo, overrides)\n  }\n\n  const paginatedQueryInfo = {\n    ...queryInfo,\n    resolvedData,\n    latestData,\n  }\n\n  handleSuspense(paginatedQueryInfo)\n\n  return paginatedQueryInfo\n}\n","//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  let [queryKey, config] = useQueryArgs(args)\n\n  config.infinite = true\n\n  const queryInfo = useBaseQuery(queryKey, config)\n\n  handleSuspense(queryInfo)\n\n  return queryInfo\n}\n"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","setConsole","c","functionalUpdate","updater","old","stableStringifyReplacer","_","value","isObject","Object","assign","keys","sort","map","key","stableStringify","obj","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","visibilityState","undefined","isOnline","navigator","onLine","getQueryArgs","args","queryKey","queryFn","config","slice","rest","deepEqual","length","i","valueOf","prototype","hasOwnProperty","call","getStatusBools","status","isLoading","isSuccess","isError","isIdle","DEFAULT_CONFIG","shared","suspense","queries","queryKeySerializerFn","defaultQueryKeySerializerFn","initialStale","enabled","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchOnWindowFocus","refetchInterval","queryFnParamsFilter","refetchOnMount","isDataEqual","onError","onSuccess","onSettled","useErrorBoundary","mutations","throwOnError","onMutate","defaultConfigRef","current","Error","queryHash","parse","direct","then","Promise","resolve","body","result","recover","e","f","arguments","apply","reject","makeQueryInstance","query","onStateUpdate","instance","id","clearInterval","refetchIntervalId","updateConfig","oldConfig","clearIntervals","minInterval","instances","Infinity","setInterval","refetchIntervalInBackground","fetch","run","wasSuspended","state","isStale","unsubscribe","filter","cancel","scheduleGarbageCollection","_empty","actionInit","_awaitIgnored","actionFailed","_catch","actionMarkStale","_continueIgnored","actionMarkGC","_async","actionFetch","_await","actionSuccess","_invoke","actionError","_invokeIgnored","actionSetState","pact","s","v","o","bind","observer","onFulfilled","onRejected","callback","_this","thenable","test","awaitBody","shouldContinue","_resumeAfterBody","_resumeAfterTest","thrown","finalizer","makeQuery","queryCache","notifyGlobalListeners","initialData","hasInitialData","initialStatus","queryReducer","type","dispatch","action","forEach","scheduleStaleTimeout","clearTimeout","staleTimeout","setTimeout","getQuery","invalidate","cacheTimeout","removeQueries","markedForGarbageCollection","data","refetch","heal","cancelled","cancelPromises","promise","setState","setData","clear","retryTimeout","subscribe","push","tryFetchData","fn","shouldContinueRetryOnFocus","failureCount","delay","fetchMore","infinite","originalQueryFn","pageVariables","rebuiltPageVariables","shift","nextCursor","getFetchMore","pageArgs","canFetchMore","fetchMoreInfo","previous","isFetchingMore","newArgs","newData","getCallbackInstances","callbackInstances","unshift","fallbackInstance","newState","switchActions","isFetching","updatedAt","Date","now","throwInErrorBoundary","makeQueryCache","queryCaches","frozen","defaultConfig","globalListeners","configRef","values","reduce","acc","cb","splice","indexOf","notify","getQueries","predicate","exact","getQueryData","cancelQueries","invalidateQueries","refetchActive","refetchInactive","all","err","resetErrorBoundaries","buildQuery","userQueryKey","prefetchQuery","force","setQueryData","visibilityChangeEvent","focusEvent","onWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","queryCacheContext","React","createContext","useQueryCache","useContext","ReactQueryCacheProvider","children","resolvedQueryCache","useMemo","useEffect","configContext","useConfigContext","ReactQueryConfigProvider","configContextValue","newConfig","contextShared","contextQueries","contextMutations","useGetLatest","ref","useRef","useCallback","useQueryArgs","useMountedCallback","mounted","handleSuspense","queryInfo","useIsFetching","useReducer","unsafeRerender","rerender","getIsFetching","newCache","getDefaultState","actionReset","actionLoading","actionResolve","actionReject","mutationReducer","useMutation","mutationFn","unsafeDispatch","getMutationFn","getConfig","latestMutationRef","mutate","variables","mutationId","isLatest","snapshotValue","reset","useBaseQuery","useState","instanceRef","enabledBool","Boolean","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","overrides","paginatedQueryInfo","useInfiniteQuery"],"mappings":"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"}