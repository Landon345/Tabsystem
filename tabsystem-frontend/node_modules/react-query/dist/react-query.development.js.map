{"version":3,"file":"react-query.development.js","sources":["../src/core/utils.js","../src/core/config.js","../src/core/queryInstance.js","../src/core/query.js","../src/core/queryCache.js","../src/core/setFocusHandler.js","../src/react/ReactQueryCacheProvider.js","../src/react/ReactQueryConfigProvider.js","../src/react/utils.js","../src/react/useIsFetching.js","../src/react/useMutation.js","../src/react/useBaseQuery.js","../src/react/useQuery.js","../src/react/usePaginatedQuery.js","../src/react/useInfiniteQuery.js"],"sourcesContent":["export const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport function noop() {\n  return void 0\n}\nexport function identity(d) {\n  return d\n}\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    const { queryKey, queryFn, config } = args[0]\n    args = [queryKey, queryFn, config, ...args.slice(1)]\n  } else if (isObject(args[1])) {\n    const [queryKey, config, ...rest] = args\n    args = [queryKey, undefined, config, ...rest]\n  }\n\n  let [queryKey, queryFn, config = {}, ...rest] = args\n\n  queryFn = queryFn || config.queryFn\n\n  return [queryKey, queryFn ? { ...config, queryFn } : config, ...rest]\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nexport function deepEqual(a, b) {\n  if (a === b) return true\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i]\n\n      if (!deepEqual(a[key], b[key])) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n\nexport function getStatusBools(status) {\n  return {\n    isLoading: status === statusLoading,\n    isSuccess: status === statusSuccess,\n    isError: status === statusError,\n    isIdle: status === statusIdle,\n  }\n}\n","import { noop, stableStringify, identity, deepEqual } from './utils'\n\nexport const DEFAULT_CONFIG = {\n  shared: {\n    suspense: false,\n  },\n  queries: {\n    queryKeySerializerFn: defaultQueryKeySerializerFn,\n    queryFn: undefined,\n    initialStale: undefined,\n    enabled: true,\n    retry: 3,\n    retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n    staleTime: 0,\n    cacheTime: 5 * 60 * 1000,\n    refetchOnWindowFocus: true,\n    refetchInterval: false,\n    queryFnParamsFilter: identity,\n    refetchOnMount: true,\n    isDataEqual: deepEqual,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n  mutations: {\n    throwOnError: false,\n    onMutate: noop,\n    onError: noop,\n    onSuccess: noop,\n    onSettled: noop,\n    useErrorBoundary: false,\n  },\n}\n\nexport const defaultConfigRef = {\n  current: DEFAULT_CONFIG,\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    return []\n  }\n\n  if (!Array.isArray(queryKey)) {\n    queryKey = [queryKey]\n  }\n\n  if (queryKey.some(d => typeof d === 'function')) {\n    throw new Error('A valid query key is required!')\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  if (!queryHash) {\n    return []\n  }\n\n  return [queryHash, queryKey]\n}\n","import { uid, isServer, isDocumentVisible, Console } from './utils'\n\nexport function makeQueryInstance(query, onStateUpdate) {\n  const instance = {\n    id: uid(),\n    onStateUpdate,\n  }\n\n  instance.clearInterval = () => {\n    clearInterval(instance.refetchIntervalId)\n    delete instance.refetchIntervalId\n  }\n\n  instance.updateConfig = config => {\n    const oldConfig = instance.config\n\n    // Update the config\n    instance.config = config\n\n    if (!isServer) {\n      if (oldConfig?.refetchInterval === config.refetchInterval) {\n        return\n      }\n\n      query.clearIntervals()\n\n      const minInterval = Math.min(\n        ...query.instances.map(d => d.config.refetchInterval || Infinity)\n      )\n\n      if (\n        !instance.refetchIntervalId &&\n        minInterval > 0 &&\n        minInterval < Infinity\n      ) {\n        instance.refetchIntervalId = setInterval(() => {\n          if (\n            query.instances.some(instance => instance.config.enabled) &&\n            (isDocumentVisible() ||\n              query.instances.some(\n                instance => instance.config.refetchIntervalInBackground\n              ))\n          ) {\n            query.fetch()\n          }\n        }, minInterval)\n      }\n    }\n  }\n\n  instance.run = async () => {\n    try {\n      // Perform the refetch for this query if necessary\n      if (\n        query.config.enabled && // Don't auto refetch if disabled\n        !query.wasSuspended && // Don't double refetch for suspense\n        query.state.isStale && // Only refetch if stale\n        (query.config.refetchOnMount || query.instances.length === 1)\n      ) {\n        await query.fetch()\n      }\n\n      query.wasSuspended = false\n    } catch (error) {\n      Console.error(error)\n    }\n  }\n\n  instance.unsubscribe = () => {\n    query.instances = query.instances.filter(d => d.id !== instance.id)\n\n    if (!query.instances.length) {\n      instance.clearInterval()\n      query.cancel()\n\n      if (!isServer) {\n        // Schedule garbage collection\n        query.scheduleGarbageCollection()\n      }\n    }\n  }\n\n  return instance\n}\n","import {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  noop,\n  statusIdle,\n  Console,\n  getStatusBools,\n} from './utils'\nimport { makeQueryInstance } from './queryInstance'\n\nconst actionInit = 'Init'\nconst actionFailed = 'Failed'\nconst actionMarkStale = 'MarkStale'\nconst actionMarkGC = 'MarkGC'\nconst actionFetch = 'Fetch'\nconst actionSuccess = 'Success'\nconst actionError = 'Error'\nconst actionSetState = 'SetState'\n\nexport function makeQuery({\n  queryCache,\n  queryKey,\n  queryHash,\n  config,\n  notifyGlobalListeners,\n}) {\n  const initialData =\n    typeof config.initialData === 'function'\n      ? config.initialData()\n      : config.initialData\n\n  const hasInitialData = typeof initialData !== 'undefined'\n\n  const isStale =\n    !config.enabled ||\n    (typeof config.initialStale === 'function'\n      ? config.initialStale()\n      : config.initialStale ?? !hasInitialData)\n\n  const initialStatus = hasInitialData\n    ? statusSuccess\n    : config.enabled\n    ? statusLoading\n    : statusIdle\n\n  let query = {\n    queryKey,\n    queryHash,\n    config,\n    instances: [],\n    state: queryReducer(undefined, {\n      type: actionInit,\n      initialStatus,\n      initialData,\n      hasInitialData,\n      isStale,\n    }),\n  }\n\n  query.dispatch = action => {\n    query.state = queryReducer(query.state, action)\n    query.instances.forEach(d => d.onStateUpdate(query.state))\n    notifyGlobalListeners()\n  }\n\n  query.scheduleStaleTimeout = () => {\n    if (isServer) return\n    clearTimeout(query.staleTimeout)\n\n    if (query.config.staleTime === Infinity) {\n      return\n    }\n\n    query.staleTimeout = setTimeout(() => {\n      if (queryCache.getQuery(query.queryKey)) {\n        query.invalidate()\n      }\n    }, query.config.staleTime)\n  }\n\n  query.invalidate = () => {\n    clearTimeout(query.staleTimeout)\n    query.dispatch({ type: actionMarkStale })\n  }\n\n  query.scheduleGarbageCollection = () => {\n    if (!queryCache.queries[query.queryHash]) return\n    if (query.config.cacheTime === Infinity) {\n      return\n    }\n    query.dispatch({ type: actionMarkGC })\n    query.cacheTimeout = setTimeout(\n      () => {\n        queryCache.removeQueries(\n          d =>\n            d.state.markedForGarbageCollection &&\n            d.queryHash === query.queryHash\n        )\n      },\n      typeof query.state.data === 'undefined' && query.state.status !== 'error'\n        ? 0\n        : query.config.cacheTime\n    )\n  }\n\n  query.refetch = async () => {\n    try {\n      await query.fetch()\n    } catch (error) {\n      Console.error(error)\n    }\n  }\n\n  query.heal = () => {\n    // Stop the query from being garbage collected\n    clearTimeout(query.cacheTimeout)\n\n    // Mark the query as not cancelled\n    query.cancelled = null\n  }\n\n  query.cancel = () => {\n    query.cancelled = cancelledError\n\n    if (query.cancelPromises) {\n      query.cancelPromises()\n    }\n\n    delete query.promise\n  }\n\n  query.clearIntervals = () => {\n    query.instances.forEach(instance => {\n      instance.clearInterval()\n    })\n  }\n\n  query.setState = updater => query.dispatch({ type: actionSetState, updater })\n\n  query.setData = updater => {\n    // Set data and mark it as cached\n    query.dispatch({ type: actionSuccess, updater })\n\n    // Schedule a fresh invalidation!\n    query.scheduleStaleTimeout()\n  }\n\n  query.clear = () => {\n    clearTimeout(query.staleTimeout)\n    clearTimeout(query.cacheTimeout)\n    clearTimeout(query.retryTimeout)\n    query.clearIntervals()\n    query.cancel()\n    query.dispatch = noop\n    delete queryCache.queries[query.queryHash]\n    notifyGlobalListeners()\n  }\n\n  query.subscribe = (onStateUpdate = noop) => {\n    const instance = makeQueryInstance(query, onStateUpdate)\n    query.instances.push(instance)\n    query.heal()\n    return instance\n  }\n\n  // Set up the core fetcher function\n  const tryFetchData = async (fn, ...args) => {\n    try {\n      // Perform the query\n      const promise = fn(...query.config.queryFnParamsFilter(args))\n\n      query.cancelPromises = () => promise.cancel?.()\n\n      const data = await promise\n      delete query.shouldContinueRetryOnFocus\n\n      delete query.cancelPromises\n      if (query.cancelled) throw query.cancelled\n\n      return data\n    } catch (error) {\n      delete query.cancelPromises\n      if (query.cancelled) throw query.cancelled\n\n      // If we fail, increase the failureCount\n      query.dispatch({ type: actionFailed })\n\n      // Do we need to retry the request?\n      if (\n        query.config.retry === true ||\n        query.state.failureCount <= query.config.retry ||\n        (typeof query.config.retry === 'function' &&\n          query.config.retry(query.state.failureCount, error))\n      ) {\n        // Only retry if the document is visible\n        if (!isDocumentVisible()) {\n          // set this flag to continue retries on focus\n          query.shouldContinueRetryOnFocus = true\n          // Resolve a\n          return new Promise(noop)\n        }\n\n        delete query.shouldContinueRetryOnFocus\n\n        // Determine the retryDelay\n        const delay = functionalUpdate(\n          query.config.retryDelay,\n          query.state.failureCount\n        )\n\n        // Return a new promise with the retry\n        return await new Promise((resolve, reject) => {\n          // Keep track of the retry timeout\n          query.retryTimeout = setTimeout(async () => {\n            if (query.cancelled) return reject(query.cancelled)\n\n            try {\n              const data = await tryFetchData(fn, ...args)\n              if (query.cancelled) return reject(query.cancelled)\n              resolve(data)\n            } catch (error) {\n              if (query.cancelled) return reject(query.cancelled)\n              reject(error)\n            }\n          }, delay)\n        })\n      }\n\n      throw error\n    }\n  }\n\n  query.fetch = async ({ fetchMore } = {}) => {\n    let queryFn = query.config.queryFn\n\n    if (!queryFn) {\n      return\n    }\n\n    if (query.config.infinite) {\n      const originalQueryFn = queryFn\n\n      queryFn = async () => {\n        const data = []\n        const pageVariables = [...query.pageVariables]\n        const rebuiltPageVariables = []\n\n        do {\n          const args = pageVariables.shift()\n\n          if (!data.length) {\n            // the first page query doesn't need to be rebuilt\n            data.push(await originalQueryFn(...args))\n            rebuiltPageVariables.push(args)\n          } else {\n            // get an up-to-date cursor based on the previous data set\n\n            const nextCursor = query.config.getFetchMore(\n              data[data.length - 1],\n              data\n            )\n\n            // break early if there's no next cursor\n            // otherwise we'll start from the beginning\n            // which will cause unwanted duplication\n            if (!nextCursor) {\n              break\n            }\n\n            const pageArgs = [\n              // remove the last argument (the previously saved cursor)\n              ...args.slice(0, -1),\n              nextCursor,\n            ]\n\n            data.push(await originalQueryFn(...pageArgs))\n            rebuiltPageVariables.push(pageArgs)\n          }\n        } while (pageVariables.length)\n\n        query.state.canFetchMore = query.config.getFetchMore(\n          data[data.length - 1],\n          data\n        )\n        query.pageVariables = rebuiltPageVariables\n\n        return data\n      }\n\n      if (fetchMore) {\n        queryFn = async (...args) => {\n          const { fetchMoreInfo, previous } = fetchMore\n          try {\n            query.setState(old => ({\n              ...old,\n              isFetchingMore: previous ? 'previous' : 'next',\n            }))\n\n            const newArgs = [...args, fetchMoreInfo]\n\n            query.pageVariables[previous ? 'unshift' : 'push'](newArgs)\n\n            const newData = await originalQueryFn(...newArgs)\n\n            const data = previous\n              ? [newData, ...query.state.data]\n              : [...query.state.data, newData]\n\n            query.state.canFetchMore = query.config.getFetchMore(newData, data)\n\n            return data\n          } finally {\n            query.setState(old => ({\n              ...old,\n              isFetchingMore: false,\n            }))\n          }\n        }\n      }\n    }\n\n    // Create a new promise for the query cache if necessary\n    if (!query.promise) {\n      query.promise = (async () => {\n        // If there are any retries pending for this query, kill them\n        query.cancelled = null\n\n        const getCallbackInstances = () => {\n          const callbackInstances = [...query.instances]\n\n          if (query.wasSuspended) {\n            callbackInstances.unshift(query.fallbackInstance)\n          }\n          return callbackInstances\n        }\n\n        try {\n          // Set up the query refreshing state\n          query.dispatch({ type: actionFetch })\n\n          // Try to get the data\n          let data = await tryFetchData(queryFn, ...query.queryKey)\n\n          query.setData(old =>\n            query.config.isDataEqual(old, data) ? old : data\n          )\n\n          getCallbackInstances().forEach(\n            instance =>\n              instance.config.onSuccess &&\n              instance.config.onSuccess(query.state.data)\n          )\n\n          getCallbackInstances().forEach(\n            instance =>\n              instance.config.onSettled &&\n              instance.config.onSettled(query.state.data, null)\n          )\n\n          delete query.promise\n\n          return data\n        } catch (error) {\n          query.dispatch({\n            type: actionError,\n            cancelled: error === query.cancelled,\n            error,\n          })\n\n          delete query.promise\n\n          if (error !== query.cancelled) {\n            getCallbackInstances().forEach(\n              instance =>\n                instance.config.onError && instance.config.onError(error)\n            )\n\n            getCallbackInstances().forEach(\n              instance =>\n                instance.config.onSettled &&\n                instance.config.onSettled(undefined, error)\n            )\n\n            throw error\n          }\n        }\n      })()\n    }\n\n    return query.promise\n  }\n\n  if (query.config.infinite) {\n    query.fetchMore = (\n      fetchMoreInfo = query.state.canFetchMore,\n      { previous = false } = {}\n    ) => query.fetch({ fetchMore: { fetchMoreInfo, previous } })\n  }\n\n  return query\n}\n\nexport function queryReducer(state, action) {\n  const newState = switchActions(state, action)\n\n  return Object.assign(newState, getStatusBools(newState.status))\n}\n\nfunction switchActions(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching: action.initialStatus === 'loading',\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status:\n          typeof state.data !== 'undefined' ? statusSuccess : statusLoading,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n          throwInErrorBoundary: true,\n        }),\n      }\n    case actionSetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      throw new Error()\n  }\n}\n","import {\n  isServer,\n  getQueryArgs,\n  deepIncludes,\n  Console,\n  isObject,\n} from './utils'\nimport { defaultConfigRef } from './config'\nimport { makeQuery } from './query'\n\nexport const queryCache = makeQueryCache()\n\nexport const queryCaches = [queryCache]\n\nexport function makeQueryCache({ frozen = isServer, defaultConfig } = {}) {\n  // A frozen cache does not add new queries to the cache\n  const globalListeners = []\n\n  const configRef = defaultConfig\n    ? { current: { ...defaultConfigRef.current, ...defaultConfig }}\n    : defaultConfigRef\n\n  const queryCache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    queryCache.isFetching = Object.values(queryCache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n\n    globalListeners.forEach(d => d(queryCache))\n  }\n\n  queryCache.subscribe = cb => {\n    globalListeners.push(cb)\n    return () => {\n      globalListeners.splice(globalListeners.indexOf(cb), 1)\n    }\n  }\n\n  queryCache.clear = ({ notify = true } = {}) => {\n    Object.values(queryCache.queries).forEach(query => query.clear())\n    queryCache.queries = {}\n    if (notify) {\n      notifyGlobalListeners()\n    }\n  }\n\n  queryCache.getQueries = (predicate, { exact } = {}) => {\n    if (predicate === true) {\n      return Object.values(queryCache.queries)\n    }\n\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = configRef.current.queries.queryKeySerializerFn(predicate)\n\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(queryCache.queries).filter(predicate)\n  }\n\n  queryCache.getQuery = queryKey =>\n    queryCache.getQueries(queryKey, { exact: true })[0]\n\n  queryCache.getQueryData = queryKey =>\n    queryCache.getQuery(queryKey)?.state.data\n\n  queryCache.removeQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.clear())\n  }\n\n  queryCache.cancelQueries = (...args) => {\n    queryCache.getQueries(...args).forEach(query => query.cancel())\n  }\n\n  queryCache.invalidateQueries = async (\n    predicate,\n    { refetchActive = true, refetchInactive = false, exact, throwOnError } = {}\n  ) => {\n    try {\n      return await Promise.all(\n        queryCache.getQueries(predicate, { exact }).map(query => {\n          if (query.instances.length) {\n            if (\n              refetchActive &&\n              query.instances.some(instance => instance.config.enabled)\n            ) {\n              return query.fetch()\n            }\n          } else {\n            if (refetchInactive) {\n              return query.fetch()\n            }\n          }\n\n          return query.invalidate()\n        })\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  queryCache.resetErrorBoundaries = () => {\n    queryCache.getQueries(true).forEach(query => {\n      query.state.throwInErrorBoundary = false\n    })\n  }\n\n  queryCache.buildQuery = (userQueryKey, config = {}) => {\n    config = {\n      ...configRef.current.shared,\n      ...configRef.current.queries,\n      ...config,\n    }\n\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = queryCache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { config })\n    } else {\n      query = makeQuery({\n        queryCache,\n        queryKey,\n        queryHash,\n        config,\n        notifyGlobalListeners,\n      })\n\n      if (config.infinite) {\n        if (\n          typeof query.state.canFetchMore === 'undefined' &&\n          typeof query.state.data !== 'undefined'\n        ) {\n          query.state.canFetchMore = config.getFetchMore(\n            query.state.data[query.state.data.length - 1],\n            query.state.data\n          )\n        }\n\n        // Here we seed the pageVariabes for the query\n        if (!query.pageVariables) {\n          query.pageVariables = [[...query.queryKey]]\n        }\n      }\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (!frozen) {\n        queryCache.queries[queryHash] = query\n\n        if (isServer) {\n          notifyGlobalListeners()\n        } else {\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    query.fallbackInstance = {\n      config: {\n        onSuccess: query.config.onSuccess,\n        onError: query.config.onError,\n        onSettled: query.config.onSettled,\n      },\n    }\n\n    return query\n  }\n\n  queryCache.prefetchQuery = async (...args) => {\n    if (\n      isObject(args[1]) &&\n      (args[1].hasOwnProperty('throwOnError') ||\n        args[1].hasOwnProperty('force'))\n    ) {\n      args[3] = args[1]\n      args[1] = undefined\n      args[2] = undefined\n    }\n\n    let [queryKey, config, { force, throwOnError } = {}] = getQueryArgs(args)\n\n    try {\n      const query = queryCache.buildQuery(queryKey, config)\n      if (force || query.state.isStale) {\n        await query.fetch()\n      }\n      return query.state.data\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n      Console.error(err)\n    }\n  }\n\n  queryCache.setQueryData = (queryKey, updater, config = {}) => {\n    let query = queryCache.getQuery(queryKey)\n\n    if (!query) {\n      query = queryCache.buildQuery(queryKey, config)\n    }\n\n    query.setData(updater)\n  }\n\n  return queryCache\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { queryCaches } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .invalidateQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (!query.instances.some(instance => instance.config.enabled)) {\n            return false\n          }\n\n          if (!query.state.isStale) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so refetching will create new one\n            delete query.promise\n          }\n\n          return query.config.refetchOnWindowFocus\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\nimport { queryCache, makeQueryCache } from '../core'\n\nexport const queryCacheContext = React.createContext(queryCache)\n\nexport const queryCaches = [queryCache]\n\nexport const useQueryCache = () => React.useContext(queryCacheContext)\n\nexport function ReactQueryCacheProvider({ queryCache, children }) {\n  const resolvedQueryCache = React.useMemo(\n    () => queryCache || makeQueryCache(),\n    [queryCache]\n  )\n\n  React.useEffect(() => {\n    queryCaches.push(resolvedQueryCache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(resolvedQueryCache)\n      if (i > -1) {\n        queryCaches.splice(i, 1)\n      }\n      // if the resolvedQueryCache was created by us, we need to tear it down\n      if (queryCache == null) {\n        resolvedQueryCache.clear({ notify: false })\n      }\n    }\n  }, [resolvedQueryCache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={resolvedQueryCache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n","import React from 'react'\nimport { DEFAULT_CONFIG, defaultConfigRef } from '../core/config'\n\n//\n\nconst configContext = React.createContext()\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = useConfigContext()\n\n  const newConfig = React.useMemo(() => {\n    const { shared = {}, queries = {}, mutations = {} } = config\n    const {\n      shared: contextShared = {},\n      queries: contextQueries = {},\n      mutations: contextMutations = {},\n    } = configContextValue\n\n    return {\n      shared: {\n        ...contextShared,\n        ...shared,\n      },\n      queries: {\n        ...contextQueries,\n        ...queries,\n      },\n      mutations: {\n        ...contextMutations,\n        ...mutations,\n      },\n    }\n  }, [config, configContextValue])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = { ...(configContextValue || DEFAULT_CONFIG) }\n    }\n  }, [configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\n\nimport {\n  uid,\n  isServer,\n  statusError,\n  statusSuccess,\n  getQueryArgs,\n} from '../core/utils'\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function useQueryArgs(args) {\n  const configContext = useConfigContext()\n\n  let [queryKey, config, ...rest] = getQueryArgs(args)\n\n  // Build the final config\n  config = {\n    ...configContext.shared,\n    ...configContext.queries,\n    ...config,\n  }\n\n  return [queryKey, config, ...rest]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(queryInfo) {\n  if (\n    queryInfo.query.config.suspense ||\n    queryInfo.query.config.useErrorBoundary\n  ) {\n    if (\n      queryInfo.query.state.status === statusError &&\n      queryInfo.query.state.throwInErrorBoundary\n    ) {\n      throw queryInfo.error\n    }\n\n    if (\n      queryInfo.query.config.suspense &&\n      queryInfo.status !== statusSuccess &&\n      queryInfo.query.config.enabled\n    ) {\n      queryInfo.query.wasSuspended = true\n      throw queryInfo.query.fetch()\n    }\n  }\n}\n","import React from 'react'\n\nimport { useMountedCallback, useGetLatest } from './utils'\nimport { useQueryCache } from './ReactQueryCacheProvider'\n\nexport function useIsFetching() {\n  const queryCache = useQueryCache()\n  const [state, unsafeRerender] = React.useReducer(d => d + 1, 1)\n  const rerender = useMountedCallback(unsafeRerender)\n\n  const isFetching = React.useMemo(() => state && queryCache.isFetching, [\n    queryCache.isFetching,\n    state,\n  ])\n\n  const getIsFetching = useGetLatest(isFetching)\n\n  React.useEffect(\n    () =>\n      queryCache.subscribe(newCache => {\n        if (getIsFetching() !== newCache.isFetching) rerender()\n      }),\n    [getIsFetching, queryCache, rerender]\n  )\n\n  return isFetching\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\nimport { useGetLatest, useMountedCallback } from './utils'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  Console,\n  uid,\n  noop,\n} from '../core/utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext().shared,\n    ...useConfigContext().mutations,\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      let snapshotValue\n\n      try {\n        dispatch({ type: actionLoading })\n        snapshotValue = await config.onMutate(variables)\n\n        let data = await getMutationFn()(variables)\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        await config.onSuccess(data, variables)\n        await onSuccess(data, variables)\n        await config.onSettled(data, null, variables)\n        await onSettled(data, null, variables)\n\n        return data\n      } catch (error) {\n        Console.error(error)\n        await config.onError(error, variables, snapshotValue)\n        await onError(error, variables, snapshotValue)\n        await config.onSettled(undefined, error, variables, snapshotValue)\n        await onSettled(undefined, error, variables, snapshotValue)\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n        }\n\n        if (throwOnError ?? config.throwOnError) {\n          throw error\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    const { suspense, useErrorBoundary } = getConfig()\n\n    if ((useErrorBoundary ?? suspense) && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [\n    mutate,\n    {\n      ...state,\n      reset,\n      isIdle: state.status === statusIdle,\n      isLoading: state.status === statusLoading,\n      isSuccess: state.status === statusSuccess,\n      isError: state.status === statusError,\n    },\n  ]\n}\n","import React from 'react'\n\n//\n\nimport { useQueryCache } from './ReactQueryCacheProvider'\nimport { useMountedCallback } from './utils'\n\nexport function useBaseQuery(queryKey, config = {}) {\n  // Make a rerender function\n  const rerender = useMountedCallback(React.useState()[1])\n\n  // Get the query cache\n  const queryCache = useQueryCache()\n\n  // Build the query for use\n  const query = queryCache.buildQuery(queryKey, config)\n\n  // Create a query instance ref\n  const instanceRef = React.useRef()\n\n  // Subscribe to the query when the subscribe function changes\n  React.useEffect(() => {\n    instanceRef.current = query.subscribe(() => rerender({}))\n\n    // Unsubscribe when things change\n    return instanceRef.current.unsubscribe\n  }, [query, rerender])\n\n  // Always update the config\n  React.useEffect(() => {\n    instanceRef.current.updateConfig(config)\n  })\n\n  const enabledBool = Boolean(config.enabled)\n\n  // Run the instance when the query or enabled change\n  React.useEffect(() => {\n    if (enabledBool && query) {\n      // Just for change detection\n    }\n    instanceRef.current.run()\n  }, [enabledBool, query])\n\n  return {\n    ...query,\n    ...query.state,\n    query,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...useQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\nimport { getStatusBools } from '../core/utils'\n\n// A paginated query is more like a \"lag\" query, which means\n// as the query key changes, we keep the results from the\n// last query and use them as placeholder data in the next one\n// We DON'T use it as initial data though. That's important\nexport function usePaginatedQuery(...args) {\n  let [queryKey, config = {}] = useQueryArgs(args)\n\n  // Keep track of the latest data result\n  const lastDataRef = React.useRef()\n\n  // If latestData is there, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  // Make the query as normal\n  const queryInfo = useBaseQuery(queryKey, config)\n\n  // If the query is disabled, get rid of the latest data\n  if (!queryInfo.query.config.enabled) {\n    lastDataRef.current = undefined\n  }\n\n  // Get the real data and status from the query\n  let { data: latestData, status } = queryInfo\n\n  // If the real query succeeds, and there is data in it,\n  // update the latest data\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  // Resolved data should be either the real data we're waiting on\n  // or the latest placeholder data\n  let resolvedData = latestData\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  // If we have any data at all from either, we\n  // need to make sure the status is success, even though\n  // the real query may still be loading\n  if (typeof resolvedData !== 'undefined') {\n    const overrides = { status: 'success', ...getStatusBools('success') }\n    Object.assign(queryInfo.query.state, overrides)\n    Object.assign(queryInfo, overrides)\n  }\n\n  const paginatedQueryInfo = {\n    ...queryInfo,\n    resolvedData,\n    latestData,\n  }\n\n  handleSuspense(paginatedQueryInfo)\n\n  return paginatedQueryInfo\n}\n","//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { useQueryArgs, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  let [queryKey, config] = useQueryArgs(args)\n\n  config.infinite = true\n\n  const queryInfo = useBaseQuery(queryKey, config)\n\n  handleSuspense(queryInfo)\n\n  return queryInfo\n}\n"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","setConsole","c","functionalUpdate","updater","old","stableStringifyReplacer","_","value","isObject","Object","assign","keys","sort","map","key","stableStringify","obj","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","visibilityState","undefined","isOnline","navigator","onLine","getQueryArgs","args","queryKey","queryFn","config","slice","rest","deepEqual","length","i","valueOf","prototype","hasOwnProperty","call","getStatusBools","status","isLoading","isSuccess","isError","isIdle","DEFAULT_CONFIG","shared","suspense","queries","queryKeySerializerFn","defaultQueryKeySerializerFn","initialStale","enabled","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchOnWindowFocus","refetchInterval","queryFnParamsFilter","refetchOnMount","isDataEqual","onError","onSuccess","onSettled","useErrorBoundary","mutations","throwOnError","onMutate","defaultConfigRef","current","Error","queryHash","parse","direct","then","Promise","resolve","body","result","recover","e","f","arguments","apply","reject","makeQueryInstance","query","onStateUpdate","instance","id","clearInterval","refetchIntervalId","updateConfig","oldConfig","clearIntervals","minInterval","instances","Infinity","setInterval","refetchIntervalInBackground","fetch","run","wasSuspended","state","isStale","unsubscribe","filter","cancel","scheduleGarbageCollection","_empty","actionInit","_awaitIgnored","actionFailed","_catch","actionMarkStale","_continueIgnored","actionMarkGC","_async","actionFetch","_await","actionSuccess","_invoke","actionError","_invokeIgnored","actionSetState","pact","s","v","o","bind","observer","onFulfilled","onRejected","callback","_this","thenable","test","awaitBody","shouldContinue","_resumeAfterBody","_resumeAfterTest","thrown","finalizer","makeQuery","queryCache","notifyGlobalListeners","initialData","hasInitialData","initialStatus","queryReducer","type","dispatch","action","forEach","scheduleStaleTimeout","clearTimeout","staleTimeout","setTimeout","getQuery","invalidate","cacheTimeout","removeQueries","markedForGarbageCollection","data","refetch","heal","cancelled","cancelPromises","promise","setState","setData","clear","retryTimeout","subscribe","push","tryFetchData","fn","shouldContinueRetryOnFocus","failureCount","delay","fetchMore","infinite","originalQueryFn","pageVariables","rebuiltPageVariables","shift","nextCursor","getFetchMore","pageArgs","canFetchMore","fetchMoreInfo","previous","isFetchingMore","newArgs","newData","getCallbackInstances","callbackInstances","unshift","fallbackInstance","newState","switchActions","isFetching","updatedAt","Date","now","throwInErrorBoundary","makeQueryCache","queryCaches","frozen","defaultConfig","globalListeners","configRef","values","reduce","acc","cb","splice","indexOf","notify","getQueries","predicate","exact","getQueryData","cancelQueries","invalidateQueries","refetchActive","refetchInactive","all","err","resetErrorBoundaries","buildQuery","userQueryKey","prefetchQuery","force","setQueryData","visibilityChangeEvent","focusEvent","onWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","queryCacheContext","React","createContext","useQueryCache","useContext","ReactQueryCacheProvider","children","resolvedQueryCache","useMemo","useEffect","configContext","useConfigContext","ReactQueryConfigProvider","configContextValue","newConfig","contextShared","contextQueries","contextMutations","useGetLatest","ref","useRef","useCallback","useQueryArgs","useMountedCallback","mounted","handleSuspense","queryInfo","useIsFetching","useReducer","unsafeRerender","rerender","getIsFetching","newCache","getDefaultState","actionReset","actionLoading","actionResolve","actionReject","mutationReducer","useMutation","mutationFn","unsafeDispatch","getMutationFn","getConfig","latestMutationRef","mutate","variables","mutationId","isLatest","snapshotValue","reset","useBaseQuery","useState","instanceRef","enabledBool","Boolean","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","overrides","paginatedQueryInfo","useInfiniteQuery"],"mappings":"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"}